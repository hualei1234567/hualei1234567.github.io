<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Flinkä»å…¥é—¨åˆ°æ”¾å¼ƒ(å…¥é—¨ç¯‡4)-DataStreamAPI</title>
      <link href="/posts/d31f.html"/>
      <url>/posts/d31f.html</url>
      
        <content type="html"><![CDATA[<p>DataStreamç®—å­å°†ä¸€ä¸ªæˆ–å¤šä¸ªDataStreamè½¬æ¢ä¸ºæ–°DataStreamã€‚ç¨‹åºå¯ä»¥å°†å¤šä¸ªè½¬æ¢ç»„åˆæˆå¤æ‚çš„æ•°æ®æµæ‹“æ‰‘ã€‚<br>DataStreamAPIå’ŒDataSetAPIä¸»è¦çš„åŒºåˆ«åœ¨äºTransformationéƒ¨åˆ†ã€‚</p><h2 id="DataStream-Transformation"><a href="#DataStream-Transformation" class="headerlink" title="DataStream Transformation"></a>DataStream Transformation</h2><h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><ul><li>DataStreamâ†’DataStream<br>ç”¨ä¸€ä¸ªæ•°æ®å…ƒç”Ÿæˆä¸€ä¸ªæ•°æ®å…ƒã€‚ä¸€ä¸ªmapå‡½æ•°ï¼Œå®ƒå°†è¾“å…¥æµçš„å€¼åŠ å€ï¼š<pre><code>DataStream&lt;Integer&gt; dataStream = //...dataStream.map(new MapFunction&lt;Integer, Integer&gt;() {  @Override  public Integer map(Integer value) throws Exception {      return 2 * value;  }});</code></pre></li></ul><h3 id="FlatMap"><a href="#FlatMap" class="headerlink" title="FlatMap"></a>FlatMap</h3><ul><li>DataStreamâ†’DataStream</li></ul><p>é‡‡ç”¨ä¸€ä¸ªæ•°æ®å…ƒå¹¶ç”Ÿæˆé›¶ä¸ªï¼Œä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®å…ƒã€‚å°†å¥å­åˆ†å‰²ä¸ºå•è¯çš„flatmapå‡½æ•°ï¼š</p><pre><code>dataStream.flatMap(new FlatMapFunction&lt;String, String&gt;() {    @Override    public void flatMap(String value, Collector&lt;String&gt; out)        throws Exception {        for(String word: value.split(" ")){            out.collect(word);        }    }});</code></pre><h3 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h3><ul><li>DataStreamâ†’DataStream<br>è®¡ç®—æ¯ä¸ªæ•°æ®å…ƒçš„å¸ƒå°”å‡½æ•°ï¼Œå¹¶ä¿å­˜å‡½æ•°è¿”å›trueçš„æ•°æ®å…ƒã€‚è¿‡æ»¤æ‰é›¶å€¼çš„è¿‡æ»¤å™¨ï¼š</li></ul><pre><code>dataStream.filter(new FilterFunction&lt;Integer&gt;() {    @Override    public boolean filter(Integer value) throws Exception {        return value != 0;    }});</code></pre><h3 id="KeyBy"><a href="#KeyBy" class="headerlink" title="KeyBy"></a>KeyBy</h3><ul><li>DataStreamâ†’KeyedStream</li></ul><p>é€»è¾‘ä¸Šå°†æµåˆ†åŒºä¸ºä¸ç›¸äº¤çš„åˆ†åŒºã€‚å…·æœ‰ç›¸åŒKeysçš„æ‰€æœ‰è®°å½•éƒ½åˆ†é…ç»™åŒä¸€åˆ†åŒºã€‚åœ¨å†…éƒ¨ï¼ŒkeyByï¼ˆï¼‰æ˜¯ä½¿ç”¨æ•£åˆ—åˆ†åŒºå®ç°çš„ã€‚æŒ‡å®šé”®æœ‰ä¸åŒçš„æ–¹æ³•ã€‚</p><p>æ­¤è½¬æ¢è¿”å›KeyedStreamï¼Œå…¶ä¸­åŒ…æ‹¬ä½¿ç”¨è¢«KeysåŒ–çŠ¶æ€æ‰€éœ€çš„KeyedStreamã€‚</p><pre><code>dataStream.keyBy("someKey") // Key by field "someKey"dataStream.keyBy(0) // Key by the first element of a Tuple</code></pre><p>ğŸŒºæ³¨æ„ï¼š</p><p>å¦‚æœå‡ºç°ä»¥ä¸‹æƒ…å†µï¼Œåˆ™ç±»å‹ä¸èƒ½æˆä¸ºkeyï¼š</p><ul><li><p>å®ƒæ˜¯POJOç±»å‹ä½†ä¸è¦†ç›–hashCodeï¼ˆï¼‰æ–¹æ³•å¹¶ä¾èµ–äºObject.hashCodeï¼ˆï¼‰å®ç°</p></li><li><p>ä»»ä½•ç±»å‹çš„æ•°ç»„</p></li></ul><h3 id="Reduce"><a href="#Reduce" class="headerlink" title="Reduce"></a>Reduce</h3><p>KeyedStreamâ†’DataStream</p><p>å°†å½“å‰æ•°æ®å…ƒä¸æœ€åä¸€ä¸ªReduceçš„å€¼ç»„åˆå¹¶å‘å‡ºæ–°å€¼ã€‚<br>ä¾‹å¦‚ï¼šreduceå‡½æ•°ï¼Œç”¨äºåˆ›å»ºéƒ¨åˆ†å’Œçš„æµï¼š</p><pre><code>keyedStream.reduce(new ReduceFunction&lt;Integer&gt;() {    @Override    public Integer reduce(Integer value1, Integer value2)    throws Exception {        return value1 + value2;    }});   </code></pre><h3 id="Fold"><a href="#Fold" class="headerlink" title="Fold"></a>Fold</h3><p>KeyedStreamâ†’DataStream</p><p>å…·æœ‰åˆå§‹å€¼çš„è¢«KeysåŒ–æ•°æ®æµä¸Šçš„â€œæ»šåŠ¨â€æŠ˜å ã€‚å°†å½“å‰æ•°æ®å…ƒä¸æœ€åæŠ˜å çš„å€¼ç»„åˆå¹¶å‘å‡ºæ–°å€¼ã€‚ </p><p>æŠ˜å å‡½æ•°ï¼Œå½“åº”ç”¨äºåºåˆ—ï¼ˆ1,2,3,4,5ï¼‰æ—¶ï¼Œå‘å‡ºåºåˆ—â€œstart-1â€ï¼Œâ€œstart-1-2â€ï¼Œâ€œstart-1-2-3â€,. ..</p><pre><code>DataStream&lt;String&gt; result =  keyedStream.fold("start", new FoldFunction&lt;Integer, String&gt;() {    @Override    public String fold(String current, Integer value) {        return current + "-" + value;    }  });</code></pre><h3 id="èšåˆ"><a href="#èšåˆ" class="headerlink" title="èšåˆ"></a>èšåˆ</h3><ul><li>KeyedStreamâ†’DataStream</li></ul><p>åœ¨è¢«KeysåŒ–æ•°æ®æµä¸Šæ»šåŠ¨èšåˆã€‚minå’ŒminByä¹‹é—´çš„å·®å¼‚æ˜¯minè¿”å›æœ€å°å€¼ï¼Œè€ŒminByè¿”å›è¯¥å­—æ®µä¸­å…·æœ‰æœ€å°å€¼çš„æ•°æ®å…ƒ(maxå’ŒmaxByç›¸åŒ)ã€‚</p><pre><code>keyedStream.sum(0);keyedStream.sum("key");keyedStream.min(0);keyedStream.min("key");keyedStream.max(0);keyedStream.max("key");keyedStream.minBy(0);keyedStream.minBy("key");keyedStream.maxBy(0);keyedStream.maxBy("key");</code></pre><h3 id="Windowå‡½æ•°"><a href="#Windowå‡½æ•°" class="headerlink" title="Windowå‡½æ•°"></a>Windowå‡½æ•°</h3><p>å…³äºFlinkçš„çª—å£æ¦‚å¿µï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢æœ‰è¯¦ç»†ä»‹ç»ã€‚</p><ul><li>Window<br>KeyedStreamâ†’WindowedStream</li></ul><p>å¯ä»¥åœ¨å·²ç»åˆ†åŒºçš„KeyedStreamä¸Šå®šä¹‰Windowsã€‚Windowsæ ¹æ®æŸäº›ç‰¹å¾ï¼ˆä¾‹å¦‚ï¼Œåœ¨æœ€å5ç§’å†…åˆ°è¾¾çš„æ•°æ®ï¼‰å¯¹æ¯ä¸ªKeysä¸­çš„æ•°æ®è¿›è¡Œåˆ†ç»„ã€‚</p><pre><code>dataStream.keyBy(0).window(TumblingEventTimeWindows.of(Time.seconds(5))); // Last 5 seconds of data</code></pre><ul><li>Window Apply<br>WindowedStreamâ†’DataStream<br>AllWindowedStreamâ†’DataStream</li></ul><p>å°†ä¸€èˆ¬å‡½æ•°åº”ç”¨äºæ•´ä¸ªçª—å£ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ‰‹åŠ¨æ±‚å’Œçª—å£æ•°æ®å…ƒçš„å‡½æ•°ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨windowAllè½¬æ¢ï¼Œåˆ™éœ€è¦ä½¿ç”¨AllWindowFunctionã€‚</p><pre><code>windowedStream.apply (new WindowFunction&lt;Tuple2&lt;String,Integer&gt;, Integer, Tuple, Window&gt;() {    public void apply (Tuple tuple,            Window window,            Iterable&lt;Tuple2&lt;String, Integer&gt;&gt; values,            Collector&lt;Integer&gt; out) throws Exception {        int sum = 0;        for (value t: values) {            sum += t.f1;        }        out.collect (new Integer(sum));    }});// applying an AllWindowFunction on non-keyed window streamallWindowedStream.apply (new AllWindowFunction&lt;Tuple2&lt;String,Integer&gt;, Integer, Window&gt;() {    public void apply (Window window,            Iterable&lt;Tuple2&lt;String, Integer&gt;&gt; values,            Collector&lt;Integer&gt; out) throws Exception {        int sum = 0;        for (value t: values) {            sum += t.f1;        }        out.collect (new Integer(sum));    }});</code></pre><ul><li>Window Reduce<br>WindowedStreamâ†’DataStream</li></ul><p>å°†reduceå‡½æ•°åº”ç”¨äºçª—å£å¹¶è¿”å›reduceåçš„å€¼ã€‚</p><pre><code>windowedStream.reduce (new ReduceFunction&lt;Tuple2&lt;String,Integer&gt;&gt;() {    public Tuple2&lt;String, Integer&gt; reduce(Tuple2&lt;String, Integer&gt; value1, Tuple2&lt;String, Integer&gt; value2) throws Exception {        return new Tuple2&lt;String,Integer&gt;(value1.f0, value1.f1 + value2.f1);    }});</code></pre><ul><li>æå–æ—¶é—´æˆ³<blockquote><p>å…³äºTimeæˆ‘ä»¬åœ¨åé¢æœ‰ä¸“é—¨çš„ç« èŠ‚è¿›è¡Œä»‹ç»</p></blockquote></li></ul><p>DataStreamâ†’DataStream</p><p>ä»è®°å½•ä¸­æå–æ—¶é—´æˆ³ï¼Œä»¥ä¾¿ä½¿ç”¨ä½¿ç”¨äº‹ä»¶æ—¶é—´è¯­ä¹‰çš„çª—å£ã€‚</p><pre><code>stream.assignTimestamps (new TimeStampExtractor() {...});</code></pre><h3 id="Partition-åˆ†åŒº"><a href="#Partition-åˆ†åŒº" class="headerlink" title="Partition åˆ†åŒº"></a>Partition åˆ†åŒº</h3><ul><li>è‡ªå®šä¹‰åˆ†åŒº<br>DataStreamâ†’DataStream<br>ä½¿ç”¨ç”¨æˆ·å®šä¹‰çš„åˆ†åŒºç¨‹åºä¸ºæ¯ä¸ªæ•°æ®å…ƒé€‰æ‹©ç›®æ ‡ä»»åŠ¡ã€‚</li></ul><pre><code>dataStream.partitionCustom(partitioner, "someKey");dataStream.partitionCustom(partitioner, 0);</code></pre><ul><li><p>éšæœºåˆ†åŒº<br>DataStreamâ†’DataStream<br>æ ¹æ®å‡åŒ€åˆ†å¸ƒéšæœºåˆ†é…æ•°æ®å…ƒã€‚</p><pre><code>dataStream.shuffle();</code></pre></li><li><p>Rebalance ï¼ˆå¾ªç¯åˆ†åŒºï¼‰<br>DataStreamâ†’DataStream<br>åˆ†åŒºæ•°æ®å…ƒå¾ªç¯ï¼Œæ¯ä¸ªåˆ†åŒºåˆ›å»ºç›¸ç­‰çš„è´Ÿè½½ã€‚åœ¨å­˜åœ¨æ•°æ®å€¾æ–œæ—¶ç”¨äºæ€§èƒ½ä¼˜åŒ–ã€‚</p><pre><code>dataStream.rebalance();</code></pre></li><li><p>rescale<br>DataStreamâ†’DataStream</p></li></ul><p>å¦‚æœä¸Šæ¸¸ ç®—å­æ“ä½œå…·æœ‰å¹¶è¡Œæ€§2å¹¶ä¸”ä¸‹æ¸¸ç®—å­æ“ä½œå…·æœ‰å¹¶è¡Œæ€§6ï¼Œåˆ™ä¸€ä¸ªä¸Šæ¸¸ ç®—å­æ“ä½œå°†åˆ†é…å…ƒä»¶åˆ°ä¸‰ä¸ªä¸‹æ¸¸ç®—å­æ“ä½œï¼Œè€Œå¦ä¸€ä¸ªä¸Šæ¸¸ç®—å­æ“ä½œå°†åˆ†é…åˆ°å…¶ä»–ä¸‰ä¸ªä¸‹æ¸¸ ç®—å­æ“ä½œã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä¸‹æ¸¸ç®—å­æ“ä½œå…·æœ‰å¹¶è¡Œæ€§2è€Œä¸Šæ¸¸ ç®—å­æ“ä½œå…·æœ‰å¹¶è¡Œæ€§6ï¼Œåˆ™ä¸‰ä¸ªä¸Šæ¸¸ ç®—å­æ“ä½œå°†åˆ†é…åˆ°ä¸€ä¸ªä¸‹æ¸¸ç®—å­æ“ä½œï¼Œè€Œå…¶ä»–ä¸‰ä¸ªä¸Šæ¸¸ç®—å­æ“ä½œå°†åˆ†é…åˆ°å¦ä¸€ä¸ªä¸‹æ¸¸ç®—å­æ“ä½œã€‚</p><p>åœ¨ä¸åŒå¹¶è¡Œåº¦ä¸æ˜¯å½¼æ­¤çš„å€æ•°çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªä¸‹æ¸¸ ç®—å­æ“ä½œå°†å…·æœ‰æ¥è‡ªä¸Šæ¸¸ ç®—å­æ“ä½œçš„ä¸åŒæ•°é‡çš„è¾“å…¥ã€‚</p><p>è¯·å‚é˜…æ­¤å›¾ä»¥è·å–ä¸Šä¾‹ä¸­è¿æ¥æ¨¡å¼çš„å¯è§†åŒ–ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="evernotecid://DF961740-2AB0-48AB-AAE7-53BB9D286C7A/appyinxiangcom/12131181/ENResource/p1410" alt="5bd63a6c99ad06ba3d96d03be3cb25ff.svg+xml"></p><pre><code>dataStream.rescale();</code></pre><ul><li>å¹¿æ’­<br>DataStreamâ†’DataStream<br>å‘æ¯ä¸ªåˆ†åŒºå¹¿æ’­æ•°æ®å…ƒã€‚<pre><code>dataStream.broadcast();</code></pre></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> äº’è”ç½‘ </tag>
            
            <tag> Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flinkä»å…¥é—¨åˆ°æ”¾å¼ƒ(å…¥é—¨ç¯‡2)-æœ¬åœ°ç¯å¢ƒæ­å»º&amp;æ„å»ºç¬¬ä¸€ä¸ªFlinkåº”ç”¨</title>
      <link href="/posts/d31f.html"/>
      <url>/posts/d31f.html</url>
      
        <content type="html"><![CDATA[<h2 id="æœ¬åœ°å®‰è£…å•æœºç‰ˆæœ¬Flink"><a href="#æœ¬åœ°å®‰è£…å•æœºç‰ˆæœ¬Flink" class="headerlink" title="æœ¬åœ°å®‰è£…å•æœºç‰ˆæœ¬Flink"></a>æœ¬åœ°å®‰è£…å•æœºç‰ˆæœ¬Flink</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œçº¿ä¸Šéƒ½æ˜¯é›†ç¾¤æ¨¡å¼ï¼Œé‚£ä¹ˆå•æœºæ¨¡å¼æ–¹ä¾¿æˆ‘ä»¬æµ‹è¯•å’Œå­¦ä¹ ã€‚</p><h3 id="ç¯å¢ƒè¦æ±‚"><a href="#ç¯å¢ƒè¦æ±‚" class="headerlink" title="ç¯å¢ƒè¦æ±‚"></a>ç¯å¢ƒè¦æ±‚</h3><p>æœ¬åœ°æœºå™¨ä¸Šéœ€è¦æœ‰ Java 8 å’Œ maven ç¯å¢ƒï¼Œæ¨èåœ¨linuxæˆ–è€…macä¸Šå¼€å‘Flinkåº”ç”¨ï¼š</p><p>å¦‚æœæœ‰ Java 8 ç¯å¢ƒï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ä¼šè¾“å‡ºå¦‚ä¸‹ç‰ˆæœ¬ä¿¡æ¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%872)-%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA&amp;%E6%9E%84%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAFlink%E5%BA%94%E7%94%A8.resources/34F234C6-C9D6-46AB-A864-652BE177B4CA.png" alt="510a825bb50a810b2f950590f894c5a9"></p><p>å¦‚æœæœ‰ maven ç¯å¢ƒï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ä¼šè¾“å‡ºå¦‚ä¸‹ç‰ˆæœ¬ä¿¡æ¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%872)-%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA&amp;%E6%9E%84%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAFlink%E5%BA%94%E7%94%A8.resources/1A1D2049-1042-43E1-BE0B-6D9FAA8224BE.png" alt="d466ed9d3338048745899c7db8150c5a"></p><p>å¼€å‘å·¥å…·æ¨èä½¿ç”¨ ItelliJ IDEAã€‚</p><h4 id="ç¬¬ä¸€ç§æ–¹å¼"><a href="#ç¬¬ä¸€ç§æ–¹å¼" class="headerlink" title="ç¬¬ä¸€ç§æ–¹å¼"></a>ç¬¬ä¸€ç§æ–¹å¼</h4><p>æ¥è¿™é‡Œ<a href="https://flink.apache.org/" target="_blank" rel="noopener">https://flink.apache.org/</a></p><p>çœ‹è¿™é‡Œï¼š<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%872)-%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA&amp;%E6%9E%84%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAFlink%E5%BA%94%E7%94%A8.resources/E0A8FC57-9184-4BE8-8D20-BDD91C3C44FD.png" alt="50d9244cad5d21c4fffca5c1af808977"></p><blockquote><p>æ³¨æ„ï¼š</p></blockquote><pre><code>An Apache Hadoop installation is not required to use Apache Flink. For users that use Flink without any Hadoop components, we recommend the release without bundled Hadoop libraries.</code></pre><p>è¿™æ˜¯å•¥æ„æ€ï¼Ÿ<br>è¿™ä¸ªæ„æ€å°±æ˜¯è¯´Flinkå¯ä»¥ä¸ä¾èµ–Hadoopç¯å¢ƒï¼Œå¦‚æœè¯´å•æœºç©çš„è¯ï¼Œä¸‹è½½ä¸€ä¸ª<code>only</code>ç‰ˆæœ¬å°±è¡Œäº†ã€‚</p><h4 id="ç¬¬äºŒç§æ–¹å¼-ä¸æ¨è"><a href="#ç¬¬äºŒç§æ–¹å¼-ä¸æ¨è" class="headerlink" title="ç¬¬äºŒç§æ–¹å¼(ä¸æ¨è)"></a>ç¬¬äºŒç§æ–¹å¼(ä¸æ¨è)</h4><pre><code>git clone https://github.com/apache/flink.git cd flinkmvn clean package -DskipTests  </code></pre><p>ç„¶åè¿›å…¥ç¼–è¯‘å¥½çš„Flinkä¸­å»æ‰§è¡Œ <code>bin/start-cluster.sh</code></p><h3 id="å…¶ä»–ä¹±ä¸ƒå…«ç³Ÿçš„å®‰è£…åŠæ³•"><a href="#å…¶ä»–ä¹±ä¸ƒå…«ç³Ÿçš„å®‰è£…åŠæ³•" class="headerlink" title="å…¶ä»–ä¹±ä¸ƒå…«ç³Ÿçš„å®‰è£…åŠæ³•"></a>å…¶ä»–ä¹±ä¸ƒå…«ç³Ÿçš„å®‰è£…åŠæ³•</h3><p>æ¯”å¦‚ Macç”¨æˆ·å¯ä»¥ç”¨<code>brew install apache-flink</code> ,å‰ææ˜¯å®‰è£…è¿‡ <code>brew</code>è¿™ä¸ªmacä¸‹çš„å·¥å…·.</p><h2 id="å¯åŠ¨Flink"><a href="#å¯åŠ¨Flink" class="headerlink" title="å¯åŠ¨Flink"></a>å¯åŠ¨Flink</h2><p>æˆ‘ä»¬å…ˆåˆ°Flinkçš„ç›®å½•ä¸‹æ¥ï¼š<br>å¦‚ä¸‹ï¼š</p><pre><code>$ flink-1.7.1 pwd/Users/wangzhiwu/Downloads/flink-1.7.1</code></pre><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%872)-%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA&amp;%E6%9E%84%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAFlink%E5%BA%94%E7%94%A8.resources/BE68C066-BD15-4FAF-B649-82D9B26F255D.png" alt="19d1b2fb4d6b1fb3bff67522a239f2ca"></p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%872)-%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA&amp;%E6%9E%84%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAFlink%E5%BA%94%E7%94%A8.resources/C88AEAF7-42B7-4AD1-A793-3E89EBE751E2.png" alt="a596b49f69bd4fcd8058bfc7800d5cc0"></p><p>æ¥ç€å°±å¯ä»¥è¿›å…¥ web é¡µé¢(<a href="http://localhost:8081/" target="_blank" rel="noopener">http://localhost:8081/</a>) æŸ¥çœ‹</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%872)-%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA&amp;%E6%9E%84%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAFlink%E5%BA%94%E7%94%A8.resources/DAEECBBB-0FB7-4D4E-B338-B3181C23B6CB.png" alt="cd63db57b32a8862c5e0d2e8152f83ec"></p><p>æ­å–œä½ ï¼Œä¸€ä¸ªå•æœºç‰ˆçš„flinkå°±è·‘èµ·æ¥äº†ã€‚</p><h2 id="æ„å»ºä¸€ä¸ªåº”ç”¨"><a href="#æ„å»ºä¸€ä¸ªåº”ç”¨" class="headerlink" title="æ„å»ºä¸€ä¸ªåº”ç”¨"></a>æ„å»ºä¸€ä¸ªåº”ç”¨</h2><p>å½“ç„¶äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨mavenï¼Œä¸€é¡¿newï¼Œnewå‡ºæ¥ä¸€ä¸ªè¿‡ç¨‹ï¼Œè¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨ Flink Maven Archetype æ¥åˆ›å»ºæˆ‘ä»¬çš„é¡¹ç›®ç»“æ„å’Œä¸€äº›åˆå§‹çš„é»˜è®¤ä¾èµ–ã€‚åœ¨ä½ çš„å·¥ä½œç›®å½•ä¸‹ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤æ¥åˆ›å»ºé¡¹ç›®ï¼š</p><pre><code>mvn archetype:generate \    -DarchetypeGroupId=org.apache.flink \    -DarchetypeArtifactId=flink-quickstart-java \    -DarchetypeVersion=1.7.2 \    -DgroupId=flink-project \    -DartifactId=flink-project \    -Dversion=0.1 \    -Dpackage=myflink \    -DinteractiveMode=false</code></pre><p>è¿™æ ·ä¸€ä¸ªå·¥ç¨‹å°±æ„å»ºå¥½äº†ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªæ›´åŠ ç‰›é€¼çš„åŠæ³•ï¼Œçœ‹è¿™é‡Œï¼š</p><pre><code>curl https://flink.apache.org/q/quickstart.sh | bash</code></pre><p>ç›´æ¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œç»“æœå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%872)-%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA&amp;%E6%9E%84%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAFlink%E5%BA%94%E7%94%A8.resources/A78DC26C-BD00-44A9-9481-FE67B9BAE9CF.png" alt="92b875adb611a4ce657c7535c19fd8b1"></p><p>åŒæ ·å¯ä»¥æ„å»ºä¸€ä¸ªFlinkå·¥ç¨‹ï¼Œè€Œä¸”è‡ªå¸¦ä¸€äº›demoã€‚</p><p>åŸç†æ˜¯ä»€ä¹ˆï¼Ÿç‚¹ä¸€ä¸‹å®ƒçœ‹çœ‹å°±æ˜ç™½äº†ã€‚<br><a href="https://flink.apache.org/q/quickstart.sh" target="_blank" rel="noopener">https://flink.apache.org/q/quickstart.sh</a></p><h2 id="ç¼–å†™ä¸€ä¸ªå…¥é—¨çº§çš„WordCount"><a href="#ç¼–å†™ä¸€ä¸ªå…¥é—¨çº§çš„WordCount" class="headerlink" title="ç¼–å†™ä¸€ä¸ªå…¥é—¨çº§çš„WordCount"></a>ç¼–å†™ä¸€ä¸ªå…¥é—¨çº§çš„WordCount</h2><pre class="line-numbers language-public"><code class="language-public">    //    //    Program    //    public static void main(String[] args) throws Exception {        // set up the execution environment        final ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();        // get input data        DataSet<String> text = env.fromElements(                "To be, or not to be,--that is the question:--",                "Whether 'tis nobler in the mind to suffer",                "The slings and arrows of outrageous fortune",                "Or to take arms against a sea of troubles,"                );        DataSet<Tuple2<String, Integer>> counts =                // split up the lines in pairs (2-tuples) containing: (word,1)                text.flatMap(new LineSplitter())                // group by the tuple field "0" and sum up tuple field "1"                .groupBy(0) //(i,1) (am,1) (chinese,1)                .sum(1);        // execute and print result        counts.print();    }    //    //     User Functions    //    /**     * Implements the string tokenizer that splits sentences into words as a user-defined     * FlatMapFunction. The function takes a line (String) and splits it into     * multiple pairs in the form of "(word,1)" (Tuple2&lt;String, Integer&gt;).     */    public static final class LineSplitter implements FlatMapFunction<String, Tuple2<String, Integer>> {        @Override        public void flatMap(String value, Collector<Tuple2<String, Integer>> out) {            // normalize and split the line            String[] tokens = value.toLowerCase().split("\\W+");            // emit the pairs            for (String token : tokens) {                if (token.length() > 0) {                    out.collect(new Tuple2<String, Integer>(token, 1));                }            }        }    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç±»ä¼¼çš„ä¾‹å­ï¼Œå®˜æ–¹ä¹Ÿæœ‰æä¾›çš„ï¼Œå¯ä»¥åœ¨è¿™é‡Œä¸‹è½½ï¼š<br><a href="https://github.com/apache/flink/blob/master/flink-examples/flink-examples-batch/src/main/java/org/apache/flink/examples/java/wordcount/WordCount.java" target="_blank" rel="noopener">WordCountå®˜æ–¹æ¨è</a></p><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><p>æœ¬åœ°å³é”®è¿è¡Œï¼š<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%872)-%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA&amp;%E6%9E%84%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAFlink%E5%BA%94%E7%94%A8.resources/8F0D8EF2-5C0B-4067-AA87-31D7A0DC16C7.png" alt="f642c8bf60959ab7c9544bff44882121"></p><p>æäº¤åˆ°æœ¬åœ°å•æœºFlinkä¸Š</p><ul><li>è¿›å…¥å·¥ç¨‹ç›®å½•ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰“åŒ…<pre><code>mvn clean package -Dmaven.test.skip=true</code></pre>ç„¶åï¼Œè¿›å…¥ flink å®‰è£…ç›®å½• bin ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æäº¤ç¨‹åºï¼š<pre><code>flink run -c org.myorg.laowang.WordCount /Users/wangzhiwu/WorkSpace/quickstart/target/quickstart-0.1.jar</code></pre>åˆ†åˆ«åˆ¶å®šmainæ–¹æ³•å’ŒjaråŒ…çš„åœ°å€ã€‚</li></ul><p>åœ¨åˆšæ‰çš„æ§åˆ¶å°ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼š<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%872)-%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA&amp;%E6%9E%84%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAFlink%E5%BA%94%E7%94%A8.resources/EB619900-BBDE-4E32-9089-0DC867FF9220.png" alt="ffabc914659360af98a6a359c704281a"><br>æˆ‘ä»¬åˆšæ‰æäº¤è¿‡çš„ç¨‹åºã€‚</p><p>flinkçš„logç›®å½•ä¸‹æœ‰æˆ‘ä»¬æäº¤è¿‡çš„ä»»åŠ¡çš„æ—¥å¿—ï¼š<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%872)-%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA&amp;%E6%9E%84%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAFlink%E5%BA%94%E7%94%A8.resources/620369FB-ABCA-4184-AA90-C7FEDB114B07.png" alt="857dd4a1b3017866327e73acd46b86f5"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸€æ¬¡ç®€å•çš„flinkä¹‹æ—…å°±å®Œæˆäº†ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> äº’è”ç½‘ </tag>
            
            <tag> Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flinkä»å…¥é—¨åˆ°æ”¾å¼ƒ(å…¥é—¨ç¯‡1)-Flinkæ˜¯ä»€ä¹ˆ?</title>
      <link href="/posts/6c2c.html"/>
      <url>/posts/6c2c.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡æ˜¯ä¾‹è¡Œä»‹ç»ï¼Œç†Ÿæ‚‰çš„ç›´æ¥è·³è¿‡ </p></blockquote><h1 id="å¤§çº²"><a href="#å¤§çº²" class="headerlink" title="å¤§çº²"></a>å¤§çº²</h1><p><strong>å…¥é—¨ç¯‡ï¼š</strong><br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%871)-Flink%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.resources/1.png" alt="8bf609799f0f1265e71fa5bd0d498c45"></p><p><strong>æ”¾å¼ƒç¯‡ï¼š</strong><br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%871)-Flink%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.resources/A44BE2B6-FBC9-4143-9743-F097B9C0FDD6.png" alt="563c79efb6518f991c732f1d95f97a62"></p><h2 id="Flinkæ˜¯ä»€ä¹ˆ"><a href="#Flinkæ˜¯ä»€ä¹ˆ" class="headerlink" title="Flinkæ˜¯ä»€ä¹ˆ"></a>Flinkæ˜¯ä»€ä¹ˆ</h2><h2 id="ä¸€å¥è¯æ¦‚æ‹¬"><a href="#ä¸€å¥è¯æ¦‚æ‹¬" class="headerlink" title="ä¸€å¥è¯æ¦‚æ‹¬"></a>ä¸€å¥è¯æ¦‚æ‹¬</h2><p>Apache Flinkæ˜¯ä¸€ä¸ªé¢å‘åˆ†å¸ƒå¼æ•°æ®æµå¤„ç†å’Œæ‰¹é‡æ•°æ®å¤„ç†çš„å¼€æºè®¡ç®—å¹³å°ï¼Œæä¾›æ”¯æŒæµå¤„ç†å’Œæ‰¹å¤„ç†ä¸¤ç§ç±»å‹åº”ç”¨çš„åŠŸèƒ½ã€‚</p><h2 id="å‰èº«"><a href="#å‰èº«" class="headerlink" title="å‰èº«"></a>å‰èº«</h2><p>Apache Flink çš„å‰èº«æ˜¯æŸæ—ç†å·¥å¤§å­¦ä¸€ä¸ªç ”ç©¶æ€§é¡¹ç›®ï¼Œ åœ¨ 2014 è¢« Apache å­µåŒ–å™¨æ‰€æ¥å—ï¼Œç„¶åè¿…é€Ÿåœ°æˆä¸ºäº†Apache Software Foundationçš„é¡¶çº§é¡¹ç›®ä¹‹ä¸€ã€‚</p><h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><p>ç°æœ‰çš„å¼€æºè®¡ç®—æ–¹æ¡ˆï¼Œä¼šæŠŠæµå¤„ç†å’Œæ‰¹å¤„ç†ä½œä¸ºä¸¤ç§ä¸åŒçš„åº”ç”¨ç±»å‹ï¼šæµå¤„ç†ä¸€èˆ¬éœ€è¦æ”¯æŒä½å»¶è¿Ÿã€Exactly-onceä¿è¯ï¼Œè€Œæ‰¹å¤„ç†éœ€è¦æ”¯æŒé«˜ååã€é«˜æ•ˆå¤„ç†ã€‚<br>Flinkæ˜¯å®Œå…¨æ”¯æŒæµå¤„ç†ï¼Œä¹Ÿå°±æ˜¯è¯´ä½œä¸ºæµå¤„ç†çœ‹å¾…æ—¶è¾“å…¥æ•°æ®æµæ˜¯æ— ç•Œçš„ï¼›æ‰¹å¤„ç†è¢«ä½œä¸ºä¸€ç§ç‰¹æ®Šçš„æµå¤„ç†ï¼Œåªæ˜¯å®ƒçš„è¾“å…¥æ•°æ®æµè¢«å®šä¹‰ä¸ºæœ‰ç•Œçš„ã€‚</p><h2 id="Flinkç»„ä»¶æ ˆ"><a href="#Flinkç»„ä»¶æ ˆ" class="headerlink" title="Flinkç»„ä»¶æ ˆ"></a>Flinkç»„ä»¶æ ˆ</h2><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%871)-Flink%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.resources/6F963775-B91B-447F-959E-38B4029BE56D.png" alt="102b82e4ca65fa679cee53c017d830aa"></p><h3 id="Deploymentå±‚"><a href="#Deploymentå±‚" class="headerlink" title="Deploymentå±‚"></a>Deploymentå±‚</h3><p>ä¸»è¦æ¶‰åŠäº†Flinkçš„éƒ¨ç½²æ¨¡å¼ï¼ŒFlinkæ”¯æŒå¤šç§éƒ¨ç½²æ¨¡å¼ï¼šæœ¬åœ°ã€é›†ç¾¤ï¼ˆStandalone/YARNï¼‰ã€äº‘ï¼ˆGCE/EC2ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%871)-Flink%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.resources/F7406066-68CA-4BE7-9743-7FD65A0D722C.png" alt="cd3ae86f9ae0764f77af85696114d79b"></p><h3 id="Runtimeå±‚"><a href="#Runtimeå±‚" class="headerlink" title="Runtimeå±‚"></a>Runtimeå±‚</h3><p>Runtimeå±‚æä¾›äº†æ”¯æŒFlinkè®¡ç®—çš„å…¨éƒ¨æ ¸å¿ƒå®ç°ï¼Œæ¯”å¦‚ï¼šæ”¯æŒåˆ†å¸ƒå¼Streamå¤„ç†ã€JobGraphåˆ°ExecutionGraphçš„æ˜ å°„ã€è°ƒåº¦ç­‰ç­‰ï¼Œä¸ºä¸Šå±‚APIå±‚æä¾›åŸºç¡€æœåŠ¡</p><h3 id="APIå±‚"><a href="#APIå±‚" class="headerlink" title="APIå±‚"></a>APIå±‚</h3><p>APIå±‚ä¸»è¦å®ç°äº†é¢å‘æ— ç•ŒStreamçš„æµå¤„ç†å’Œé¢å‘Batchçš„æ‰¹å¤„ç†APIï¼Œå…¶ä¸­é¢å‘æµå¤„ç†å¯¹åº”DataStream APIï¼Œé¢å‘æ‰¹å¤„ç†å¯¹åº”DataSet API </p><h3 id="Libarieså±‚"><a href="#Libarieså±‚" class="headerlink" title="Libarieså±‚"></a>Libarieså±‚</h3><ul><li><p>åœ¨APIå±‚ä¹‹ä¸Šæ„å»ºçš„æ»¡è¶³ç‰¹å®šåº”ç”¨çš„å®ç°è®¡ç®—æ¡†æ¶ï¼Œä¹Ÿåˆ†åˆ«å¯¹åº”äºé¢å‘æµå¤„ç†å’Œé¢å‘æ‰¹å¤„ç†ä¸¤ç±»</p></li><li><p>é¢å‘æµå¤„ç†æ”¯æŒï¼šCEPï¼ˆå¤æ‚äº‹ä»¶å¤„ç†ï¼‰ã€åŸºäºSQL-likeçš„æ“ä½œï¼ˆåŸºäºTableçš„å…³ç³»æ“ä½œï¼‰</p></li><li><p>é¢å‘æ‰¹å¤„ç†æ”¯æŒï¼šFlinkMLï¼ˆæœºå™¨å­¦ä¹ åº“ï¼‰ã€Gellyï¼ˆå›¾å¤„ç†ï¼‰</p></li></ul><h2 id="Flinkçš„ä¼˜åŠ¿"><a href="#Flinkçš„ä¼˜åŠ¿" class="headerlink" title="Flinkçš„ä¼˜åŠ¿"></a>Flinkçš„ä¼˜åŠ¿</h2><ul><li>æ”¯æŒé«˜ååã€ä½å»¶è¿Ÿã€é«˜æ€§èƒ½çš„æµå¤„ç†</li><li>æ”¯æŒé«˜åº¦çµæ´»çš„çª—å£ï¼ˆWindowï¼‰æ“ä½œ</li><li>æ”¯æŒæœ‰çŠ¶æ€è®¡ç®—çš„Exactly-onceè¯­ä¹‰</li><li>æä¾›DataStream APIå’ŒDataSet API</li></ul><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%871)-Flink%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.resources/3DE5BD22-BFE2-49C4-8DA8-C42EAD1948FB.png" alt="d698791fc0eee2b74bfb9af430206705"></p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%871)-Flink%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.resources/0E6F6341-5EB0-40FD-9953-70C3F0904043.png" alt="f49a3e84af366184696c6c6800d84a50"></p><h2 id="FlinkåŸºæœ¬ç¼–ç¨‹æ¨¡å‹"><a href="#FlinkåŸºæœ¬ç¼–ç¨‹æ¨¡å‹" class="headerlink" title="FlinkåŸºæœ¬ç¼–ç¨‹æ¨¡å‹"></a>FlinkåŸºæœ¬ç¼–ç¨‹æ¨¡å‹</h2><blockquote><ul><li>Flinkç¨‹åºçš„åŸºç¡€æ„å»ºæ¨¡å—æ˜¯æµ(streams) ä¸ è½¬æ¢(transformations)</li><li>æ¯ä¸€ä¸ªæ•°æ®æµèµ·å§‹äºä¸€ä¸ªæˆ–å¤šä¸ª sourceï¼Œå¹¶ç»ˆæ­¢äºä¸€ä¸ªæˆ–å¤šä¸ª sink</li></ul></blockquote><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç”±Flinkç¨‹åºæ˜ å°„ä¸ºStreaming Dataflowçš„ç¤ºæ„å›¾:</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%871)-Flink%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.resources/656C0986-42A7-4E76-B3CA-C0372395E451.png" alt="1cee64d1b99673231aa5315d579d5182"></p><p>å¹¶è¡Œæ•°æ®æµç¤ºæ„å›¾:<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%871)-Flink%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.resources/E6A4AF88-12D9-413A-A318-06A86ABDC1AF.png" alt="b51a95236221451ab1958f8aefc5af62"></p><h2 id="FlinkåŸºæœ¬æ¶æ„"><a href="#FlinkåŸºæœ¬æ¶æ„" class="headerlink" title="FlinkåŸºæœ¬æ¶æ„"></a>FlinkåŸºæœ¬æ¶æ„</h2><blockquote><ul><li>Flinkæ˜¯åŸºäºMaster-Slaveé£æ ¼çš„æ¶æ„</li><li>Flinké›†ç¾¤å¯åŠ¨æ—¶ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªJobManagerè¿›ç¨‹ã€è‡³å°‘ä¸€ä¸ªTaskManagerè¿›ç¨‹</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Flink%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83(%E5%85%A5%E9%97%A8%E7%AF%871)-Flink%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.resources/866EF50B-A9ED-461A-AC13-78BEBBDCCFC9.png" alt="7c947040b492ea28cd48252a0f1427a7"></p><h3 id="JobManager"><a href="#JobManager" class="headerlink" title="JobManager"></a>JobManager</h3><ul><li><p>Flinkç³»ç»Ÿçš„åè°ƒè€…ï¼Œå®ƒè´Ÿè´£æ¥æ”¶Flink Jobï¼Œè°ƒåº¦ç»„æˆJobçš„å¤šä¸ªTaskçš„æ‰§è¡Œ</p></li><li><p>æ”¶é›†Jobçš„çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶ç®¡ç†Flinké›†ç¾¤ä¸­ä»èŠ‚ç‚¹TaskManager</p></li></ul><h3 id="TaskManager"><a href="#TaskManager" class="headerlink" title="TaskManager"></a>TaskManager</h3><ul><li>å®é™…è´Ÿè´£æ‰§è¡Œè®¡ç®—çš„Workerï¼Œåœ¨å…¶ä¸Šæ‰§è¡ŒFlink Jobçš„ä¸€ç»„Task</li><li>TaskManagerè´Ÿè´£ç®¡ç†å…¶æ‰€åœ¨èŠ‚ç‚¹ä¸Šçš„èµ„æºä¿¡æ¯ï¼Œå¦‚å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œï¼Œåœ¨å¯åŠ¨çš„æ—¶å€™å°†èµ„æºçš„çŠ¶æ€å‘JobManageræ±‡æŠ¥</li></ul><h3 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h3><ul><li><p>ç”¨æˆ·æäº¤ä¸€ä¸ªFlinkç¨‹åºæ—¶ï¼Œä¼šé¦–å…ˆåˆ›å»ºä¸€ä¸ªClientï¼Œè¯¥Clienté¦–å…ˆä¼šå¯¹ç”¨æˆ·æäº¤çš„Flinkç¨‹åºè¿›è¡Œé¢„å¤„ç†ï¼Œå¹¶æäº¤åˆ°Flinké›†ç¾¤</p></li><li><p>Clientä¼šå°†ç”¨æˆ·æäº¤çš„Flinkç¨‹åºç»„è£…ä¸€ä¸ªJobGraphï¼Œ å¹¶ä¸”æ˜¯ä»¥JobGraphçš„å½¢å¼æäº¤çš„</p></li></ul><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>æœ¬æ–‡æ˜¯ä¾‹è¡Œä»‹ç»ï¼Œç†Ÿæ‚‰çš„ç›´æ¥è·³è¿‡ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> äº’è”ç½‘ </tag>
            
            <tag> Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sparkçš„shuffleä»‹ç»</title>
      <link href="/posts/d31f.html"/>
      <url>/posts/d31f.html</url>
      
        <content type="html"><![CDATA[<h2 id="sparkçš„shuffleä»‹ç»"><a href="#sparkçš„shuffleä»‹ç»" class="headerlink" title="sparkçš„shuffleä»‹ç»"></a>sparkçš„shuffleä»‹ç»</h2><p><strong>sparkä¸­çš„shuffleä¸»è¦æœ‰3ç§:</strong></p><ul><li><p><strong>Hash Shuffle</strong> 2.0ä»¥åç§»é™¤</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/spark-shuffle-v1.png" alt=""></p><p>åœ¨mapé˜¶æ®µ(shuffle write)ï¼Œæ¯ä¸ªmapéƒ½ä¼šä¸ºä¸‹æ¸¸stageçš„æ¯ä¸ªpartitionå†™ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå‡å¦‚ä¸‹æ¸¸stageæœ‰1000ä¸ªpartitionï¼Œé‚£ä¹ˆæ¯ä¸ªmapéƒ½ä¼šç”Ÿæˆ1000ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œä¸€èˆ¬æ¥è¯´ä¸€ä¸ªexecutorä¸Šä¼šè¿è¡Œå¤šä¸ªmap taskï¼Œè¿™æ ·ä¸‹æ¥ï¼Œä¸€ä¸ªexecutorä¸Šä¼šæœ‰éå¸¸å¤šçš„ä¸´æ—¶æ–‡ä»¶ï¼Œå‡å¦‚ä¸€ä¸ªexecutorä¸Šè¿è¡ŒMä¸ªmap taskï¼Œä¸‹æ¸¸stageæœ‰Nä¸ªpartitionï¼Œé‚£ä¹ˆä¸€ä¸ªexecutorä¸Šä¼šç”ŸæˆM<em>Nä¸ªæ–‡ä»¶ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä¸€ä¸ªexecutorä¸Šæœ‰Kä¸ªcoreï¼Œé‚£ä¹ˆexecutoråŒæ—¶å¯è¿è¡ŒKä¸ªtaskï¼Œè¿™æ ·ä¸€æ¥ï¼Œå°±ä¼šåŒæ—¶ç”³è¯·K</em>Nä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä¸€æ—¦partitionæ•°è¾ƒå¤šï¼ŒåŠ¿å¿…ä¼šè€—å°½executorä¸Šçš„æ–‡ä»¶æè¿°ç¬¦ï¼ŒåŒæ—¶ç”ŸæˆK*Nä¸ªwrite handlerä¹Ÿä¼šå¸¦æ¥å¤§é‡å†…å­˜çš„æ¶ˆè€—ã€‚</p><p>åœ¨reduceé˜¶æ®µ(shuffle read)ï¼Œæ¯ä¸ªreduce taskéƒ½ä¼šæ‹‰å–æ‰€æœ‰mapå¯¹åº”çš„é‚£éƒ¨åˆ†partitionæ•°æ®ï¼Œé‚£ä¹ˆexecutorä¼šæ‰“å¼€æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶å‡†å¤‡ç½‘ç»œä¼ è¾“ï¼Œè¿™é‡Œåˆæ¶‰åŠåˆ°å¤§é‡æ–‡ä»¶æè¿°ç¬¦ï¼Œå¦å¤–ï¼Œå¦‚æœreduceé˜¶æ®µæœ‰combineræ“ä½œï¼Œé‚£ä¹ˆå®ƒä¼šæŠŠç½‘ç»œä¸­æ‹‰åˆ°çš„æ•°æ®ä¿å­˜åœ¨ä¸€ä¸ª<code>HashMap</code>ä¸­è¿›è¡Œåˆå¹¶æ“ä½œï¼Œå¦‚æœæ•°æ®é‡è¾ƒå¤§ï¼Œå¾ˆå®¹æ˜“å¼•å‘OOMæ“ä½œã€‚</p></li><li><p><strong>Sort Shuffle</strong> 1.1å¼€å§‹(sort shuffleä¹Ÿç»å†è¿‡ä¼˜åŒ–å‡çº§,è¯¦ç»†è§å‚è€ƒæ–‡ç« 1)</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/spark-shuffle-v3.png" alt=""></p><p>åœ¨mapé˜¶æ®µ(shuffle write)ï¼Œä¼šæŒ‰ç…§partition idä»¥åŠkeyå¯¹è®°å½•è¿›è¡Œæ’åºï¼Œå°†æ‰€æœ‰partitionçš„æ•°æ®å†™åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶ä¸­çš„è®°å½•é¦–å…ˆæ˜¯æŒ‰ç…§partition idæ’åºä¸€ä¸ªä¸€ä¸ªåˆ†åŒºçš„é¡ºåºæ’åˆ—ï¼Œæ¯ä¸ªpartitionå†…éƒ¨æ˜¯æŒ‰ç…§keyè¿›è¡Œæ’åºå­˜æ”¾ï¼Œmap taskè¿è¡ŒæœŸé—´ä¼šé¡ºåºå†™æ¯ä¸ªpartitionçš„æ•°æ®ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªç´¢å¼•æ–‡ä»¶è®°å½•æ¯ä¸ªpartitionçš„å¤§å°å’Œåç§»é‡ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ¯ä¸ªmap taskä¸€æ¬¡åªå¼€ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä¸€ä¸ªå†™æ•°æ®ï¼Œä¸€ä¸ªå†™ç´¢å¼•ï¼Œå¤§å¤§å‡è½»äº†Hash Shuffleå¤§é‡æ–‡ä»¶æè¿°ç¬¦çš„é—®é¢˜ï¼Œå³ä½¿ä¸€ä¸ªexecutoræœ‰Kä¸ªcoreï¼Œé‚£ä¹ˆæœ€å¤šä¸€æ¬¡æ€§å¼€K*2ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚</p><p>åœ¨reduceé˜¶æ®µ(shuffle read)ï¼Œreduce taskæ‹‰å–æ•°æ®åšcombineæ—¶ä¸å†æ˜¯é‡‡ç”¨<code>HashMap</code>ï¼Œè€Œæ˜¯é‡‡ç”¨<code>ExternalAppendOnlyMap</code>ï¼Œè¯¥æ•°æ®ç»“æ„åœ¨åšcombineæ—¶ï¼Œå¦‚æœå†…å­˜ä¸è¶³ï¼Œä¼šåˆ·å†™ç£ç›˜ï¼Œå¾ˆå¤§ç¨‹åº¦çš„ä¿è¯äº†é²æ£’æ€§ï¼Œé¿å…å¤§æ•°æ®æƒ…å†µä¸‹çš„OOMã€‚</p></li><li><p><strong>Unsafe Shuffle</strong> 1.5å¼€å§‹, 1.6ä¸Sort shuffleåˆå¹¶</p><p>ä»spark 1.5.0å¼€å§‹ï¼Œsparkå¼€å§‹äº†é’¨ä¸è®¡åˆ’(Tungsten)ï¼Œç›®çš„æ˜¯ä¼˜åŒ–å†…å­˜å’ŒCPUçš„ä½¿ç”¨ï¼Œè¿›ä¸€æ­¥æå‡sparkçš„æ€§èƒ½ã€‚ä¸ºæ­¤ï¼Œå¼•å…¥Unsafe Shuffleï¼Œå®ƒçš„åšæ³•æ˜¯å°†æ•°æ®è®°å½•ç”¨äºŒè¿›åˆ¶çš„æ–¹å¼å­˜å‚¨ï¼Œç›´æ¥åœ¨åºåˆ—åŒ–çš„äºŒè¿›åˆ¶æ•°æ®ä¸Šsortè€Œä¸æ˜¯åœ¨java å¯¹è±¡ä¸Šï¼Œè¿™æ ·ä¸€æ–¹é¢å¯ä»¥å‡å°‘memoryçš„ä½¿ç”¨å’ŒGCçš„å¼€é”€ï¼Œå¦ä¸€æ–¹é¢é¿å…shuffleè¿‡ç¨‹ä¸­é¢‘ç¹çš„åºåˆ—åŒ–ä»¥åŠååºåˆ—åŒ–ã€‚åœ¨æ’åºè¿‡ç¨‹ä¸­ï¼Œå®ƒæä¾›cache-efficient sorterï¼Œä½¿ç”¨ä¸€ä¸ª8 bytesçš„æŒ‡é’ˆï¼ŒæŠŠæ’åºè½¬åŒ–æˆäº†ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„çš„æ’åºï¼Œæå¤§çš„ä¼˜åŒ–äº†æ’åºæ€§èƒ½.</p></li></ul><hr><p><strong>ç°åœ¨2.1 åˆ†ä¸ºä¸‰ç§writerï¼Œ åˆ†ä¸º BypassMergeSortShuffleWriterï¼Œ SortShuffleWriter å’Œ UnsafeShuffleWriter</strong></p><h4 id="ä¸‰ç§Writerçš„åˆ†ç±»"><a href="#ä¸‰ç§Writerçš„åˆ†ç±»" class="headerlink" title="ä¸‰ç§Writerçš„åˆ†ç±»"></a>ä¸‰ç§Writerçš„åˆ†ç±»</h4><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/sparkShuffleWriter.jpg" alt=""></p><p>ä¸Šé¢æ˜¯ä½¿ç”¨å“ªç§ writer çš„åˆ¤æ–­ä¾æ®ï¼Œ æ˜¯å¦å¼€å¯ mapSideCombine è¿™ä¸ªåˆ¤æ–­ï¼Œæ˜¯å› ä¸ºæœ‰äº›ç®—å­ä¼šåœ¨ map ç«¯å…ˆè¿›è¡Œä¸€æ¬¡ combineï¼Œ å‡å°‘ä¼ è¾“æ•°æ®ã€‚ å› ä¸º BypassMergeSortShuffleWriter ä¼šä¸´æ—¶è¾“å‡ºReducerä¸ªï¼ˆåˆ†åŒºæ•°ç›®ï¼‰å°æ–‡ä»¶ï¼Œæ‰€ä»¥åˆ†åŒºæ•°å¿…é¡»è¦å°äºä¸€ä¸ªé˜€å€¼ï¼Œé»˜è®¤æ˜¯å°äº200</p><p>UnsafeShuffleWriteréœ€è¦Serializeræ”¯æŒrelocationï¼ŒSerializeræ”¯æŒrelocationï¼šåŸå§‹æ•°æ®é¦–å…ˆè¢«åºåˆ—åŒ–å¤„ç†ï¼Œå¹¶ä¸”å†ä¹Ÿä¸éœ€è¦ååºåˆ—ï¼Œåœ¨å…¶å¯¹åº”çš„å…ƒæ•°æ®è¢«æ’åºåï¼Œéœ€è¦Serializeræ”¯æŒrelocationï¼Œåœ¨æŒ‡å®šä½ç½®è¯»å–å¯¹åº”æ•°æ®</p><p><a href="http://sharkdtu.com/posts/spark-shuffle.html" target="_blank" rel="noopener">å‚è€ƒæ–‡ç« 1</a></p><p><a href="http://spark.coolplayer.net/?p=576" target="_blank" rel="noopener">å‚è€ƒæ–‡ç« 2</a></p><p><strong>æŒç»­æ›´æ–°ä¸­â€¦ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æ¬¢è¿è”ç³»æˆ‘ï¼Œåœ¨æ–‡ç« æœ€åè¯„è®ºåŒºã€ç•™è¨€å’Œè®¨è®ºã€‘ï¼Œå½“ç„¶ï¼Œæ¬¢è¿ç‚¹å‡»æ–‡ç« æœ€åçš„æ‰“èµæŒ‰é”®ï¼Œè¯·åšä¸»ä¸€æ¯å†°é˜”ä¹ï¼Œç¬‘ï½</strong></p><table>  <tbody><tr>    <td><img width="100" src="https://hualei.online/medias/reward/alipay.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/wechat.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/zan.png"></td>     </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> äº’è”ç½‘ </tag>
            
            <tag> Spark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MapReduceç¼–ç¨‹æ¨¡å‹å’Œè®¡ç®—æ¡†æ¶æ¶æ„åŸç†</title>
      <link href="/posts/9c96.html"/>
      <url>/posts/9c96.html</url>
      
        <content type="html"><![CDATA[<p>Hadoopè§£å†³å¤§è§„æ¨¡æ•°æ®åˆ†å¸ƒå¼è®¡ç®—çš„æ–¹æ¡ˆæ˜¯MapReduceã€‚MapReduceæ—¢æ˜¯ä¸€ä¸ªç¼–ç¨‹æ¨¡å‹ï¼Œåˆæ˜¯ä¸€ä¸ªè®¡ç®—æ¡†æ¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¼€å‘äººå‘˜å¿…é¡»åŸºäºMapReduceç¼–ç¨‹æ¨¡å‹è¿›è¡Œç¼–ç¨‹å¼€å‘ï¼Œç„¶åå°†ç¨‹åºé€šè¿‡MapReduceè®¡ç®—æ¡†æ¶åˆ†å‘åˆ°Hadoopé›†ç¾¤ä¸­è¿è¡Œã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä½œä¸ºç¼–ç¨‹æ¨¡å‹çš„MapReduceã€‚</p><h3 id="MapReduceç¼–ç¨‹æ¨¡å‹"><a href="#MapReduceç¼–ç¨‹æ¨¡å‹" class="headerlink" title="MapReduceç¼–ç¨‹æ¨¡å‹"></a>MapReduceç¼–ç¨‹æ¨¡å‹</h3><p>MapReduceæ˜¯ä¸€ç§éå¸¸ç®€å•åˆéå¸¸å¼ºå¤§çš„ç¼–ç¨‹æ¨¡å‹ã€‚</p><p>ç®€å•åœ¨äºå…¶ç¼–ç¨‹æ¨¡å‹åªåŒ…å«mapå’Œreduceä¸¤ä¸ªè¿‡ç¨‹ï¼Œmapçš„ä¸»è¦è¾“å…¥æ˜¯ä¸€å¯¹&lt;key , value&gt;å€¼ï¼Œç»è¿‡mapè®¡ç®—åè¾“å‡ºä¸€å¯¹&lt;key , value&gt;å€¼ï¼›ç„¶åå°†ç›¸åŒkeyåˆå¹¶ï¼Œå½¢æˆ&lt;key , valueé›†åˆ&gt;ï¼›å†å°†è¿™ä¸ª&lt;key , valueé›†åˆ&gt;è¾“å…¥reduceï¼Œç»è¿‡è®¡ç®—è¾“å‡ºé›¶ä¸ªæˆ–å¤šä¸ª&lt;key , value&gt;å¯¹ã€‚</p><p>ä½†æ˜¯MapReduceåŒæ—¶åˆæ˜¯éå¸¸å¼ºå¤§çš„ï¼Œä¸ç®¡æ˜¯å…³ç³»ä»£æ•°è¿ç®—ï¼ˆSQLè®¡ç®—ï¼‰ï¼Œè¿˜æ˜¯çŸ©é˜µè¿ç®—ï¼ˆå›¾è®¡ç®—ï¼‰ï¼Œå¤§æ•°æ®é¢†åŸŸå‡ ä¹æ‰€æœ‰çš„è®¡ç®—éœ€æ±‚éƒ½å¯ä»¥é€šè¿‡MapReduceç¼–ç¨‹æ¥å®ç°ã€‚</p><p>æˆ‘ä»¬ä»¥WordCountç¨‹åºä¸ºä¾‹ã€‚WordCountä¸»è¦è§£å†³æ–‡æœ¬å¤„ç†ä¸­çš„è¯é¢‘ç»Ÿè®¡é—®é¢˜ï¼Œå°±æ˜¯ç»Ÿè®¡æ–‡æœ¬ä¸­æ¯ä¸€ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ã€‚å¦‚æœåªæ˜¯ç»Ÿè®¡ä¸€ç¯‡æ–‡ç« çš„è¯é¢‘ï¼Œå‡ åKåˆ°å‡ Mçš„æ•°æ®ï¼Œé‚£ä¹ˆå†™ä¸€ä¸ªç¨‹åºï¼Œå°†æ•°æ®è¯»å…¥å†…å­˜ï¼Œå»ºä¸€ä¸ªHashè¡¨è®°å½•æ¯ä¸ªè¯å‡ºç°çš„æ¬¡æ•°å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹å›¾ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/MapReduce%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B%E5%92%8C%E8%AE%A1%E7%AE%97%E6%A1%86%E6%9E%B6%E6%9E%B6%E6%9E%84%E5%8E%9F%E7%90%86.resources/%E5%9B%BE%E7%89%87%E4%B8%80.png" alt="å›¾ç‰‡ä¸€"></p><p>ä½†æ˜¯å¦‚æœæƒ³ç»Ÿè®¡å…¨ä¸–ç•Œäº’è”ç½‘æ‰€æœ‰ç½‘é¡µï¼ˆæ•°ä¸‡äº¿è®¡ï¼‰çš„è¯é¢‘æ•°ï¼ˆè¿™æ­£æ˜¯googleè¿™æ ·çš„æœç´¢å¼•æ“å…¸å‹éœ€æ±‚ï¼‰ï¼Œä½ ä¸å¯èƒ½å†™ä¸€ä¸ªç¨‹åºæŠŠå…¨ä¸–ç•Œçš„ç½‘é¡µéƒ½è¯»å…¥å†…å­˜ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨MapReduceç¼–ç¨‹æ¥è§£å†³ã€‚</p><p>WordCountçš„MapReduceç¨‹åºå¦‚ä¸‹ã€‚</p><pre><code>public class WordCount {public static class TokenizerMapperextends Mapper&lt;Object, Text, Text, IntWritable&gt;{private final static IntWritable one = new IntWritable(1);private Text word = new Text();public void map(Object key, Text value, Context context) throws IOException, InterruptedException {StringTokenizer itr = new StringTokenizer(value.toString());while (itr.hasMoreTokens()) {word.set(itr.nextToken());context.write(word, one);}}}public static class IntSumReducerextends Reducer&lt;Text,IntWritable,Text,IntWritable&gt; {private IntWritable result = new IntWritable();public void reduce(Text key, Iterable&lt;IntWritable&gt; values,Context context) throws IOException, InterruptedException {int sum = 0;for (IntWritable val : values) {sum += val.get();}result.set(sum);context.write(key, result);}}}</code></pre><p>å…¶æ ¸å¿ƒæ˜¯ä¸€ä¸ªmapå‡½æ•°ï¼Œä¸€ä¸ªreduceå‡½æ•°ã€‚</p><p>mapå‡½æ•°çš„è¾“å…¥ä¸»è¦æ˜¯ä¸€ä¸ª&lt;key , value&gt;å¯¹ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œvalueæ˜¯è¦ç»Ÿè®¡çš„æ‰€æœ‰æ–‡æœ¬ä¸­çš„ä¸€è¡Œæ•°æ®ï¼Œkeyåœ¨è¿™é‡Œä¸é‡è¦ï¼Œæˆ‘ä»¬å¿½ç•¥ã€‚</p><pre><code>public void map(Object key, Text value, Context context)</code></pre><p>mapå‡½æ•°çš„è®¡ç®—è¿‡ç¨‹å°±æ˜¯ï¼Œå°†è¿™è¡Œæ–‡æœ¬ä¸­çš„å•è¯æå–å‡ºæ¥ï¼Œé’ˆå¯¹æ¯ä¸ªå•è¯è¾“å‡ºä¸€ä¸ª&lt;word , 1&gt;è¿™æ ·çš„&lt;key , value&gt;å¯¹ã€‚</p><p>MapReduceè®¡ç®—æ¡†æ¶ä¼šå°†è¿™äº›&lt;word , 1&gt;æ”¶é›†èµ·æ¥ï¼Œå°†ç›¸åŒçš„wordæ”¾åœ¨ä¸€èµ·ï¼Œå½¢æˆ&lt;word , &lt;1,1,1,1,1,1,1â€¦..&gt;&gt;è¿™æ ·çš„&lt;key , valueé›†åˆ&gt;æ•°æ®ï¼Œç„¶åå°†å…¶è¾“å…¥ç»™reduceå‡½æ•°ã€‚</p><pre><code>public void reduce(Text key, Iterable&lt;IntWritable&gt; values,Context context)</code></pre><p>è¿™é‡Œçš„reduceçš„è¾“å…¥å‚æ•°valueså°±æ˜¯ç”±å¾ˆå¤šä¸ª1ç»„æˆçš„é›†åˆï¼Œè€Œkeyå°±æ˜¯å…·ä½“çš„å•è¯wordã€‚</p><p>reduceå‡½æ•°çš„è®¡ç®—è¿‡ç¨‹å°±æ˜¯ï¼Œå°†è¿™ä¸ªé›†åˆé‡Œçš„1æ±‚å’Œï¼Œå†å°†å•è¯ï¼ˆwordï¼‰å’Œè¿™ä¸ªå’Œï¼ˆsumï¼‰ç»„æˆä¸€ä¸ª&lt;key , value&gt;(&lt;word , sum&gt;)è¾“å‡ºã€‚æ¯ä¸€ä¸ªè¾“å‡ºå°±æ˜¯ä¸€ä¸ªå•è¯å’Œå®ƒçš„è¯é¢‘ç»Ÿè®¡æ€»å’Œã€‚</p><p>å‡è®¾æœ‰ä¸¤ä¸ªblockçš„æ–‡æœ¬æ•°æ®éœ€è¦è¿›è¡Œè¯é¢‘ç»Ÿè®¡ï¼ŒMapReduceè®¡ç®—è¿‡ç¨‹å¦‚ä¸‹å›¾ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/MapReduce%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B%E5%92%8C%E8%AE%A1%E7%AE%97%E6%A1%86%E6%9E%B6%E6%9E%B6%E6%9E%84%E5%8E%9F%E7%90%86.resources/%E5%9B%BE%E7%89%87%E4%BA%8C.png" alt="å›¾ç‰‡äºŒ"></p><h3 id="MapReduceè®¡ç®—è¿‡ç¨‹"><a href="#MapReduceè®¡ç®—è¿‡ç¨‹" class="headerlink" title="MapReduceè®¡ç®—è¿‡ç¨‹"></a>MapReduceè®¡ç®—è¿‡ç¨‹</h3><p>ä¸€ä¸ªmapå‡½æ•°å¯ä»¥é’ˆå¯¹ä¸€éƒ¨åˆ†æ•°æ®è¿›è¡Œè¿ç®—ï¼Œè¿™æ ·å°±å¯ä»¥å°†ä¸€ä¸ªå¤§æ•°æ®åˆ‡åˆ†æˆå¾ˆå¤šå—ï¼ˆè¿™ä¹Ÿæ­£æ˜¯HDFSæ‰€åšçš„ï¼‰ï¼ŒMapReduceè®¡ç®—æ¡†æ¶ä¸ºæ¯ä¸ªå—åˆ†é…ä¸€ä¸ªmapå‡½æ•°å»è®¡ç®—ï¼Œä»è€Œå®ç°å¤§æ•°æ®çš„åˆ†å¸ƒå¼è®¡ç®—ã€‚</p><p>ä¸Šé¢æåˆ°MapReduceç¼–ç¨‹æ¨¡å‹å°†å¤§æ•°æ®è®¡ç®—è¿‡ç¨‹åˆ‡åˆ†ä¸ºmapå’Œreduceä¸¤ä¸ªé˜¶æ®µï¼Œåœ¨mapé˜¶æ®µä¸ºæ¯ä¸ªæ•°æ®å—åˆ†é…ä¸€ä¸ªmapè®¡ç®—ä»»åŠ¡ï¼Œç„¶åå°†æ‰€æœ‰mapè¾“å‡ºçš„keyè¿›è¡Œåˆå¹¶ï¼Œç›¸åŒçš„keyåŠå…¶å¯¹åº”çš„valueå‘é€ç»™åŒä¸€ä¸ªreduceä»»åŠ¡å»å¤„ç†ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹æœ‰ä¸¤ä¸ªå…³é”®é—®é¢˜éœ€è¦å¤„ç†</p><ul><li><p>å¦‚ä½•ä¸ºæ¯ä¸ªæ•°æ®å—åˆ†é…ä¸€ä¸ªmapè®¡ç®—ä»»åŠ¡ï¼Œä»£ç æ˜¯å¦‚ä½•å‘é€æ•°æ®å—æ‰€åœ¨æœåŠ¡å™¨çš„ï¼Œå‘é€è¿‡å»æ˜¯å¦‚ä½•å¯åŠ¨çš„ï¼Œå¯åŠ¨ä»¥ååˆå¦‚ä½•çŸ¥é“è‡ªå·±éœ€è¦è®¡ç®—çš„æ•°æ®åœ¨æ–‡ä»¶ä»€ä¹ˆä½ç½®ï¼ˆæ•°æ®å—idæ˜¯ä»€ä¹ˆï¼‰</p></li><li><p>å¤„äºä¸åŒæœåŠ¡å™¨çš„mapè¾“å‡ºçš„&lt;key , value&gt; ï¼Œå¦‚ä½•æŠŠç›¸åŒçš„keyèšåˆåœ¨ä¸€èµ·å‘é€ç»™reduceä»»åŠ¡</p></li><li><p>è¿™ä¸¤ä¸ªå…³é”®é—®é¢˜æ­£å¥½å¯¹åº”æ–‡ç« ä¸­â€œMapReduceè®¡ç®—è¿‡ç¨‹â€ä¸€å›¾ä¸­ä¸¤å¤„â€œMapReduceæ¡†æ¶å¤„ç†â€ã€‚</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/MapReduce%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B%E5%92%8C%E8%AE%A1%E7%AE%97%E6%A1%86%E6%9E%B6%E6%9E%B6%E6%9E%84%E5%8E%9F%E7%90%86.resources/%E5%9B%BE%E7%89%87%E4%B8%89.png" alt="å›¾ç‰‡ä¸‰"></p><p>æˆ‘ä»¬å…ˆçœ‹ä¸‹MapReduceæ˜¯å¦‚ä½•å¯åŠ¨å¤„ç†ä¸€ä¸ªå¤§æ•°æ®è®¡ç®—åº”ç”¨ä½œä¸šçš„ã€‚</p><h4 id="MapReduceä½œä¸šå¯åŠ¨å’Œè¿è¡Œæœºåˆ¶"><a href="#MapReduceä½œä¸šå¯åŠ¨å’Œè¿è¡Œæœºåˆ¶" class="headerlink" title="MapReduceä½œä¸šå¯åŠ¨å’Œè¿è¡Œæœºåˆ¶"></a>MapReduceä½œä¸šå¯åŠ¨å’Œè¿è¡Œæœºåˆ¶</h4><p>æˆ‘ä»¬ä»¥Hadoop1ä¸ºä¾‹ï¼ŒMapReduceè¿è¡Œè¿‡ç¨‹æ¶‰åŠä»¥ä¸‹å‡ ç±»å…³é”®è¿›ç¨‹ï¼š</p><ul><li><p>å¤§æ•°æ®åº”ç”¨è¿›ç¨‹ï¼šå¯åŠ¨ç”¨æˆ·MapReduceç¨‹åºçš„ä¸»å…¥å£ï¼Œä¸»è¦æŒ‡å®šMapå’ŒReduceç±»ã€è¾“å…¥è¾“å‡ºæ–‡ä»¶è·¯å¾„ç­‰ï¼Œå¹¶æäº¤ä½œä¸šç»™Hadoopé›†ç¾¤ã€‚</p></li><li><p>JobTrackerè¿›ç¨‹ï¼šæ ¹æ®è¦å¤„ç†çš„è¾“å…¥æ•°æ®é‡å¯åŠ¨ç›¸åº”æ•°é‡çš„mapå’Œreduceè¿›ç¨‹ä»»åŠ¡ï¼Œå¹¶ç®¡ç†æ•´ä¸ªä½œä¸šç”Ÿå‘½å‘¨æœŸçš„ä»»åŠ¡è°ƒåº¦å’Œç›‘æ§ã€‚JobTrackerè¿›ç¨‹åœ¨æ•´ä¸ªHadoopé›†ç¾¤å…¨å±€å”¯ä¸€ã€‚</p></li><li><p>TaskTrackerè¿›ç¨‹ï¼šè´Ÿè´£å¯åŠ¨å’Œç®¡ç†mapè¿›ç¨‹ä»¥åŠreduceè¿›ç¨‹ã€‚å› ä¸ºéœ€è¦æ¯ä¸ªæ•°æ®å—éƒ½æœ‰å¯¹åº”çš„mapå‡½æ•°ï¼ŒTaskTrackerè¿›ç¨‹é€šå¸¸å’ŒHDFSçš„DataNodeè¿›ç¨‹å¯åŠ¨åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒHadoopé›†ç¾¤ä¸­ç»å¤§å¤šæ•°æœåŠ¡å™¨åŒæ—¶è¿è¡ŒDataNodeè¿›ç¨‹å’ŒTaskTackerè¿›ç¨‹ã€‚</p></li></ul><p>å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/MapReduce%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B%E5%92%8C%E8%AE%A1%E7%AE%97%E6%A1%86%E6%9E%B6%E6%9E%B6%E6%9E%84%E5%8E%9F%E7%90%86.resources/%E5%9B%BE%E7%89%87%E5%9B%9B.png" alt="å›¾ç‰‡å››"></p><p>å…·ä½“ä½œä¸šå¯åŠ¨å’Œè®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>åº”ç”¨è¿›ç¨‹å°†ç”¨æˆ·ä½œä¸šjaråŒ…å­˜å‚¨åœ¨HDFSä¸­ï¼Œå°†æ¥è¿™äº›jaråŒ…ä¼šåˆ†å‘ç»™Hadoopé›†ç¾¤ä¸­çš„æœåŠ¡å™¨æ‰§è¡ŒMapReduceè®¡ç®—ã€‚</li><li>åº”ç”¨ç¨‹åºæäº¤jobä½œä¸šç»™JobTrackerã€‚</li><li>JobTackeræ ¹æ®ä½œä¸šè°ƒåº¦ç­–ç•¥åˆ›å»ºJobInProcessæ ‘ï¼Œæ¯ä¸ªä½œä¸šéƒ½ä¼šæœ‰ä¸€ä¸ªè‡ªå·±çš„JobInProcessæ ‘ã€‚</li><li>JobInProcessæ ¹æ®è¾“å…¥æ•°æ®åˆ†ç‰‡æ•°ç›®ï¼ˆé€šå¸¸æƒ…å†µå°±æ˜¯æ•°æ®å—çš„æ•°ç›®ï¼‰å’Œè®¾ç½®çš„reduceæ•°ç›®åˆ›å»ºç›¸åº”æ•°é‡çš„TaskInProcessã€‚</li><li>TaskTrackerè¿›ç¨‹å’ŒJobTrackerè¿›ç¨‹è¿›è¡Œå®šæ—¶é€šä¿¡ã€‚</li><li>å¦‚æœTaskTrackeræœ‰ç©ºé—²çš„è®¡ç®—èµ„æºï¼ˆç©ºé—²CPUæ ¸ï¼‰ï¼ŒJobTrackerå°±ä¼šç»™ä»–åˆ†é…ä»»åŠ¡ã€‚åˆ†é…ä»»åŠ¡çš„æ—¶å€™ä¼šæ ¹æ®TaskTrackerçš„æœåŠ¡å™¨åå­—åŒ¹é…åœ¨åŒä¸€å°æœºå™¨ä¸Šçš„æ•°æ®å—è®¡ç®—ä»»åŠ¡ç»™å®ƒï¼Œä½¿å¯åŠ¨çš„è®¡ç®—ä»»åŠ¡æ­£å¥½å¤„ç†æœ¬æœºä¸Šçš„æ•°æ®ã€‚</li><li>TaskRunneræ”¶åˆ°ä»»åŠ¡åæ ¹æ®ä»»åŠ¡ç±»å‹ï¼ˆmapè¿˜æ˜¯reduceï¼‰ï¼Œä»»åŠ¡å‚æ•°ï¼ˆä½œä¸šjaråŒ…è·¯å¾„ï¼Œè¾“å…¥æ•°æ®æ–‡ä»¶è·¯å¾„ï¼Œè¦å¤„ç†çš„æ•°æ®åœ¨æ–‡ä»¶ä¸­çš„èµ·å§‹ä½ç½®å’Œåç§»é‡ï¼Œæ•°æ®å—å¤šä¸ªå¤‡ä»½çš„DataNodeä¸»æœºåç­‰ï¼‰å¯åŠ¨ç›¸åº”çš„mapæˆ–è€…reduceè¿›ç¨‹ã€‚</li><li>mapæˆ–è€…reduceç¨‹åºå¯åŠ¨åï¼Œæ£€æŸ¥æœ¬åœ°æ˜¯å¦æœ‰è¦æ‰§è¡Œä»»åŠ¡çš„jaråŒ…æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±å»HDFSä¸Šä¸‹è½½ï¼Œç„¶ååŠ è½½mapæˆ–è€…reduceä»£ç å¼€å§‹æ‰§è¡Œã€‚</li><li>å¦‚æœæ˜¯mapè¿›ç¨‹ï¼Œä»HDFSè¯»å–æ•°æ®ï¼ˆé€šå¸¸è¦è¯»å–çš„æ•°æ®å—æ­£å¥½å­˜å‚¨åœ¨æœ¬æœºï¼‰ã€‚å¦‚æœæ˜¯reduceè¿›ç¨‹ï¼Œå°†ç»“æœæ•°æ®å†™å‡ºåˆ°HDFSã€‚</li></ul><p>é€šè¿‡ä»¥ä¸Šè¿‡ç¨‹ï¼ŒMapReduceå¯ä»¥å°†å¤§æ•°æ®ä½œä¸šè®¡ç®—ä»»åŠ¡åˆ†å¸ƒåœ¨æ•´ä¸ªHadoopé›†ç¾¤ä¸­è¿è¡Œï¼Œæ¯ä¸ªmapè®¡ç®—ä»»åŠ¡è¦å¤„ç†çš„æ•°æ®é€šå¸¸éƒ½èƒ½ä»æœ¬åœ°ç£ç›˜ä¸Šè¯»å–åˆ°ã€‚è€Œç”¨æˆ·è¦åšçš„ä»…ä»…æ˜¯ç¼–å†™ä¸€ä¸ªmapå‡½æ•°å’Œä¸€ä¸ªreduceå‡½æ•°å°±å¯ä»¥äº†ï¼Œæ ¹æœ¬ä¸ç”¨å…³å¿ƒè¿™ä¸¤ä¸ªå‡½æ•°æ˜¯å¦‚ä½•è¢«åˆ†å¸ƒå¯åŠ¨åˆ°é›†ç¾¤ä¸Šçš„ï¼Œæ•°æ®å—åˆæ˜¯å¦‚ä½•åˆ†é…ç»™è®¡ç®—ä»»åŠ¡çš„ã€‚è¿™ä¸€åˆ‡éƒ½ç”±MapReduceè®¡ç®—æ¡†æ¶å®Œæˆã€‚</p><h4 id="MapReduceæ•°æ®åˆå¹¶ä¸è¿æ¥æœºåˆ¶"><a href="#MapReduceæ•°æ®åˆå¹¶ä¸è¿æ¥æœºåˆ¶" class="headerlink" title="MapReduceæ•°æ®åˆå¹¶ä¸è¿æ¥æœºåˆ¶"></a>MapReduceæ•°æ®åˆå¹¶ä¸è¿æ¥æœºåˆ¶</h4><p>åœ¨WordCountä¾‹å­ä¸­ï¼Œè¦ç»Ÿè®¡ç›¸åŒå•è¯åœ¨æ‰€æœ‰è¾“å…¥æ•°æ®ä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œè€Œä¸€ä¸ªmapåªèƒ½å¤„ç†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œä¸€ä¸ªçƒ­é—¨å•è¯å‡ ä¹ä¼šå‡ºç°åœ¨æ‰€æœ‰çš„mapä¸­ï¼Œè¿™äº›å•è¯å¿…é¡»è¦åˆå¹¶åˆ°ä¸€èµ·è¿›è¡Œç»Ÿè®¡æ‰èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚</p><p>äº‹å®ä¸Šï¼Œå‡ ä¹æ‰€æœ‰çš„å¤§æ•°æ®è®¡ç®—åœºæ™¯éƒ½éœ€è¦å¤„ç†æ•°æ®å…³è”çš„é—®é¢˜ï¼Œç®€å•å¦‚WordCountåªè¦å¯¹keyè¿›è¡Œåˆå¹¶å°±å¯ä»¥äº†ï¼Œå¤æ‚å¦‚æ•°æ®åº“çš„joinæ“ä½œï¼Œéœ€è¦å¯¹ä¸¤ç§ç±»å‹ï¼ˆæˆ–è€…æ›´å¤šç±»å‹ï¼‰çš„æ•°æ®æ ¹æ®keyè¿›è¡Œè¿æ¥ã€‚</p><p>MapReduceè®¡ç®—æ¡†æ¶å¤„ç†æ•°æ®åˆå¹¶ä¸è¿æ¥çš„æ“ä½œå°±åœ¨mapè¾“å‡ºä¸reduceè¾“å…¥ä¹‹é—´ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ‰ä¸ªä¸“é—¨çš„è¯æ±‡æ¥æè¿°ï¼Œå«åšshuffleã€‚</p><h4 id="MapReduce-shuffleè¿‡ç¨‹"><a href="#MapReduce-shuffleè¿‡ç¨‹" class="headerlink" title="MapReduce shuffleè¿‡ç¨‹"></a>MapReduce shuffleè¿‡ç¨‹</h4><p>æ¯ä¸ªmapä»»åŠ¡çš„è®¡ç®—ç»“æœéƒ½ä¼šå†™å…¥åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œç­‰mapä»»åŠ¡å¿«è¦è®¡ç®—å®Œæˆçš„æ—¶å€™ï¼ŒMapReduceè®¡ç®—æ¡†æ¶ä¼šå¯åŠ¨shuffleè¿‡ç¨‹ï¼Œåœ¨mapç«¯è°ƒç”¨ä¸€ä¸ªPartitioneræ¥å£ï¼Œå¯¹mapäº§ç”Ÿçš„æ¯ä¸ª&lt;key , value&gt;è¿›è¡Œreduceåˆ†åŒºé€‰æ‹©ï¼Œç„¶åé€šè¿‡httpé€šä¿¡å‘é€ç»™å¯¹åº”çš„reduceè¿›ç¨‹ã€‚è¿™æ ·ä¸ç®¡mapä½äºå“ªä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ï¼Œç›¸åŒçš„keyä¸€å®šä¼šè¢«å‘é€ç»™ç›¸åŒçš„reduceè¿›ç¨‹ã€‚reduceç«¯å¯¹æ”¶åˆ°çš„&lt;key , value&gt;è¿›è¡Œæ’åºå’Œåˆå¹¶ï¼Œç›¸åŒçš„keyæ”¾åœ¨ä¸€èµ·ï¼Œç»„æˆä¸€ä¸ª&lt;key , valueé›†åˆ&gt;ä¼ é€’ç»™reduceæ‰§è¡Œã€‚</p><p>MapReduceæ¡†æ¶ç¼ºçœçš„Partitionerç”¨keyçš„å“ˆå¸Œå€¼å¯¹reduceä»»åŠ¡æ•°é‡å–æ¨¡ï¼Œç›¸åŒçš„keyä¸€å®šä¼šè½åœ¨ç›¸åŒçš„reduceä»»åŠ¡idä¸Šï¼Œå®ç°ä¸Šï¼Œè¿™æ ·çš„Partitionerä»£ç åªéœ€è¦ä¸€è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code>/** Use {@link Object#hashCode()} to partition. */ public int getPartition(K2 key, V2 value, int numReduceTasks) { return (key.hashCode() &amp; Integer.MAX_VALUE) % numReduceTasks; }</code></pre><p>shuffleæ˜¯å¤§æ•°æ®è®¡ç®—è¿‡ç¨‹ä¸­å‘ç”Ÿå¥‡è¿¹çš„åœ°æ–¹ï¼Œä¸ç®¡æ˜¯MapReduceè¿˜æ˜¯Sparkï¼Œåªè¦æ˜¯å¤§æ•°æ®æ‰¹å¤„ç†è®¡ç®—ï¼Œä¸€å®šä¼šæœ‰shuffleè¿‡ç¨‹ï¼Œè®©æ•°æ®å…³è”èµ·æ¥ï¼Œæ•°æ®çš„å†…åœ¨å…³ç³»å’Œä»·å€¼æ‰ä¼šå‘ˆç°å‡ºæ¥ã€‚ä¸ç†è§£shuffleï¼Œå°±ä¼šåœ¨mapå’Œreduceç¼–ç¨‹ä¸­äº§ç”Ÿå›°æƒ‘ï¼Œä¸çŸ¥é“è¯¥å¦‚ä½•æ­£ç¡®è®¾è®¡mapçš„è¾“å‡ºå’Œreduceçš„è¾“å…¥ã€‚shuffleä¹Ÿæ˜¯æ•´ä¸ªMapReduceè¿‡ç¨‹ä¸­æœ€éš¾æœ€æ¶ˆè€—æ€§èƒ½çš„åœ°æ–¹ï¼Œåœ¨MapReduceæ—©æœŸä»£ç ä¸­ï¼Œä¸€åŠä»£ç éƒ½æ˜¯å…³äºshuffleå¤„ç†çš„ã€‚</p><p><strong>æŒç»­æ›´æ–°ä¸­â€¦ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æ¬¢è¿è”ç³»æˆ‘ï¼Œåœ¨æ–‡ç« æœ€åè¯„è®ºåŒºã€ç•™è¨€å’Œè®¨è®ºã€‘ï¼Œå½“ç„¶ï¼Œæ¬¢è¿ç‚¹å‡»æ–‡ç« æœ€åçš„æ‰“èµæŒ‰é”®ï¼Œè¯·åšä¸»ä¸€æ¯å†°é˜”ä¹ï¼Œç¬‘ï½</strong></p><table>  <tbody><tr>    <td><img width="100" src="https://hualei.online/medias/reward/alipay.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/wechat.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/zan.png"></td>     </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> äº’è”ç½‘ </tag>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spark RDDç®€ä»‹åŠä½¿ç”¨</title>
      <link href="/posts/1754.html"/>
      <url>/posts/1754.html</url>
      
        <content type="html"><![CDATA[<h1 id="å¼¹æ€§å¼æ•°æ®é›†RDDs"><a href="#å¼¹æ€§å¼æ•°æ®é›†RDDs" class="headerlink" title="å¼¹æ€§å¼æ•°æ®é›†RDDs"></a>å¼¹æ€§å¼æ•°æ®é›†RDDs</h1><h2 id="ä¸€ã€RDDç®€ä»‹"><a href="#ä¸€ã€RDDç®€ä»‹" class="headerlink" title="ä¸€ã€RDDç®€ä»‹"></a>ä¸€ã€RDDç®€ä»‹</h2><p><code>RDD</code> å…¨ç§°ä¸º Resilient Distributed Datasetsï¼Œæ˜¯ Spark æœ€åŸºæœ¬çš„æ•°æ®æŠ½è±¡ï¼Œå®ƒæ˜¯åªè¯»çš„ã€åˆ†åŒºè®°å½•çš„é›†åˆï¼Œæ”¯æŒå¹¶è¡Œæ“ä½œï¼Œå¯ä»¥ç”±å¤–éƒ¨æ•°æ®é›†æˆ–å…¶ä»– RDD è½¬æ¢è€Œæ¥ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ul><li>ä¸€ä¸ª RDD ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ†åŒºï¼ˆPartitionsï¼‰ç»„æˆã€‚å¯¹äº RDD æ¥è¯´ï¼Œæ¯ä¸ªåˆ†åŒºä¼šè¢«ä¸€ä¸ªè®¡ç®—ä»»åŠ¡æ‰€å¤„ç†ï¼Œç”¨æˆ·å¯ä»¥åœ¨åˆ›å»º RDD æ—¶æŒ‡å®šå…¶åˆ†åŒºä¸ªæ•°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™é»˜è®¤é‡‡ç”¨ç¨‹åºæ‰€åˆ†é…åˆ°çš„ CPU çš„æ ¸å¿ƒæ•°ï¼›</li><li>RDD æ‹¥æœ‰ä¸€ä¸ªç”¨äºè®¡ç®—åˆ†åŒºçš„å‡½æ•° computeï¼›</li><li>RDD ä¼šä¿å­˜å½¼æ­¤é—´çš„ä¾èµ–å…³ç³»ï¼ŒRDD çš„æ¯æ¬¡è½¬æ¢éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ä¾èµ–å…³ç³»ï¼Œè¿™ç§ RDD ä¹‹é—´çš„ä¾èµ–å…³ç³»å°±åƒæµæ°´çº¿ä¸€æ ·ã€‚åœ¨éƒ¨åˆ†åˆ†åŒºæ•°æ®ä¸¢å¤±åï¼Œå¯ä»¥é€šè¿‡è¿™ç§ä¾èµ–å…³ç³»é‡æ–°è®¡ç®—ä¸¢å¤±çš„åˆ†åŒºæ•°æ®ï¼Œè€Œä¸æ˜¯å¯¹ RDD çš„æ‰€æœ‰åˆ†åŒºè¿›è¡Œé‡æ–°è®¡ç®—ï¼›</li><li>Key-Value å‹çš„ RDD è¿˜æ‹¥æœ‰ Partitioner(åˆ†åŒºå™¨)ï¼Œç”¨äºå†³å®šæ•°æ®è¢«å­˜å‚¨åœ¨å“ªä¸ªåˆ†åŒºä¸­ï¼Œç›®å‰ Spark ä¸­æ”¯æŒ HashPartitioner(æŒ‰ç…§å“ˆå¸Œåˆ†åŒº) å’Œ RangeParationer(æŒ‰ç…§èŒƒå›´è¿›è¡Œåˆ†åŒº)ï¼›</li><li>ä¸€ä¸ªä¼˜å…ˆä½ç½®åˆ—è¡¨ (å¯é€‰)ï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªåˆ†åŒºçš„ä¼˜å…ˆä½ç½® (prefered location)ã€‚å¯¹äºä¸€ä¸ª HDFS æ–‡ä»¶æ¥è¯´ï¼Œè¿™ä¸ªåˆ—è¡¨ä¿å­˜çš„å°±æ˜¯æ¯ä¸ªåˆ†åŒºæ‰€åœ¨çš„å—çš„ä½ç½®ï¼ŒæŒ‰ç…§â€œç§»åŠ¨æ•°æ®ä¸å¦‚ç§»åŠ¨è®¡ç®—â€œçš„ç†å¿µï¼ŒSpark åœ¨è¿›è¡Œä»»åŠ¡è°ƒåº¦çš„æ—¶å€™ï¼Œä¼šå°½å¯èƒ½çš„å°†è®¡ç®—ä»»åŠ¡åˆ†é…åˆ°å…¶æ‰€è¦å¤„ç†æ•°æ®å—çš„å­˜å‚¨ä½ç½®ã€‚</li></ul><p><code>RDD[T]</code> æŠ½è±¡ç±»çš„éƒ¨åˆ†ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-scala"><code class="language-scala"><span class="token comment" spellcheck="true">// ç”±å­ç±»å®ç°ä»¥è®¡ç®—ç»™å®šåˆ†åŒº</span><span class="token keyword">def</span> compute<span class="token punctuation">(</span>split<span class="token operator">:</span> Partition<span class="token punctuation">,</span> context<span class="token operator">:</span> TaskContext<span class="token punctuation">)</span><span class="token operator">:</span> Iterator<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token comment" spellcheck="true">// è·å–æ‰€æœ‰åˆ†åŒº</span><span class="token keyword">protected</span> <span class="token keyword">def</span> getPartitions<span class="token operator">:</span> Array<span class="token punctuation">[</span>Partition<span class="token punctuation">]</span><span class="token comment" spellcheck="true">// è·å–æ‰€æœ‰ä¾èµ–å…³ç³»</span><span class="token keyword">protected</span> <span class="token keyword">def</span> getDependencies<span class="token operator">:</span> Seq<span class="token punctuation">[</span>Dependency<span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> deps<span class="token comment" spellcheck="true">// è·å–ä¼˜å…ˆä½ç½®åˆ—è¡¨</span><span class="token keyword">protected</span> <span class="token keyword">def</span> getPreferredLocations<span class="token punctuation">(</span>split<span class="token operator">:</span> Partition<span class="token punctuation">)</span><span class="token operator">:</span> Seq<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> Nil<span class="token comment" spellcheck="true">// åˆ†åŒºå™¨ ç”±å­ç±»é‡å†™ä»¥æŒ‡å®šå®ƒä»¬çš„åˆ†åŒºæ–¹å¼</span><span class="token annotation punctuation">@transient</span> <span class="token keyword">val</span> partitioner<span class="token operator">:</span> Option<span class="token punctuation">[</span>Partitioner<span class="token punctuation">]</span> <span class="token operator">=</span> None<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äºŒã€åˆ›å»ºRDD"><a href="#äºŒã€åˆ›å»ºRDD" class="headerlink" title="äºŒã€åˆ›å»ºRDD"></a>äºŒã€åˆ›å»ºRDD</h2><p>RDD æœ‰ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼Œåˆ†åˆ«ä»‹ç»å¦‚ä¸‹ï¼š</p><h3 id="2-1-ç”±ç°æœ‰é›†åˆåˆ›å»º"><a href="#2-1-ç”±ç°æœ‰é›†åˆåˆ›å»º" class="headerlink" title="2.1 ç”±ç°æœ‰é›†åˆåˆ›å»º"></a>2.1 ç”±ç°æœ‰é›†åˆåˆ›å»º</h3><p>è¿™é‡Œä½¿ç”¨ <code>spark-shell</code> è¿›è¡Œæµ‹è¯•ï¼Œå¯åŠ¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-shell"><code class="language-shell">spark-shell --master local[4]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯åŠ¨ <code>spark-shell</code> åï¼Œç¨‹åºä¼šè‡ªåŠ¨åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œç›¸å½“äºæ‰§è¡Œäº†ä¸‹é¢çš„ Scala è¯­å¥ï¼š</p><pre class="line-numbers language-scala"><code class="language-scala"><span class="token keyword">val</span> conf <span class="token operator">=</span> <span class="token keyword">new</span> SparkConf<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setAppName<span class="token punctuation">(</span><span class="token string">"Spark shell"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setMaster<span class="token punctuation">(</span><span class="token string">"local[4]"</span><span class="token punctuation">)</span><span class="token keyword">val</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> SparkContext<span class="token punctuation">(</span>conf<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç”±ç°æœ‰é›†åˆåˆ›å»º RDDï¼Œä½ å¯ä»¥åœ¨åˆ›å»ºæ—¶æŒ‡å®šå…¶åˆ†åŒºä¸ªæ•°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™é‡‡ç”¨ç¨‹åºæ‰€åˆ†é…åˆ°çš„ CPU çš„æ ¸å¿ƒæ•°ï¼š</p><pre class="line-numbers language-scala"><code class="language-scala"><span class="token keyword">val</span> data <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// ç”±ç°æœ‰é›†åˆåˆ›å»º RDD,é»˜è®¤åˆ†åŒºæ•°ä¸ºç¨‹åºæ‰€åˆ†é…åˆ°çš„ CPU çš„æ ¸å¿ƒæ•°</span><span class="token keyword">val</span> dataRDD <span class="token operator">=</span> sc<span class="token punctuation">.</span>parallelize<span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// æŸ¥çœ‹åˆ†åŒºæ•°</span>dataRDD<span class="token punctuation">.</span>getNumPartitions<span class="token comment" spellcheck="true">// æ˜ç¡®æŒ‡å®šåˆ†åŒºæ•°</span><span class="token keyword">val</span> dataRDD <span class="token operator">=</span> sc<span class="token punctuation">.</span>parallelize<span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><div align="center"> <img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/scala-åˆ†åŒºæ•°.png"> </div>### 2.2 å¼•ç”¨å¤–éƒ¨å­˜å‚¨ç³»ç»Ÿä¸­çš„æ•°æ®é›†<p>å¼•ç”¨å¤–éƒ¨å­˜å‚¨ç³»ç»Ÿä¸­çš„æ•°æ®é›†ï¼Œä¾‹å¦‚æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼ŒHDFSï¼ŒHBase æˆ–æ”¯æŒ Hadoop InputFormat çš„ä»»ä½•æ•°æ®æºã€‚</p><pre class="line-numbers language-scala"><code class="language-scala"><span class="token keyword">val</span> fileRDD <span class="token operator">=</span> sc<span class="token punctuation">.</span>textFile<span class="token punctuation">(</span><span class="token string">"/usr/file/emp.txt"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è·å–ç¬¬ä¸€è¡Œæ–‡æœ¬</span>fileRDD<span class="token punctuation">.</span>take<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨å¤–éƒ¨å­˜å‚¨ç³»ç»Ÿæ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ul><li>å¦‚æœåœ¨é›†ç¾¤ç¯å¢ƒä¸‹ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿè¯»å–æ•°æ®ï¼Œåˆ™è¦æ±‚è¯¥æ–‡ä»¶å¿…é¡»åœ¨é›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨ä¸Šéƒ½å­˜åœ¨ï¼Œä¸”è·¯å¾„ç›¸åŒï¼›</li><li>æ”¯æŒç›®å½•è·¯å¾„ï¼Œæ”¯æŒå‹ç¼©æ–‡ä»¶ï¼Œæ”¯æŒä½¿ç”¨é€šé…ç¬¦ã€‚</li></ul><h3 id="2-3-textFile-amp-wholeTextFiles"><a href="#2-3-textFile-amp-wholeTextFiles" class="headerlink" title="2.3 textFile &amp; wholeTextFiles"></a>2.3 textFile &amp; wholeTextFiles</h3><p>ä¸¤è€…éƒ½å¯ä»¥ç”¨æ¥è¯»å–å¤–éƒ¨æ–‡ä»¶ï¼Œä½†æ˜¯è¿”å›æ ¼å¼æ˜¯ä¸åŒçš„ï¼š</p><ul><li><strong>textFile</strong>ï¼šå…¶è¿”å›æ ¼å¼æ˜¯ <code>RDD[String]</code> ï¼Œè¿”å›çš„æ˜¯å°±æ˜¯æ–‡ä»¶å†…å®¹ï¼ŒRDD ä¸­æ¯ä¸€ä¸ªå…ƒç´ å¯¹åº”ä¸€è¡Œæ•°æ®ï¼›</li><li><strong>wholeTextFiles</strong>ï¼šå…¶è¿”å›æ ¼å¼æ˜¯ <code>RDD[(String, String)]</code>ï¼Œå…ƒç»„ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–‡ä»¶è·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–‡ä»¶å†…å®¹ï¼›</li><li>ä¸¤è€…éƒ½æä¾›ç¬¬äºŒä¸ªå‚æ•°æ¥æ§åˆ¶æœ€å°åˆ†åŒºæ•°ï¼›</li><li>ä» HDFS ä¸Šè¯»å–æ–‡ä»¶æ—¶ï¼ŒSpark ä¼šä¸ºæ¯ä¸ªå—åˆ›å»ºä¸€ä¸ªåˆ†åŒºã€‚</li></ul><pre class="line-numbers language-scala"><code class="language-scala"><span class="token keyword">def</span> textFile<span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span>minPartitions<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> defaultMinPartitions<span class="token punctuation">)</span><span class="token operator">:</span> RDD<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> withScope <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token keyword">def</span> wholeTextFiles<span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span>minPartitions<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> defaultMinPartitions<span class="token punctuation">)</span><span class="token operator">:</span> RDD<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="ä¸‰ã€æ“ä½œRDD"><a href="#ä¸‰ã€æ“ä½œRDD" class="headerlink" title="ä¸‰ã€æ“ä½œRDD"></a>ä¸‰ã€æ“ä½œRDD</h2><p>RDD æ”¯æŒä¸¤ç§ç±»å‹çš„æ“ä½œï¼š<em>transformations<em>ï¼ˆè½¬æ¢ï¼Œä»ç°æœ‰æ•°æ®é›†åˆ›å»ºæ–°æ•°æ®é›†ï¼‰å’Œ *actions</em>ï¼ˆåœ¨æ•°æ®é›†ä¸Šè¿è¡Œè®¡ç®—åå°†å€¼è¿”å›åˆ°é©±åŠ¨ç¨‹åºï¼‰ã€‚RDD ä¸­çš„æ‰€æœ‰è½¬æ¢æ“ä½œéƒ½æ˜¯æƒ°æ€§çš„ï¼Œå®ƒä»¬åªæ˜¯è®°ä½è¿™äº›è½¬æ¢æ“ä½œï¼Œä½†ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œåªæœ‰é‡åˆ° *action</em> æ“ä½œåæ‰ä¼šçœŸæ­£çš„è¿›è¡Œè®¡ç®—ï¼Œè¿™ç±»ä¼¼äºå‡½æ•°å¼ç¼–ç¨‹ä¸­çš„æƒ°æ€§æ±‚å€¼ã€‚</p><pre class="line-numbers language-scala"><code class="language-scala"><span class="token keyword">val</span> list <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// map æ˜¯ä¸€ä¸ª transformations æ“ä½œï¼Œè€Œ foreach æ˜¯ä¸€ä¸ª actions æ“ä½œ</span>sc<span class="token punctuation">.</span>parallelize<span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">.</span>map<span class="token punctuation">(</span>_ <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è¾“å‡ºï¼š 10 20 30</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å››ã€ç¼“å­˜RDD"><a href="#å››ã€ç¼“å­˜RDD" class="headerlink" title="å››ã€ç¼“å­˜RDD"></a>å››ã€ç¼“å­˜RDD</h2><h3 id="4-1-ç¼“å­˜çº§åˆ«"><a href="#4-1-ç¼“å­˜çº§åˆ«" class="headerlink" title="4.1 ç¼“å­˜çº§åˆ«"></a>4.1 ç¼“å­˜çº§åˆ«</h3><p>Spark é€Ÿåº¦éå¸¸å¿«çš„ä¸€ä¸ªåŸå› æ˜¯ RDD æ”¯æŒç¼“å­˜ã€‚æˆåŠŸç¼“å­˜åï¼Œå¦‚æœä¹‹åçš„æ“ä½œä½¿ç”¨åˆ°äº†è¯¥æ•°æ®é›†ï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ã€‚è™½ç„¶ç¼“å­˜ä¹Ÿæœ‰ä¸¢å¤±çš„é£é™©ï¼Œä½†æ˜¯ç”±äº RDD ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¦‚æœæŸä¸ªåˆ†åŒºçš„ç¼“å­˜æ•°æ®ä¸¢å¤±ï¼Œåªéœ€è¦é‡æ–°è®¡ç®—è¯¥åˆ†åŒºå³å¯ã€‚</p><p>Spark æ”¯æŒå¤šç§ç¼“å­˜çº§åˆ« ï¼š</p><table><thead><tr><th>Storage Level<br>ï¼ˆå­˜å‚¨çº§åˆ«ï¼‰</th><th>Meaningï¼ˆå«ä¹‰ï¼‰</th></tr></thead><tbody><tr><td><code>MEMORY_ONLY</code></td><td>é»˜è®¤çš„ç¼“å­˜çº§åˆ«ï¼Œå°† RDD ä»¥ååºåˆ—åŒ–çš„ Java å¯¹è±¡çš„å½¢å¼å­˜å‚¨åœ¨ JVM ä¸­ã€‚å¦‚æœå†…å­˜ç©ºé—´ä¸å¤Ÿï¼Œåˆ™éƒ¨åˆ†åˆ†åŒºæ•°æ®å°†ä¸å†ç¼“å­˜ã€‚</td></tr><tr><td><code>MEMORY_AND_DISK</code></td><td>å°† RDD ä»¥ååºåˆ—åŒ–çš„ Java å¯¹è±¡çš„å½¢å¼å­˜å‚¨ JVM ä¸­ã€‚å¦‚æœå†…å­˜ç©ºé—´ä¸å¤Ÿï¼Œå°†æœªç¼“å­˜çš„åˆ†åŒºæ•°æ®å­˜å‚¨åˆ°ç£ç›˜ï¼Œåœ¨éœ€è¦ä½¿ç”¨è¿™äº›åˆ†åŒºæ—¶ä»ç£ç›˜è¯»å–ã€‚</td></tr><tr><td><code>MEMORY_ONLY_SER</code><br></td><td>å°† RDD ä»¥åºåˆ—åŒ–çš„ Java å¯¹è±¡çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼ˆæ¯ä¸ªåˆ†åŒºä¸ºä¸€ä¸ª byte æ•°ç»„ï¼‰ã€‚è¿™ç§æ–¹å¼æ¯”ååºåˆ—åŒ–å¯¹è±¡èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œä½†åœ¨è¯»å–æ—¶ä¼šå¢åŠ  CPU çš„è®¡ç®—è´Ÿæ‹…ã€‚ä»…æ”¯æŒ Java å’Œ Scala ã€‚</td></tr><tr><td><code>MEMORY_AND_DISK_SER</code><br></td><td>ç±»ä¼¼äº <code>MEMORY_ONLY_SER</code>ï¼Œä½†æ˜¯æº¢å‡ºçš„åˆ†åŒºæ•°æ®ä¼šå­˜å‚¨åˆ°ç£ç›˜ï¼Œè€Œä¸æ˜¯åœ¨ç”¨åˆ°å®ƒä»¬æ—¶é‡æ–°è®¡ç®—ã€‚ä»…æ”¯æŒ Java å’Œ Scalaã€‚</td></tr><tr><td><code>DISK_ONLY</code></td><td>åªåœ¨ç£ç›˜ä¸Šç¼“å­˜ RDD</td></tr><tr><td><code>MEMORY_ONLY_2</code>, <br><code>MEMORY_AND_DISK_2</code>, etc</td><td>ä¸ä¸Šé¢çš„å¯¹åº”çº§åˆ«åŠŸèƒ½ç›¸åŒï¼Œä½†æ˜¯ä¼šä¸ºæ¯ä¸ªåˆ†åŒºåœ¨é›†ç¾¤ä¸­çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šå»ºç«‹å‰¯æœ¬ã€‚</td></tr><tr><td><code>OFF_HEAP</code></td><td>ä¸ <code>MEMORY_ONLY_SER</code> ç±»ä¼¼ï¼Œä½†å°†æ•°æ®å­˜å‚¨åœ¨å †å¤–å†…å­˜ä¸­ã€‚è¿™éœ€è¦å¯ç”¨å †å¤–å†…å­˜ã€‚</td></tr></tbody></table><blockquote><p>å¯åŠ¨å †å¤–å†…å­˜éœ€è¦é…ç½®ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li><strong>spark.memory.offHeap.enabled</strong> ï¼šæ˜¯å¦å¼€å¯å †å¤–å†…å­˜ï¼Œé»˜è®¤å€¼ä¸º falseï¼Œéœ€è¦è®¾ç½®ä¸º trueï¼›</li><li><strong>spark.memory.offHeap.size</strong> : å †å¤–å†…å­˜ç©ºé—´çš„å¤§å°ï¼Œé»˜è®¤å€¼ä¸º 0ï¼Œéœ€è¦è®¾ç½®ä¸ºæ­£å€¼ã€‚</li></ul></blockquote><h3 id="4-2-ä½¿ç”¨ç¼“å­˜"><a href="#4-2-ä½¿ç”¨ç¼“å­˜" class="headerlink" title="4.2 ä½¿ç”¨ç¼“å­˜"></a>4.2 ä½¿ç”¨ç¼“å­˜</h3><p>ç¼“å­˜æ•°æ®çš„æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š<code>persist</code> å’Œ <code>cache</code> ã€‚<code>cache</code> å†…éƒ¨è°ƒç”¨çš„ä¹Ÿæ˜¯ <code>persist</code>ï¼Œå®ƒæ˜¯ <code>persist</code> çš„ç‰¹æ®ŠåŒ–å½¢å¼ï¼Œç­‰ä»·äº <code>persist(StorageLevel.MEMORY_ONLY)</code>ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-scala"><code class="language-scala"><span class="token comment" spellcheck="true">// æ‰€æœ‰å­˜å‚¨çº§åˆ«å‡å®šä¹‰åœ¨ StorageLevel å¯¹è±¡ä¸­</span>fileRDD<span class="token punctuation">.</span>persist<span class="token punctuation">(</span>StorageLevel<span class="token punctuation">.</span>MEMORY_AND_DISK<span class="token punctuation">)</span>fileRDD<span class="token punctuation">.</span>cache<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="4-3-ç§»é™¤ç¼“å­˜"><a href="#4-3-ç§»é™¤ç¼“å­˜" class="headerlink" title="4.3 ç§»é™¤ç¼“å­˜"></a>4.3 ç§»é™¤ç¼“å­˜</h3><p>Spark ä¼šè‡ªåŠ¨ç›‘è§†æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ç¼“å­˜ä½¿ç”¨æƒ…å†µï¼Œå¹¶æŒ‰ç…§æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLRUï¼‰çš„è§„åˆ™åˆ é™¤æ—§æ•°æ®åˆ†åŒºã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>RDD.unpersist()</code> æ–¹æ³•è¿›è¡Œæ‰‹åŠ¨åˆ é™¤ã€‚</p><h2 id="äº”ã€ç†è§£shuffle"><a href="#äº”ã€ç†è§£shuffle" class="headerlink" title="äº”ã€ç†è§£shuffle"></a>äº”ã€ç†è§£shuffle</h2><h3 id="5-1-shuffleä»‹ç»"><a href="#5-1-shuffleä»‹ç»" class="headerlink" title="5.1 shuffleä»‹ç»"></a>5.1 shuffleä»‹ç»</h3><p>åœ¨ Spark ä¸­ï¼Œä¸€ä¸ªä»»åŠ¡å¯¹åº”ä¸€ä¸ªåˆ†åŒºï¼Œé€šå¸¸ä¸ä¼šè·¨åˆ†åŒºæ“ä½œæ•°æ®ã€‚ä½†å¦‚æœé‡åˆ° <code>reduceByKey</code> ç­‰æ“ä½œï¼ŒSpark å¿…é¡»ä»æ‰€æœ‰åˆ†åŒºè¯»å–æ•°æ®ï¼Œå¹¶æŸ¥æ‰¾æ‰€æœ‰é”®çš„æ‰€æœ‰å€¼ï¼Œç„¶åæ±‡æ€»åœ¨ä¸€èµ·ä»¥è®¡ç®—æ¯ä¸ªé”®çš„æœ€ç»ˆç»“æœ ï¼Œè¿™ç§°ä¸º <code>Shuffle</code>ã€‚</p><div align="center"> <img width="600px" src="https://hualei.online/medias/pictures/spark-reducebykey.png"> </div><h3 id="5-2-Shuffleçš„å½±å“"><a href="#5-2-Shuffleçš„å½±å“" class="headerlink" title="5.2 Shuffleçš„å½±å“"></a>5.2 Shuffleçš„å½±å“</h3><p>Shuffle æ˜¯ä¸€é¡¹æ˜‚è´µçš„æ“ä½œï¼Œå› ä¸ºå®ƒé€šå¸¸ä¼šè·¨èŠ‚ç‚¹æ“ä½œæ•°æ®ï¼Œè¿™ä¼šæ¶‰åŠç£ç›˜ I/Oï¼Œç½‘ç»œ I/Oï¼Œå’Œæ•°æ®åºåˆ—åŒ–ã€‚æŸäº› Shuffle æ“ä½œè¿˜ä¼šæ¶ˆè€—å¤§é‡çš„å †å†…å­˜ï¼Œå› ä¸ºå®ƒä»¬ä½¿ç”¨å †å†…å­˜æ¥ä¸´æ—¶å­˜å‚¨éœ€è¦ç½‘ç»œä¼ è¾“çš„æ•°æ®ã€‚Shuffle è¿˜ä¼šåœ¨ç£ç›˜ä¸Šç”Ÿæˆå¤§é‡ä¸­é—´æ–‡ä»¶ï¼Œä» Spark 1.3 å¼€å§‹ï¼Œè¿™äº›æ–‡ä»¶å°†è¢«ä¿ç•™ï¼Œç›´åˆ°ç›¸åº”çš„ RDD ä¸å†ä½¿ç”¨å¹¶è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†é¿å…åœ¨è®¡ç®—æ—¶é‡å¤åˆ›å»º Shuffle æ–‡ä»¶ã€‚å¦‚æœåº”ç”¨ç¨‹åºé•¿æœŸä¿ç•™å¯¹è¿™äº› RDD çš„å¼•ç”¨ï¼Œåˆ™åƒåœ¾å›æ”¶å¯èƒ½åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´åæ‰ä¼šå‘ç”Ÿï¼Œè¿™æ„å‘³ç€é•¿æ—¶é—´è¿è¡Œçš„ Spark ä½œä¸šå¯èƒ½ä¼šå ç”¨å¤§é‡ç£ç›˜ç©ºé—´ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨ <code>spark.local.dir</code> å‚æ•°æ¥æŒ‡å®šè¿™äº›ä¸´æ—¶æ–‡ä»¶çš„å­˜å‚¨ç›®å½•ã€‚</p><h3 id="5-3-å¯¼è‡´Shuffleçš„æ“ä½œ"><a href="#5-3-å¯¼è‡´Shuffleçš„æ“ä½œ" class="headerlink" title="5.3 å¯¼è‡´Shuffleçš„æ“ä½œ"></a>5.3 å¯¼è‡´Shuffleçš„æ“ä½œ</h3><p>ç”±äº Shuffle æ“ä½œå¯¹æ€§èƒ½çš„å½±å“æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥éœ€è¦ç‰¹åˆ«æ³¨æ„ä½¿ç”¨ï¼Œä»¥ä¸‹æ“ä½œéƒ½ä¼šå¯¼è‡´ Shuffleï¼š</p><ul><li><strong>æ¶‰åŠåˆ°é‡æ–°åˆ†åŒºæ“ä½œ</strong>ï¼š å¦‚ <code>repartition</code> å’Œ <code>coalesce</code>ï¼›</li><li><strong>æ‰€æœ‰æ¶‰åŠåˆ° ByKey çš„æ“ä½œ</strong>ï¼šå¦‚ <code>groupByKey</code> å’Œ <code>reduceByKey</code>ï¼Œä½† <code>countByKey</code> é™¤å¤–ï¼›</li><li><strong>è”ç»“æ“ä½œ</strong>ï¼šå¦‚ <code>cogroup</code> å’Œ <code>join</code>ã€‚</li></ul><h2 id="äº”ã€å®½ä¾èµ–å’Œçª„ä¾èµ–"><a href="#äº”ã€å®½ä¾èµ–å’Œçª„ä¾èµ–" class="headerlink" title="äº”ã€å®½ä¾èµ–å’Œçª„ä¾èµ–"></a>äº”ã€å®½ä¾èµ–å’Œçª„ä¾èµ–</h2><p>RDD å’Œå®ƒçš„çˆ¶ RDD(s) ä¹‹é—´çš„ä¾èµ–å…³ç³»åˆ†ä¸ºä¸¤ç§ä¸åŒçš„ç±»å‹ï¼š</p><ul><li><strong>çª„ä¾èµ– (narrow dependency)</strong>ï¼šçˆ¶ RDDs çš„ä¸€ä¸ªåˆ†åŒºæœ€å¤šè¢«å­ RDDs ä¸€ä¸ªåˆ†åŒºæ‰€ä¾èµ–ï¼›</li><li><strong>å®½ä¾èµ– (wide dependency)</strong>ï¼šçˆ¶ RDDs çš„ä¸€ä¸ªåˆ†åŒºå¯ä»¥è¢«å­ RDDs çš„å¤šä¸ªå­åˆ†åŒºæ‰€ä¾èµ–ã€‚</li></ul><p>å¦‚ä¸‹å›¾ï¼Œæ¯ä¸€ä¸ªæ–¹æ¡†è¡¨ç¤ºä¸€ä¸ª RDDï¼Œå¸¦æœ‰é¢œè‰²çš„çŸ©å½¢è¡¨ç¤ºåˆ†åŒºï¼š</p><div align="center"> <img width="600px" src="https://hualei.online/medias/pictures/spark-çª„ä¾èµ–å’Œå®½ä¾èµ–.png"> </div><p>åŒºåˆ†è¿™ä¸¤ç§ä¾èµ–æ˜¯éå¸¸æœ‰ç”¨çš„ï¼š</p><ul><li>é¦–å…ˆï¼Œçª„ä¾èµ–å…è®¸åœ¨ä¸€ä¸ªé›†ç¾¤èŠ‚ç‚¹ä¸Šä»¥æµæ°´çº¿çš„æ–¹å¼ï¼ˆpipelineï¼‰å¯¹çˆ¶åˆ†åŒºæ•°æ®è¿›è¡Œè®¡ç®—ï¼Œä¾‹å¦‚å…ˆæ‰§è¡Œ map æ“ä½œï¼Œç„¶åæ‰§è¡Œ filter æ“ä½œã€‚è€Œå®½ä¾èµ–åˆ™éœ€è¦è®¡ç®—å¥½æ‰€æœ‰çˆ¶åˆ†åŒºçš„æ•°æ®ï¼Œç„¶åå†åœ¨èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œ Shuffleï¼Œè¿™ä¸ MapReduce ç±»ä¼¼ã€‚</li><li>çª„ä¾èµ–èƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°è¿›è¡Œæ•°æ®æ¢å¤ï¼Œå› ä¸ºåªéœ€é‡æ–°å¯¹ä¸¢å¤±åˆ†åŒºçš„çˆ¶åˆ†åŒºè¿›è¡Œè®¡ç®—ï¼Œä¸”ä¸åŒèŠ‚ç‚¹ä¹‹é—´å¯ä»¥å¹¶è¡Œè®¡ç®—ï¼›è€Œå¯¹äºå®½ä¾èµ–è€Œè¨€ï¼Œå¦‚æœæ•°æ®ä¸¢å¤±ï¼Œåˆ™éœ€è¦å¯¹æ‰€æœ‰çˆ¶åˆ†åŒºæ•°æ®è¿›è¡Œè®¡ç®—å¹¶å†æ¬¡ Shuffleã€‚</li></ul><h2 id="å…­ã€DAGçš„ç”Ÿæˆ"><a href="#å…­ã€DAGçš„ç”Ÿæˆ" class="headerlink" title="å…­ã€DAGçš„ç”Ÿæˆ"></a>å…­ã€DAGçš„ç”Ÿæˆ</h2><p>RDD(s) åŠå…¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ç»„æˆäº† DAG(æœ‰å‘æ— ç¯å›¾)ï¼ŒDAG å®šä¹‰äº†è¿™äº› RDD(s) ä¹‹é—´çš„ Lineage(è¡€ç»Ÿ) å…³ç³»ï¼Œé€šè¿‡è¡€ç»Ÿå…³ç³»ï¼Œå¦‚æœä¸€ä¸ª RDD çš„éƒ¨åˆ†æˆ–è€…å…¨éƒ¨è®¡ç®—ç»“æœä¸¢å¤±äº†ï¼Œä¹Ÿå¯ä»¥é‡æ–°è¿›è¡Œè®¡ç®—ã€‚é‚£ä¹ˆ Spark æ˜¯å¦‚ä½•æ ¹æ® DAG æ¥ç”Ÿæˆè®¡ç®—ä»»åŠ¡å‘¢ï¼Ÿä¸»è¦æ˜¯æ ¹æ®ä¾èµ–å…³ç³»çš„ä¸åŒå°† DAG åˆ’åˆ†ä¸ºä¸åŒçš„è®¡ç®—é˜¶æ®µ (Stage)ï¼š</p><ul><li>å¯¹äºçª„ä¾èµ–ï¼Œç”±äºåˆ†åŒºçš„ä¾èµ–å…³ç³»æ˜¯ç¡®å®šçš„ï¼Œå…¶è½¬æ¢æ“ä½œå¯ä»¥åœ¨åŒä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œæ‰€ä»¥å¯ä»¥åˆ’åˆ†åˆ°åŒä¸€ä¸ªæ‰§è¡Œé˜¶æ®µï¼›</li><li>å¯¹äºå®½ä¾èµ–ï¼Œç”±äº Shuffle çš„å­˜åœ¨ï¼Œåªèƒ½åœ¨çˆ¶ RDD(s) è¢« Shuffle å¤„ç†å®Œæˆåï¼Œæ‰èƒ½å¼€å§‹æ¥ä¸‹æ¥çš„è®¡ç®—ï¼Œå› æ­¤é‡åˆ°å®½ä¾èµ–å°±éœ€è¦é‡æ–°åˆ’åˆ†é˜¶æ®µã€‚</li></ul><div align="center"> <img width="600px" height="600px" src="https://hualei.online/medias/pictures/spark-DAG.png"> </div><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li>å¼ å®‰ç«™ . Spark æŠ€æœ¯å†…å¹•ï¼šæ·±å…¥è§£æ Spark å†…æ ¸æ¶æ„è®¾è®¡ä¸å®ç°åŸç†[M] . æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾ . 2015-09-01</li><li><a href="https://spark.apache.org/docs/latest/rdd-programming-guide.html#rdd-programming-guide" target="_blank" rel="noopener">RDD Programming Guide</a></li><li><a href="http://shiyanjun.cn/archives/744.html" target="_blank" rel="noopener">RDDï¼šåŸºäºå†…å­˜çš„é›†ç¾¤è®¡ç®—å®¹é”™æŠ½è±¡</a></li></ol><p><strong>æŒç»­æ›´æ–°ä¸­â€¦ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æ¬¢è¿è”ç³»æˆ‘ï¼Œåœ¨æ–‡ç« æœ€åè¯„è®ºåŒºã€ç•™è¨€å’Œè®¨è®ºã€‘ï¼Œå½“ç„¶ï¼Œæ¬¢è¿ç‚¹å‡»æ–‡ç« æœ€åçš„æ‰“èµæŒ‰é”®ï¼Œè¯·åšä¸»ä¸€æ¯å†°é˜”ä¹ï¼Œç¬‘ï½</strong></p><table>  <tbody><tr>    <td><img width="100" src="https://hualei.online/medias/reward/alipay.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/wechat.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/zan.png"></td>     </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> äº’è”ç½‘ </tag>
            
            <tag> Sprak </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kafkaç®€ä»‹åŠå…¶ä½¿ç”¨</title>
      <link href="/posts/3bb2.html"/>
      <url>/posts/3bb2.html</url>
      
        <content type="html"><![CDATA[<p><strong>æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„æ–‡ç« :</strong></p><p><a href="http://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzU3MzgwNTU2Mg%3D%3D%26mid%3D100000472%26idx%3D1%26sn%3D99353b901d1174c3edd4a9ebbe394975%26chksm%3D7d3d444d4a4acd5bf0017210f55ec394abda01d163674d540988ca94863a51411be951711553%23rd" target="_blank" rel="noopener">Apache-Kafkaæ ¸å¿ƒæ¦‚å¿µ</a></p><p><a href="http://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzU3MzgwNTU2Mg%3D%3D%26mid%3D100000476%26idx%3D1%26sn%3D34b2127b1a09664087e3b2079844c2db%26chksm%3D7d3d44494a4acd5f3bc70d914ae2842409282780d19d57043d168895e55f160b3be7835e2446%23rd" target="_blank" rel="noopener">Apache-Kafkaæ ¸å¿ƒç»„ä»¶å’Œæµç¨‹-åè°ƒå™¨</a></p><p><a href="http://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzU3MzgwNTU2Mg%3D%3D%26mid%3D100000480%26idx%3D1%26sn%3D054cdf620eb82c4ecfaccd226d49d0e0%26chksm%3D7d3d44754a4acd638ca37afcfdaad802bb3dec01758b18cdf2c607ec494526832ee58ff43451%23rd" target="_blank" rel="noopener">Apache-Kafkaæ ¸å¿ƒç»„ä»¶å’Œæµç¨‹(å‰¯æœ¬ç®¡ç†å™¨)</a></p><p><a href="http://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzU3MzgwNTU2Mg%3D%3D%26mid%3D100000474%26idx%3D1%26sn%3Dc9b9d8fbb942f5299eb1d23a9363c0a4%26chksm%3D7d3d444f4a4acd597607e33ee59aad92db50084a5ab7edb84449df6f2f3ecc504e97f05977bb%23rd" target="_blank" rel="noopener">Apache-Kafka æ ¸å¿ƒç»„ä»¶å’Œæµç¨‹-æ§åˆ¶å™¨</a></p><p><a href="http://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzU3MzgwNTU2Mg%3D%3D%26mid%3D100000478%26idx%3D1%26sn%3Deeb3310214d7fa24ca86c4afad421baa%26chksm%3D7d3d444b4a4acd5d1987dc78f89d40a20833cec682b30b9f1a0735a26681f681a38853a6ff63%23rd" target="_blank" rel="noopener">Apache-Kafkaæ ¸å¿ƒç»„ä»¶å’Œæµç¨‹-æ—¥å¿—ç®¡ç†å™¨</a></p><p>â€¦.</p><h3 id="kafkaçš„å®šä½"><a href="#kafkaçš„å®šä½" class="headerlink" title="kafkaçš„å®šä½"></a><strong>kafkaçš„å®šä½</strong></h3><p>æåˆ°kafkaï¼Œä¸å¤ªç†Ÿæ‚‰æˆ–è€…ç¨æœ‰æ¥è§¦çš„å¼€å‘äººå‘˜ï¼Œç¬¬ä¸€æƒ³æ³•å¯èƒ½ä¼šè§‰å¾—å®ƒæ˜¯ä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿã€‚å…¶å®Kafkaçš„å®šä½å¹¶ä¸æ­¢äºæ­¤ã€‚</p><p>Kafkaå®˜æ–¹æ–‡æ¡£ä»‹ç»è¯´ï¼ŒApache Kafkaæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æµå¹³å°ï¼Œå¹¶ç»™å‡ºäº†å¦‚ä¸‹è§£é‡Šï¼š</p><p>æµå¹³å°æœ‰ä¸‰ä¸ªå…³é”®çš„èƒ½åŠ›ï¼š</p><ul><li>å‘å¸ƒè®¢é˜…è®°å½•æµï¼Œå’Œæ¶ˆæ¯é˜Ÿåˆ—æˆ–è€…ä¼ä¸šæ–°æ¶ˆæ¯ç³»ç»Ÿç±»ä¼¼ã€‚</li><li>ä»¥å¯å®¹é”™ã€æŒä¹…çš„æ–¹å¼ä¿å­˜è®°å½•æµ</li><li>å½“è®°å½•æµäº§ç”Ÿæ—¶å°±è¿›è¡Œå¤„ç†</li></ul><p>Kafkaé€šå¸¸ç”¨äºåº”ç”¨ä¸­çš„ä¸¤ç§å¹¿æ’­ç±»å‹ï¼š</p><ul><li>åœ¨ç³»ç»Ÿå’Œåº”ç”¨é—´å»ºç«‹å®æ—¶çš„æ•°æ®ç®¡é“ï¼Œèƒ½å¤Ÿå¯ä¿¡èµ–çš„è·å–æ•°æ®ã€‚</li><li>å»ºç«‹å®æ—¶çš„æµåº”ç”¨ï¼Œå¯ä»¥å¤„ç†æˆ–è€…å“åº”æ•°æ®æµã€‚</li></ul><p>ç”±æ­¤å¯è§ï¼Œkafkaç»™è‡ªèº«çš„å®šä½å¹¶ä¸åªæ˜¯ä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿï¼Œè€Œæ˜¯é€šè¿‡å‘å¸ƒè®¢é˜…æ¶ˆæ¯è¿™ç§æœºåˆ¶å®ç°äº†æµå¹³å°ã€‚</p><p>å…¶å®ä¸ç®¡kafkaç»™è‡ªå·±çš„å®šä½å¦‚ä½•ï¼Œä»–éƒ½é€ƒè„±ä¸äº†å‘å¸ƒè®¢é˜…æ¶ˆæ¯çš„åº•å±‚æœºåˆ¶ã€‚æœ¬æ–‡è®²è§£çš„é‡ç‚¹ï¼Œä¹Ÿæ˜¯kafkaå‘å¸ƒè®¢é˜…æ¶ˆæ¯çš„ç‰¹æ€§ã€‚</p><p>Kafkaå’Œå¤§å¤šæ•°æ¶ˆæ¯ç³»ç»Ÿä¸€æ ·ï¼Œæ­å»ºå¥½kafkaé›†ç¾¤åï¼Œç”Ÿäº§è€…å‘ç‰¹å®šçš„topicç”Ÿäº§æ¶ˆæ¯ï¼Œè€Œæ¶ˆè´¹è€…é€šè¿‡è®¢é˜…topicï¼Œèƒ½å¤Ÿå‡†å®æ—¶çš„æ‹‰å–åˆ°è¯¥topicæ–°æ¶ˆæ¯ï¼Œè¿›è¡Œæ¶ˆè´¹ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="http://upload-images.jianshu.io/upload_images/16241060-eabf90da50c94506.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><h3 id="Kafkaç‰¹æ€§"><a href="#Kafkaç‰¹æ€§" class="headerlink" title="Kafkaç‰¹æ€§"></a><strong>Kafkaç‰¹æ€§</strong></h3><p>kafkaå’Œæœ‰ä»¥ä¸‹ä¸»è¦çš„ç‰¹æ€§ï¼š</p><ul><li>æ¶ˆæ¯æŒä¹…åŒ–</li><li>é«˜ååé‡</li><li>å¯æ‰©å±•æ€§</li></ul><p>å°¤å…¶æ˜¯é«˜ååé‡ï¼Œæ˜¯ä»–çš„æœ€å¤§å–ç‚¹ã€‚kafkaä¹‹æ‰€ä»¥èƒ½å¤Ÿå®ç°é«˜ååé‡ï¼Œæ˜¯åŸºäºä»–è‡ªèº«ä¼˜è‰¯çš„è®¾è®¡ï¼ŒåŠé›†ç¾¤çš„å¯æ‰©å±•æ€§ã€‚åé¢ç« èŠ‚ä¼šå±•å¼€æ¥åˆ†æã€‚</p><h3 id="Kafkaåº”ç”¨åœºæ™¯"><a href="#Kafkaåº”ç”¨åœºæ™¯" class="headerlink" title="Kafkaåº”ç”¨åœºæ™¯"></a><strong>Kafkaåº”ç”¨åœºæ™¯</strong></h3><ul><li>æ¶ˆæ¯ç³»ç»Ÿ</li><li>æ—¥å¿—ç³»ç»Ÿ</li><li>æµå¤„ç†</li></ul><h3 id="å•æœºç¯å¢ƒ"><a href="#å•æœºç¯å¢ƒ" class="headerlink" title="å•æœºç¯å¢ƒ"></a><strong>å•æœºç¯å¢ƒ</strong></h3><p>å®˜æ–¹å»ºè®®ä½¿ç”¨JDK 1.8ç‰ˆæœ¬ï¼Œå› æ­¤æœ¬æ–‡ä½¿ç”¨çš„ç¯å¢ƒéƒ½æ˜¯JDK1.8ã€‚å…³äºJDKçš„å®‰è£…ï¼Œæœ¬æ–‡ä¸å†è¯¦è¿°ï¼Œé»˜è®¤Javaç¯å¢ƒå·²ç»å…·å¤‡ã€‚</p><p>ç”±äºKafkaä¾èµ–zookeeperï¼Œkafkaé€šè¿‡zookeeperç°å®åˆ†å¸ƒå¼ç³»ç»Ÿçš„åè°ƒï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…zookeeperã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤ï¼Œä¸€æ­¥æ­¥æ¥å®‰è£…kafkaï¼š</p><p>1ã€ä¸‹è½½zookeeperï¼Œè§£å‹ã€‚</p><p>ä¸‹è½½åœ°å€ï¼š<a href="http://link.zhihu.com/?target=https%3A//zookeeper.apache.org/releases.html%23download" target="_blank" rel="noopener">https://zookeeper.apache.org/releases.html#download</a></p><p>2ã€åˆ›å»ºzookeeperé…ç½®æ–‡ä»¶</p><p>åœ¨zookeeperè§£å‹åçš„ç›®å½•ä¸‹æ‰¾åˆ°confæ–‡ä»¶å¤¹ï¼Œè¿›å…¥åï¼Œå¤åˆ¶æ–‡ä»¶zoo_sample.cfgï¼Œå¹¶å‘½åä¸ºzoo.cfg</p><p>zoo.cfgä¸­ä¸€å…±å››ä¸ªé…ç½®é¡¹ï¼Œå¯ä»¥ä½¿ç”¨é»˜è®¤é…ç½®ã€‚</p><p>3ã€å¯åŠ¨zookeeperã€‚</p><p>è¿›å…¥zookeeperæ ¹ç›®å½•æ‰§è¡Œ bin/zkServer.sh start</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="http://upload-images.jianshu.io/upload_images/16241060-45642ac6542526af.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><p>4ã€ä¸‹è½½kafkaï¼Œè§£å‹ã€‚</p><p>kafka 2.0ç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼š<a href="http://link.zhihu.com/?target=https%3A//www.apache.org/dyn/closer.cgi%3Fpath%3D/kafka/2.0.0/kafka_2.11-2.0.0.tgz" target="_blank" rel="noopener">https://www.apache.org/dyn/closer.cgi?path=/kafka/2.0.0/kafka_2.11-2.0.0.tgz</a></p><p>5ã€ä¿®æ”¹kafkaçš„é…ç½®æ–‡ä»¶</p><p>è¿›å…¥kafkaæ ¹ç›®å½•ä¸‹çš„configæ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰“å¼€server.properties,ä¿®æ”¹å¦‚ä¸‹é…ç½®</p><p>zookeeper.connect=localhost:2181</p><p>broker.id=0</p><p>log.dirs=/tmp/kafka-logs</p><p>zookeeper.connectæ˜¯zookeeperçš„é“¾æ¥ä¿¡æ¯ï¼Œbroker.idæ˜¯å½“å‰kafkaå®ä¾‹çš„idï¼Œlog.dirsæ˜¯kafkaå­˜å‚¨æ¶ˆæ¯å†…å®¹çš„è·¯å¾„ã€‚</p><p>6ã€å¯åŠ¨kafka</p><p>è¿›å…¥kafkaæ ¹ç›®å½•æ‰§è¡Œ bin/kafka-server-start.sh config/server.properties</p><p>æ­¤å‘½ä»¤å‘Šè¯‰kakaå¯åŠ¨æ—¶ä½¿ç”¨config/server.propertiesé…ç½®é¡¹</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="http://upload-images.jianshu.io/upload_images/16241060-7daff2291823ea47.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><p>å¯åŠ¨kafkaåï¼Œå¦‚æœæ§åˆ¶å°æ²¡æœ‰æŠ¥é”™ä¿¡æ¯ï¼Œé‚£ä¹ˆkafkaåº”è¯¥å·²ç»å¯åŠ¨æˆåŠŸäº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹zookeeperä¸­ç›¸å…³èŠ‚ç‚¹å€¼æ¥ç¡®è®¤ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1ã€å¯åŠ¨zookeeperçš„client</p><p>è¿›å…¥zookeeperæ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ bin/zkCli.sh -server 127.0.0.1:2181ã€‚å¯åŠ¨æˆåŠŸåå¦‚ä¸‹å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="http://upload-images.jianshu.io/upload_images/16241060-e93e674f8687f166.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><p>2ã€è¾“å…¥å‘½ä»¤ ls /brokersï¼Œå›è½¦ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="http://upload-images.jianshu.io/upload_images/16241060-332ed3a117128b6a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><p>è¿™äº›å­èŠ‚ç‚¹å­˜å‚¨çš„å°±æ˜¯kafkaé›†ç¾¤ç®¡ç†çš„æ•°æ®ã€‚brokeræ˜¯kafkaçš„ä¸€ä¸ªæœåŠ¡å•å…ƒå®ä¾‹</p><p>3ã€æˆ‘çœ‹çœ‹ä¸€ä¸‹idsè¿™ä¸ªèŠ‚ç‚¹ä¸‹çš„æ•°æ®ï¼Œè¾“å…¥å‘½ä»¤ ls /brokers/idsï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="http://upload-images.jianshu.io/upload_images/16241060-d562b8ccbc167ca9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><p>è¿˜è®°å¾—æˆ‘ä»¬åœ¨é…ç½®å•æœºç¯å¢ƒæ—¶ï¼Œä¿®æ”¹çš„kafkaé…ç½®é¡¹broker.id=0 å—ï¼Ÿè¿™é‡Œçš„0å°±æ˜¯è¡¨ç¤ºé‚£ä¸ªkafkaçš„å®ä¾‹å·²ç»åŠ å…¥äº†kafkaé›†ç¾¤ã€‚</p><h3 id="é›†ç¾¤ç¯å¢ƒ"><a href="#é›†ç¾¤ç¯å¢ƒ" class="headerlink" title="é›†ç¾¤ç¯å¢ƒ"></a><strong>é›†ç¾¤ç¯å¢ƒ</strong></h3><p>é›†ç¾¤ç¯å¢ƒçš„æ­å»ºä¹Ÿå¾ˆç®€å•ï¼Œåœ¨å•æœºç¯å¢ƒçš„åŸºç¡€ä¸Šï¼Œè®©å¤šä¸ªå•æœºè¿æ¥åˆ°åŒä¸€ä¸ªzookeeperå³å¯ã€‚éœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š</p><p>1ã€æ¯ä¸ªå®ä¾‹è®¾ç½®ä¸åŒçš„broker.idã€‚</p><p>2ã€å¦‚æœå¤šä¸ªå®ä¾‹éƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ï¼Œè¿˜è¦æ³¨æ„ä¿®æ”¹log.dirsä¸ºä¸åŒç›®å½•ï¼Œç¡®ä¿æ¶ˆæ¯å­˜å‚¨æ—¶ä¸ä¼šæœ‰å†²çªã€‚é›†ç¾¤ç¯å¢ƒçš„å…·ä½“æ­å»ºï¼Œåœ¨æ­¤ç²¾ç®€æ•™ç¨‹ä¸­ä¸å†åšè¯¦ç»†è®¨è®ºã€‚</p><p>å‘å‡ºä½ çš„ç¬¬ä¸€æ¡kafkaæ¶ˆæ¯</p><p>æˆ‘ä»¬é€šè¿‡kafkaå¸¦çš„å·¥å…·æ¥åˆ›å»ºä¸€ä¸ªtopicï¼Œç„¶åå°è¯•å‘é€å’Œæ¶ˆè´¹ä¸€ä¸ªæ¶ˆæ¯ï¼Œç›´è§‚çš„å»æ„Ÿå—ä¸‹kafkaã€‚</p><p>1ã€åˆ›å»ºtopic</p><p>è¿›å…¥kafkaæ ¹ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><pre><code>bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic study</code></pre><p>æ‰§è¡ŒæˆåŠŸåï¼Œåˆ›å»ºäº†studyè¿™ä¸ªtopicï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="http://upload-images.jianshu.io/upload_images/16241060-1ee1e88312b5607e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><p>æ­¤å‘½ä»¤è¡Œæœ‰å‡ ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æŒ‡æ˜äº†zookeeperçš„é“¾æ¥ä¿¡æ¯ï¼Œåˆ†åŒºå’Œå‰¯æœ¬çš„æ•°é‡ç­‰ã€‚å…³äºåˆ†åŒºå’Œå‰¯æœ¬åç»­ä¼šä»”ç»†è®²è§£ï¼Œç°åœ¨ä¸ç”¨è¿‡å¤šå…³æ³¨ã€‚</p><p>2ã€å¯åŠ¨æ¶ˆè´¹è€…</p><p>æˆ‘ä»¬å¼€å¯ä¸€ä¸ªæ¶ˆè´¹è€…å¹¶ä¸”è®¢é˜…studyè¿™ä¸ªtopicï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤:</p><pre><code>bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic study --from-beginning</code></pre><p>çœ‹åˆ°å¦‚ä¸‹å›¾ï¼Œå…‰æ ‡åœç•™åœ¨æœ€å‰é¢ï¼Œæ²¡æœ‰ä»»ä½•ä¿¡æ¯è¾“å‡ºï¼Œè¯´æ˜å¯åŠ¨æ¶ˆè´¹è€…æˆåŠŸï¼Œæ­¤æ—¶åœ¨ç­‰å¾…æ–°çš„æ¶ˆæ¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="http://upload-images.jianshu.io/upload_images/16241060-4c9ec1250f2a7d52.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><p>3ã€å¼€å¯ç”Ÿäº§è€…</p><p>æ–°æ‰“å¼€ä¸€ä¸ªå‘½ä»¤çª—å£ï¼Œè¾“å…¥å‘½ä»¤</p><pre><code>bin/kafka-console-producer.sh --broker-list localhost:9092 --topic study</code></pre><p>å¯åŠ¨æˆåŠŸåï¼Œå¦‚ä¸‹å›¾ï¼Œç­‰å¾…ä½ è¾“å…¥æ–°çš„æ¶ˆæ¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="http://upload-images.jianshu.io/upload_images/16241060-1dc35a39b6a6c1a6.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><p>4ã€å‘é€ä½ çš„ç¬¬ä¸€æ¡æ¶ˆæ¯</p><p>åœ¨ä¸Šé¢ç”Ÿäº§è€…çš„çª—å£è¾“å…¥ä¸€æ¡æ¶ˆæ¯ hello kafka,ç‚¹å‡»å›è½¦ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="http://upload-images.jianshu.io/upload_images/16241060-aa03f34cc9fdc77d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><p>æ­¤æ—¶åˆ‡æ¢åˆ°æ¶ˆè´¹è€…çš„çª—å£ï¼Œå¯ä»¥çœ‹åˆ°æ¶ˆè´¹è€…å·²ç»æ¶ˆè´¹åˆ°è¿™æ¡æ¶ˆæ¯ï¼Œåœ¨çª—å£ä¸­æ‰“å°äº†å‡ºæ¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="http://upload-images.jianshu.io/upload_images/16241060-148e5147382d1712.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><p>è‡³æ­¤æˆ‘ä»¬èµ°å®Œäº†ä¸€ä¸ªå‘é€æ¶ˆæ¯çš„æµç¨‹ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç»å†äº†åˆ›å»ºtopicã€å¯åŠ¨ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…ã€ç”Ÿäº§è€…ç”Ÿäº§æ¶ˆæ¯ã€æ¶ˆè´¹è€…æ¶ˆè´¹æ¶ˆæ¯ï¼Œè¿™å‡ ä¸ªæ­¥éª¤ã€‚</p><p>å°ç»“ï¼šé€šè¿‡æœ¬ç« èŠ‚å­¦ä¹ ï¼Œç›¸ä¿¡ä½ å·²ç»èƒ½å¤ŸæˆåŠŸæ­å»ºèµ·kafkaå•æœºç¯å¢ƒï¼Œç”šè‡³é›†ç¾¤ç¯å¢ƒã€‚ç„¶åé€šè¿‡kafkaè‡ªå¸¦çš„å·¥å…·ï¼Œç›´è§‚çš„æ„Ÿå—äº†kafkaè¿è½¬çš„æ•´ä¸ªè¿‡ç¨‹ã€‚æ¥ä¸‹æ¥çš„ç« èŠ‚æˆ‘ä»¬å°†ä¼šè¿›å…¥kafkaçš„æ ¸å¿ƒé¢†åŸŸï¼Œä¹Ÿæ˜¯æœ¬æ•™ç¨‹çš„é‡ç‚¹ç« èŠ‚ï¼Œåªæœ‰ç†è§£äº†kafkaå†…åœ¨çš„è®¾è®¡ç†å¿µå’ŒåŸç†ï¼Œæ‰èƒ½åšåˆ°æ´»å­¦æ´»ç”¨ã€‚</p><p><strong>æŒç»­æ›´æ–°ä¸­â€¦ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æ¬¢è¿è”ç³»æˆ‘ï¼Œåœ¨æ–‡ç« æœ€åè¯„è®ºåŒºã€ç•™è¨€å’Œè®¨è®ºã€‘ï¼Œå½“ç„¶ï¼Œæ¬¢è¿ç‚¹å‡»æ–‡ç« æœ€åçš„æ‰“èµæŒ‰é”®ï¼Œè¯·åšä¸»ä¸€æ¯å†°é˜”ä¹ï¼Œç¬‘ï½</strong></p><table>  <tbody><tr>    <td><img width="100" src="https://hualei.online/medias/reward/alipay.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/wechat.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/zan.png"></td>     </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> äº’è”ç½‘ </tag>
            
            <tag> Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JVMå†…å­˜ç»“æ„</title>
      <link href="/posts/6c2c.html"/>
      <url>/posts/6c2c.html</url>
      
        <content type="html"><![CDATA[<h1 id="JVM-å†…å­˜ç»“æ„"><a href="#JVM-å†…å­˜ç»“æ„" class="headerlink" title="JVM å†…å­˜ç»“æ„"></a>JVM å†…å­˜ç»“æ„</h1><p>Java è™šæ‹Ÿæœºçš„å†…å­˜ç©ºé—´åˆ†ä¸º 5 ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>ç¨‹åºè®¡æ•°å™¨</li><li>Java è™šæ‹Ÿæœºæ ˆ</li><li>æœ¬åœ°æ–¹æ³•æ ˆ</li><li>å †</li><li>æ–¹æ³•åŒº<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/JVM%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/%E5%9B%BE%E7%89%87%E4%B8%80.jpg" alt="å›¾ç‰‡ä¸€"><br>JDK 1.8 åŒ JDK 1.7 æ¯”ï¼Œæœ€å¤§çš„å·®åˆ«å°±æ˜¯ï¼šå…ƒæ•°æ®åŒºå–ä»£äº†æ°¸ä¹…ä»£ã€‚å…ƒç©ºé—´çš„æœ¬è´¨å’Œæ°¸ä¹…ä»£ç±»ä¼¼ï¼Œéƒ½æ˜¯å¯¹ JVM è§„èŒƒä¸­æ–¹æ³•åŒºçš„å®ç°ã€‚ä¸è¿‡å…ƒç©ºé—´ä¸æ°¸ä¹…ä»£ä¹‹é—´æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šå…ƒæ•°æ®ç©ºé—´å¹¶ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ã€‚</li></ul><h2 id="ç¨‹åºè®¡æ•°å™¨ï¼ˆPC-å¯„å­˜å™¨ï¼‰"><a href="#ç¨‹åºè®¡æ•°å™¨ï¼ˆPC-å¯„å­˜å™¨ï¼‰" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨ï¼ˆPC å¯„å­˜å™¨ï¼‰"></a>ç¨‹åºè®¡æ•°å™¨ï¼ˆPC å¯„å­˜å™¨ï¼‰</h2><h3 id="ç¨‹åºè®¡æ•°å™¨çš„å®šä¹‰"><a href="#ç¨‹åºè®¡æ•°å™¨çš„å®šä¹‰" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨çš„å®šä¹‰"></a>ç¨‹åºè®¡æ•°å™¨çš„å®šä¹‰</h3><p>ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œæ˜¯å½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„é‚£æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ã€‚è‹¥å½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶ç¨‹åºè®¡æ•°å™¨ä¸º<code>Undefined</code>ã€‚</p><h3 id="ç¨‹åºè®¡æ•°å™¨çš„ä½œç”¨"><a href="#ç¨‹åºè®¡æ•°å™¨çš„ä½œç”¨" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨çš„ä½œç”¨"></a>ç¨‹åºè®¡æ•°å™¨çš„ä½œç”¨</h3><ul><li>å­—èŠ‚ç è§£é‡Šå™¨é€šè¿‡æ”¹å˜ç¨‹åºè®¡æ•°å™¨æ¥ä¾æ¬¡è¯»å–æŒ‡ä»¤ï¼Œä»è€Œå®ç°ä»£ç çš„æµç¨‹æ§åˆ¶ã€‚</li><li>åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œç¨‹åºè®¡æ•°å™¨è®°å½•çš„æ˜¯å½“å‰çº¿ç¨‹æ‰§è¡Œçš„ä½ç½®ï¼Œä»è€Œå½“çº¿ç¨‹åˆ‡æ¢å›æ¥æ—¶ï¼Œå°±çŸ¥é“ä¸Šæ¬¡çº¿ç¨‹æ‰§è¡Œåˆ°å“ªäº†ã€‚</li></ul><h3 id="ç¨‹åºè®¡æ•°å™¨çš„ç‰¹ç‚¹"><a href="#ç¨‹åºè®¡æ•°å™¨çš„ç‰¹ç‚¹" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨çš„ç‰¹ç‚¹"></a>ç¨‹åºè®¡æ•°å™¨çš„ç‰¹ç‚¹</h3><ul><li>æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ã€‚</li><li>çº¿ç¨‹ç§æœ‰ï¼Œæ¯æ¡çº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ã€‚</li><li>ç”Ÿå‘½å‘¨æœŸï¼šéšç€çº¿ç¨‹çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œéšç€çº¿ç¨‹çš„ç»“æŸè€Œé”€æ¯ã€‚</li><li>æ˜¯å”¯ä¸€ä¸€ä¸ªä¸ä¼šå‡ºç°<code>OutOfMemoryError</code>çš„å†…å­˜åŒºåŸŸã€‚</li></ul><h2 id="Java-è™šæ‹Ÿæœºæ ˆï¼ˆJava-æ ˆï¼‰"><a href="#Java-è™šæ‹Ÿæœºæ ˆï¼ˆJava-æ ˆï¼‰" class="headerlink" title="Java è™šæ‹Ÿæœºæ ˆï¼ˆJava æ ˆï¼‰"></a>Java è™šæ‹Ÿæœºæ ˆï¼ˆJava æ ˆï¼‰</h2><h3 id="Java-è™šæ‹Ÿæœºæ ˆçš„å®šä¹‰"><a href="#Java-è™šæ‹Ÿæœºæ ˆçš„å®šä¹‰" class="headerlink" title="Java è™šæ‹Ÿæœºæ ˆçš„å®šä¹‰"></a>Java è™šæ‹Ÿæœºæ ˆçš„å®šä¹‰</h3><p>Java è™šæ‹Ÿæœºæ ˆæ˜¯æè¿° Java æ–¹æ³•è¿è¡Œè¿‡ç¨‹çš„å†…å­˜æ¨¡å‹ã€‚</p><p>Java è™šæ‹Ÿæœºæ ˆä¼šä¸ºæ¯ä¸€ä¸ªå³å°†è¿è¡Œçš„ Java æ–¹æ³•åˆ›å»ºä¸€å—å«åšâ€œæ ˆå¸§â€çš„åŒºåŸŸï¼Œç”¨äºå­˜æ”¾è¯¥æ–¹æ³•è¿è¡Œè¿‡ç¨‹ä¸­çš„ä¸€äº›ä¿¡æ¯ï¼Œå¦‚ï¼š</p><ul><li>å±€éƒ¨å˜é‡è¡¨</li><li>æ“ä½œæ•°æ ˆ</li><li>åŠ¨æ€é“¾æ¥</li><li>æ–¹æ³•å‡ºå£ä¿¡æ¯</li><li>â€¦â€¦</li></ul><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/JVM%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/%E5%9B%BE%E7%89%87%E4%BA%8C.jpg" alt="å›¾ç‰‡äºŒ"></p><h3 id="å‹æ ˆå‡ºæ ˆè¿‡ç¨‹"><a href="#å‹æ ˆå‡ºæ ˆè¿‡ç¨‹" class="headerlink" title="å‹æ ˆå‡ºæ ˆè¿‡ç¨‹"></a>å‹æ ˆå‡ºæ ˆè¿‡ç¨‹</h3><p>å½“æ–¹æ³•è¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦åˆ›å»ºå±€éƒ¨å˜é‡æ—¶ï¼Œå°±å°†å±€éƒ¨å˜é‡çš„å€¼å­˜å…¥æ ˆå¸§ä¸­çš„å±€éƒ¨å˜é‡è¡¨ä¸­ã€‚</p><p>Java è™šæ‹Ÿæœºæ ˆçš„æ ˆé¡¶çš„æ ˆå¸§æ˜¯å½“å‰æ­£åœ¨æ‰§è¡Œçš„æ´»åŠ¨æ ˆï¼Œä¹Ÿå°±æ˜¯å½“å‰æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•ï¼ŒPC å¯„å­˜å™¨ä¹Ÿä¼šæŒ‡å‘è¿™ä¸ªåœ°å€ã€‚åªæœ‰è¿™ä¸ªæ´»åŠ¨çš„æ ˆå¸§çš„æœ¬åœ°å˜é‡å¯ä»¥è¢«æ“ä½œæ•°æ ˆä½¿ç”¨ï¼Œå½“åœ¨è¿™ä¸ªæ ˆå¸§ä¸­è°ƒç”¨å¦ä¸€ä¸ªæ–¹æ³•ï¼Œä¸ä¹‹å¯¹åº”çš„æ ˆå¸§åˆä¼šè¢«åˆ›å»ºï¼Œæ–°åˆ›å»ºçš„æ ˆå¸§å‹å…¥æ ˆé¡¶ï¼Œå˜ä¸ºå½“å‰çš„æ´»åŠ¨æ ˆå¸§ã€‚</p><p>æ–¹æ³•ç»“æŸåï¼Œå½“å‰æ ˆå¸§è¢«ç§»å‡ºï¼Œæ ˆå¸§çš„è¿”å›å€¼å˜æˆæ–°çš„æ´»åŠ¨æ ˆå¸§ä¸­æ“ä½œæ•°æ ˆçš„ä¸€ä¸ªæ“ä½œæ•°ã€‚å¦‚æœæ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆæ–°çš„æ´»åŠ¨æ ˆå¸§ä¸­æ“ä½œæ•°æ ˆçš„æ“ä½œæ•°æ²¡æœ‰å˜åŒ–ã€‚</p><blockquote><p>ç”±äºJava è™šæ‹Ÿæœºæ ˆæ˜¯ä¸çº¿ç¨‹å¯¹åº”çš„ï¼Œæ•°æ®ä¸æ˜¯çº¿ç¨‹å…±äº«çš„ï¼Œå› æ­¤ä¸ç”¨å…³å¿ƒæ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œä¹Ÿä¸ä¼šå­˜åœ¨åŒæ­¥é”çš„é—®é¢˜ã€‚</p></blockquote><h3 id="Java-è™šæ‹Ÿæœºæ ˆçš„ç‰¹ç‚¹"><a href="#Java-è™šæ‹Ÿæœºæ ˆçš„ç‰¹ç‚¹" class="headerlink" title="Java è™šæ‹Ÿæœºæ ˆçš„ç‰¹ç‚¹"></a>Java è™šæ‹Ÿæœºæ ˆçš„ç‰¹ç‚¹</h3><ul><li>å±€éƒ¨å˜é‡è¡¨éšç€æ ˆå¸§çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œå®ƒçš„å¤§å°åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œåˆ›å»ºæ—¶åªéœ€åˆ†é…äº‹å…ˆè§„å®šçš„å¤§å°å³å¯ã€‚åœ¨æ–¹æ³•è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå±€éƒ¨å˜é‡è¡¨çš„å¤§å°ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚</li><li>Java è™šæ‹Ÿæœºæ ˆä¼šå‡ºç°ä¸¤ç§å¼‚å¸¸ï¼šStackOverFlowError å’Œ OutOfMemoryErrorã€‚</li><li>StackOverFlowError  è‹¥ Java è™šæ‹Ÿæœºæ ˆçš„å¤§å°ä¸å…è®¸åŠ¨æ€æ‰©å±•ï¼Œé‚£ä¹ˆå½“çº¿ç¨‹è¯·æ±‚æ ˆçš„æ·±åº¦è¶…è¿‡å½“å‰ Java è™šæ‹Ÿæœºæ ˆçš„æœ€å¤§æ·±åº¦æ—¶ï¼ŒæŠ›å‡º StackOverFlowError å¼‚å¸¸ã€‚</li><li>OutOfMemoryError  è‹¥å…è®¸åŠ¨æ€æ‰©å±•ï¼Œé‚£ä¹ˆå½“çº¿ç¨‹è¯·æ±‚æ ˆæ—¶å†…å­˜ç”¨å®Œäº†ï¼Œæ— æ³•å†åŠ¨æ€æ‰©å±•æ—¶ï¼ŒæŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</li><li>Java è™šæ‹Ÿæœºæ ˆä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰ï¼Œéšç€çº¿ç¨‹åˆ›å»ºè€Œåˆ›å»ºï¼Œéšç€çº¿ç¨‹çš„ç»“æŸè€Œé”€æ¯ã€‚</li></ul><blockquote><p>å‡ºç° StackOverFlowError æ—¶ï¼Œå†…å­˜ç©ºé—´å¯èƒ½è¿˜æœ‰å¾ˆå¤šã€‚</p></blockquote><h2 id="æœ¬åœ°æ–¹æ³•æ ˆï¼ˆC-æ ˆï¼‰"><a href="#æœ¬åœ°æ–¹æ³•æ ˆï¼ˆC-æ ˆï¼‰" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆï¼ˆC æ ˆï¼‰"></a>æœ¬åœ°æ–¹æ³•æ ˆï¼ˆC æ ˆï¼‰</h2><h3 id="æœ¬åœ°æ–¹æ³•æ ˆçš„å®šä¹‰"><a href="#æœ¬åœ°æ–¹æ³•æ ˆçš„å®šä¹‰" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆçš„å®šä¹‰"></a>æœ¬åœ°æ–¹æ³•æ ˆçš„å®šä¹‰</h3><p>æœ¬åœ°æ–¹æ³•æ ˆæ˜¯ä¸º JVM è¿è¡Œ Native æ–¹æ³•å‡†å¤‡çš„ç©ºé—´ï¼Œç”±äºå¾ˆå¤š Native æ–¹æ³•éƒ½æ˜¯ç”¨ C è¯­è¨€å®ç°çš„ï¼Œæ‰€ä»¥å®ƒé€šå¸¸åˆå« C æ ˆã€‚å®ƒä¸ Java è™šæ‹Ÿæœºæ ˆå®ç°çš„åŠŸèƒ½ç±»ä¼¼ï¼Œåªä¸è¿‡æœ¬åœ°æ–¹æ³•æ ˆæ˜¯æè¿°æœ¬åœ°æ–¹æ³•è¿è¡Œè¿‡ç¨‹çš„å†…å­˜æ¨¡å‹ã€‚</p><h3 id="æ ˆå¸§å˜åŒ–è¿‡ç¨‹"><a href="#æ ˆå¸§å˜åŒ–è¿‡ç¨‹" class="headerlink" title="æ ˆå¸§å˜åŒ–è¿‡ç¨‹"></a>æ ˆå¸§å˜åŒ–è¿‡ç¨‹</h3><p>æœ¬åœ°æ–¹æ³•è¢«æ‰§è¡Œæ—¶ï¼Œåœ¨æœ¬åœ°æ–¹æ³•æ ˆä¹Ÿä¼šåˆ›å»ºä¸€å—æ ˆå¸§ï¼Œç”¨äºå­˜æ”¾è¯¥æ–¹æ³•çš„å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ä¿¡æ¯ç­‰ã€‚</p><p>æ–¹æ³•æ‰§è¡Œç»“æŸåï¼Œç›¸åº”çš„æ ˆå¸§ä¹Ÿä¼šå‡ºæ ˆï¼Œå¹¶é‡Šæ”¾å†…å­˜ç©ºé—´ã€‚ä¹Ÿä¼šæŠ›å‡º StackOverFlowError å’Œ OutOfMemoryError å¼‚å¸¸ã€‚</p><blockquote><p>å¦‚æœ Java è™šæ‹Ÿæœºæœ¬èº«ä¸æ”¯æŒ Native æ–¹æ³•ï¼Œæˆ–æ˜¯æœ¬èº«ä¸ä¾èµ–äºä¼ ç»Ÿæ ˆï¼Œé‚£ä¹ˆå¯ä»¥ä¸æä¾›æœ¬åœ°æ–¹æ³•æ ˆã€‚å¦‚æœæ”¯æŒæœ¬åœ°æ–¹æ³•æ ˆï¼Œé‚£ä¹ˆè¿™ä¸ªæ ˆä¸€èˆ¬ä¼šåœ¨çº¿ç¨‹åˆ›å»ºçš„æ—¶å€™æŒ‰çº¿ç¨‹åˆ†é…ã€‚</p></blockquote><h2 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h2><h3 id="å †çš„å®šä¹‰"><a href="#å †çš„å®šä¹‰" class="headerlink" title="å †çš„å®šä¹‰"></a>å †çš„å®šä¹‰</h3><p>å †æ˜¯ç”¨æ¥å­˜æ”¾å¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡éƒ½å­˜å‚¨åœ¨å †ä¸­ã€‚</p><h3 id="å †çš„ç‰¹ç‚¹"><a href="#å †çš„ç‰¹ç‚¹" class="headerlink" title="å †çš„ç‰¹ç‚¹"></a>å †çš„ç‰¹ç‚¹</h3><ul><li>çº¿ç¨‹å…±äº«ï¼Œæ•´ä¸ª Java è™šæ‹Ÿæœºåªæœ‰ä¸€ä¸ªå †ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½è®¿é—®åŒä¸€ä¸ªå †ã€‚è€Œç¨‹åºè®¡æ•°å™¨ã€Java è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆéƒ½æ˜¯ä¸€ä¸ªçº¿ç¨‹å¯¹åº”ä¸€ä¸ªã€‚</li><li>åœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚</li><li>æ˜¯åƒåœ¾å›æ”¶çš„ä¸»è¦åœºæ‰€ã€‚</li><li>è¿›ä¸€æ­¥å¯åˆ†ä¸ºï¼šæ–°ç”Ÿä»£(EdenåŒº  From Survior  To Survivor)ã€è€å¹´ä»£ã€‚</li></ul><p>ä¸åŒçš„åŒºåŸŸå­˜æ”¾ä¸åŒç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥æ ¹æ®ä¸åŒçš„åŒºåŸŸä½¿ç”¨ä¸åŒçš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Œæ›´å…·æœ‰é’ˆå¯¹æ€§ã€‚</p><p>å †çš„å¤§å°æ—¢å¯ä»¥å›ºå®šä¹Ÿå¯ä»¥æ‰©å±•ï¼Œä½†å¯¹äºä¸»æµçš„è™šæ‹Ÿæœºï¼Œå †çš„å¤§å°æ˜¯å¯æ‰©å±•çš„ï¼Œå› æ­¤å½“çº¿ç¨‹è¯·æ±‚åˆ†é…å†…å­˜ï¼Œä½†å †å·²æ»¡ï¼Œä¸”å†…å­˜å·²æ— æ³•å†æ‰©å±•æ—¶ï¼Œå°±æŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p><blockquote><p>Java å †æ‰€ä½¿ç”¨çš„å†…å­˜ä¸éœ€è¦ä¿è¯æ˜¯è¿ç»­çš„ã€‚è€Œç”±äºå †æ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ï¼Œæ‰€ä»¥å¯¹å®ƒçš„è®¿é—®éœ€è¦æ³¨æ„åŒæ­¥é—®é¢˜ï¼Œæ–¹æ³•å’Œå¯¹åº”çš„å±æ€§éƒ½éœ€è¦ä¿è¯ä¸€è‡´æ€§ã€‚</p></blockquote><h2 id="æ–¹æ³•åŒº"><a href="#æ–¹æ³•åŒº" class="headerlink" title="æ–¹æ³•åŒº"></a>æ–¹æ³•åŒº</h2><h3 id="æ–¹æ³•åŒºçš„å®šä¹‰"><a href="#æ–¹æ³•åŒºçš„å®šä¹‰" class="headerlink" title="æ–¹æ³•åŒºçš„å®šä¹‰"></a>æ–¹æ³•åŒºçš„å®šä¹‰</h3><p>Java è™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰æ–¹æ³•åŒºæ˜¯å †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ã€‚æ–¹æ³•åŒºå­˜æ”¾ä»¥ä¸‹ä¿¡æ¯ï¼š  </p><ul><li>å·²ç»è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯</li><li>å¸¸é‡</li><li>é™æ€å˜é‡</li><li>å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç </li></ul><h3 id="æ–¹æ³•åŒºçš„ç‰¹ç‚¹"><a href="#æ–¹æ³•åŒºçš„ç‰¹ç‚¹" class="headerlink" title="æ–¹æ³•åŒºçš„ç‰¹ç‚¹"></a>æ–¹æ³•åŒºçš„ç‰¹ç‚¹</h3><ul><li>çº¿ç¨‹å…±äº«ã€‚  æ–¹æ³•åŒºæ˜¯å †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œå› æ­¤å’Œå †ä¸€æ ·ï¼Œéƒ½æ˜¯çº¿ç¨‹å…±äº«çš„ã€‚æ•´ä¸ªè™šæ‹Ÿæœºä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•åŒºã€‚</li><li>æ°¸ä¹…ä»£ã€‚  æ–¹æ³•åŒºä¸­çš„ä¿¡æ¯ä¸€èˆ¬éœ€è¦é•¿æœŸå­˜åœ¨ï¼Œè€Œä¸”å®ƒåˆæ˜¯å †çš„é€»è¾‘åˆ†åŒºï¼Œå› æ­¤ç”¨å †çš„åˆ’åˆ†æ–¹æ³•ï¼ŒæŠŠæ–¹æ³•åŒºç§°ä¸ºâ€œæ°¸ä¹…ä»£â€ã€‚</li><li>å†…å­˜å›æ”¶æ•ˆç‡ä½ã€‚  æ–¹æ³•åŒºä¸­çš„ä¿¡æ¯ä¸€èˆ¬éœ€è¦é•¿æœŸå­˜åœ¨ï¼Œå›æ”¶ä¸€éä¹‹åå¯èƒ½åªæœ‰å°‘é‡ä¿¡æ¯æ— æ•ˆã€‚ä¸»è¦å›æ”¶ç›®æ ‡æ˜¯ï¼šå¯¹å¸¸é‡æ± çš„å›æ”¶ï¼›å¯¹ç±»å‹çš„å¸è½½ã€‚</li><li>Java è™šæ‹Ÿæœºè§„èŒƒå¯¹æ–¹æ³•åŒºçš„è¦æ±‚æ¯”è¾ƒå®½æ¾ã€‚  å’Œå †ä¸€æ ·ï¼Œå…è®¸å›ºå®šå¤§å°ï¼Œä¹Ÿå…è®¸åŠ¨æ€æ‰©å±•ï¼Œè¿˜å…è®¸ä¸å®ç°åƒåœ¾å›æ”¶ã€‚</li></ul><h3 id="è¿è¡Œæ—¶å¸¸é‡æ± "><a href="#è¿è¡Œæ—¶å¸¸é‡æ± " class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± "></a>è¿è¡Œæ—¶å¸¸é‡æ± </h3><p>æ–¹æ³•åŒºä¸­å­˜æ”¾ï¼šç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ã€‚å¸¸é‡å°±å­˜æ”¾åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚</p><p>å½“ç±»è¢« Java è™šæ‹ŸæœºåŠ è½½åï¼Œ .class æ–‡ä»¶ä¸­çš„å¸¸é‡å°±å­˜æ”¾åœ¨æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚è€Œä¸”åœ¨è¿è¡ŒæœŸé—´ï¼Œå¯ä»¥å‘å¸¸é‡æ± ä¸­æ·»åŠ æ–°çš„å¸¸é‡ã€‚å¦‚ String ç±»çš„ intern() æ–¹æ³•å°±èƒ½åœ¨è¿è¡ŒæœŸé—´å‘å¸¸é‡æ± ä¸­æ·»åŠ å­—ç¬¦ä¸²å¸¸é‡ã€‚</p><h2 id="ç›´æ¥å†…å­˜ï¼ˆå †å¤–å†…å­˜ï¼‰"><a href="#ç›´æ¥å†…å­˜ï¼ˆå †å¤–å†…å­˜ï¼‰" class="headerlink" title="ç›´æ¥å†…å­˜ï¼ˆå †å¤–å†…å­˜ï¼‰"></a>ç›´æ¥å†…å­˜ï¼ˆå †å¤–å†…å­˜ï¼‰</h2><p>ç›´æ¥å†…å­˜æ˜¯é™¤ Java è™šæ‹Ÿæœºä¹‹å¤–çš„å†…å­˜ï¼Œä½†ä¹Ÿå¯èƒ½è¢« Java ä½¿ç”¨ã€‚</p><h3 id="æ“ä½œç›´æ¥å†…å­˜"><a href="#æ“ä½œç›´æ¥å†…å­˜" class="headerlink" title="æ“ä½œç›´æ¥å†…å­˜"></a>æ“ä½œç›´æ¥å†…å­˜</h3><p>åœ¨ NIO ä¸­å¼•å…¥äº†ä¸€ç§åŸºäºé€šé“å’Œç¼“å†²çš„ IO æ–¹å¼ã€‚å®ƒå¯ä»¥é€šè¿‡è°ƒç”¨æœ¬åœ°æ–¹æ³•ç›´æ¥åˆ†é… Java è™šæ‹Ÿæœºä¹‹å¤–çš„å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨å †ä¸­çš„<code>DirectByteBuffer</code>å¯¹è±¡ç›´æ¥æ“ä½œè¯¥å†…å­˜ï¼Œè€Œæ— é¡»å…ˆå°†å¤–éƒ¨å†…å­˜ä¸­çš„æ•°æ®å¤åˆ¶åˆ°å †ä¸­å†è¿›è¡Œæ“ä½œï¼Œä»è€Œæé«˜äº†æ•°æ®æ“ä½œçš„æ•ˆç‡ã€‚</p><p>ç›´æ¥å†…å­˜çš„å¤§å°ä¸å— Java è™šæ‹Ÿæœºæ§åˆ¶ï¼Œä½†æ—¢ç„¶æ˜¯å†…å­˜ï¼Œå½“å†…å­˜ä¸è¶³æ—¶å°±ä¼šæŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p><h3 id="ç›´æ¥å†…å­˜ä¸å †å†…å­˜æ¯”è¾ƒ"><a href="#ç›´æ¥å†…å­˜ä¸å †å†…å­˜æ¯”è¾ƒ" class="headerlink" title="ç›´æ¥å†…å­˜ä¸å †å†…å­˜æ¯”è¾ƒ"></a>ç›´æ¥å†…å­˜ä¸å †å†…å­˜æ¯”è¾ƒ</h3><ul><li>ç›´æ¥å†…å­˜ç”³è¯·ç©ºé—´è€—è´¹æ›´é«˜çš„æ€§èƒ½</li><li>ç›´æ¥å†…å­˜è¯»å– IO çš„æ€§èƒ½è¦ä¼˜äºæ™®é€šçš„å †å†…å­˜ã€‚</li><li>ç›´æ¥å†…å­˜ä½œç”¨é“¾ï¼š æœ¬åœ° IO -&gt; ç›´æ¥å†…å­˜ -&gt; æœ¬åœ° IO</li><li>å †å†…å­˜ä½œç”¨é“¾ï¼šæœ¬åœ° IO -&gt; ç›´æ¥å†…å­˜ -&gt; éç›´æ¥å†…å­˜ -&gt; ç›´æ¥å†…å­˜ -&gt; æœ¬åœ° IO</li></ul><blockquote><p>æœåŠ¡å™¨ç®¡ç†å‘˜åœ¨é…ç½®è™šæ‹Ÿæœºå‚æ•°æ—¶ï¼Œä¼šæ ¹æ®å®é™…å†…å­˜è®¾ç½®<code>-Xmx</code>ç­‰å‚æ•°ä¿¡æ¯ï¼Œä½†ç»å¸¸å¿½ç•¥ç›´æ¥å†…å­˜ï¼Œä½¿å¾—å„ä¸ªå†…å­˜åŒºåŸŸæ€»å’Œå¤§äºç‰©ç†å†…å­˜é™åˆ¶ï¼Œä»è€Œå¯¼è‡´åŠ¨æ€æ‰©å±•æ—¶å‡ºç°<code>OutOfMemoryError</code>å¼‚å¸¸ã€‚</p></blockquote><hr><p><strong>æŒç»­æ›´æ–°ä¸­â€¦ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æ¬¢è¿è”ç³»æˆ‘ï¼Œåœ¨æ–‡ç« æœ€åè¯„è®ºåŒºã€ç•™è¨€å’Œè®¨è®ºã€‘ï¼Œå½“ç„¶ï¼Œæ¬¢è¿ç‚¹å‡»æ–‡ç« æœ€åçš„æ‰“èµæŒ‰é”®ï¼Œè¯·åšä¸»ä¸€æ¯å†°é˜”ä¹ï¼Œç¬‘ï½</strong></p><table>  <tbody><tr>    <td><img width="100" src="https://hualei.online/medias/reward/alipay.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/wechat.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/zan.png"></td>     </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äº’è”ç½‘ </tag>
            
            <tag> Java </tag>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hadoopæç®€å…¥é—¨</title>
      <link href="/posts/0.html"/>
      <url>/posts/0.html</url>
      
        <content type="html"><![CDATA[<p>å…¶å®Hadoopè¯ç”Ÿè‡³ä»Šå·²ç»åå¤šå¹´äº†ï¼Œç½‘ç»œä¸Šä¹Ÿå……æ–¥ç€å…³äºHadoopç›¸å…³çŸ¥è¯†çš„çš„æµ·é‡èµ„æºã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶è¿˜æ˜¯ä¼šä½¿åˆšåˆšæ¥è§¦å¤§æ•°æ®é¢†åŸŸçš„ç«¥é‹åˆ†ä¸æ¸…hadoopã€hdfsã€Yarnå’ŒMapReduceç­‰ç­‰æŠ€æœ¯è¯æ±‡ã€‚</p><p>Hadoopæ˜¯ASF(Apacheè½¯ä»¶åŸºé‡‘ä¼š)å¼€æºçš„ï¼Œæ ¹æ®Googleå¼€æºçš„ä¸‰ç¯‡å¤§æ•°æ®è®ºæ–‡è®¾è®¡çš„ï¼Œä¸€ä¸ªèƒ½å¤Ÿå…è®¸å¤§é‡æ•°æ®åœ¨è®¡ç®—æœºé›†ç¾¤ä¸­ï¼Œé€šè¿‡ä½¿ç”¨ç®€å•çš„ç¼–ç¨‹æ¨¡å‹è¿›è¡Œåˆ†å¸ƒå¼å¤„ç†çš„æ¡†æ¶ã€‚å…¶è®¾è®¡çš„è§„æ¨¡å¯ä»å•ä¸€çš„æœåŠ¡å™¨åˆ°æ•°åƒå°æœåŠ¡å™¨ï¼Œæ¯ä¸€ä¸ªå‡å¯æä¾›å±€éƒ¨è¿ç®—å’Œå­˜å‚¨åŠŸèƒ½ã€‚Hadoopå¹¶ä¸ä¾èµ–æ˜‚è´µçš„ç¡¬ä»¶ä»¥æ”¯æŒé«˜å¯ç”¨æ€§ã€‚Hadoopå¯ä»¥æ£€æµ‹å¹¶å¤„ç†åº”ç”¨å±‚ä¸Šçš„é”™è¯¯ï¼Œå¹¶å¯ä»¥æŠŠé”™è¯¯è½¬ç§»åˆ°å…¶ä»–æœåŠ¡å™¨ä¸Š(è®©å®ƒé”™è¯¯ï¼Œæˆ‘åœ¨ç”¨åˆ«çš„æœåŠ¡å™¨é¡¶ä¸Šå°±å¯ä»¥äº†)ï¼Œæ‰€ä»¥Hadoopæä¾›ä¸€ä¸ªåŸºäºè®¡ç®—æœºé›†ç¾¤çš„ã€é«˜æ•ˆæ€§çš„æœåŠ¡ã€‚</p><p>ç»è¿‡åå¹´çš„å‘å±•ï¼ŒHadoopè¿™ä¸ªåè¯çš„æœ¬èº«ä¹Ÿåœ¨ä¸æ–­è¿›åŒ–è€…ï¼Œç›®å‰æˆ‘ä»¬æåˆ°Hadoopå¤§å¤šæ˜¯æŒ‡å¤§æ•°æ®çš„ç”Ÿæ€åœˆï¼Œè¿™ä¸ªç”Ÿæ€åœˆåŒ…æ‹¬ä¼—å¤šçš„è½¯ä»¶æŠ€æœ¯(e.g.  HBaseã€Hiveå’ŒSparkç­‰ç­‰)ã€‚</p><p>æœ‰å¦‚Springæ¡†æ¶æœ‰ç€æœ€åŸºç¡€çš„å‡ ä¸ªæ¨¡å—Contextã€Beanå’ŒCoreï¼Œå…¶ä»–çš„æ¨¡å—å’Œé¡¹ç›®éƒ½æ˜¯åŸºäºè¿™äº›åŸºç¡€æ¨¡å—æ„å»ºã€‚Hadoopä¸ä¹‹ä¸€æ ·ï¼Œä¹Ÿæœ‰æœ€åŸºç¡€çš„å‡ ä¸ªæ¨¡å—ã€‚</p><p><strong>Common</strong>: æ”¯æŒå…¶ä»–æ¨¡å—çš„å…¬ç”¨å·¥å…·åŒ…ã€‚</p><p><strong>HDFS</strong>: ä¸€ä¸ªå¯é«˜ååè®¿é—®åº”ç”¨æ•°æ®çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</p><p><strong>YARN</strong>: ä¸€ä¸ªç®¡ç†é›†ç¾¤æœåŠ¡å™¨èµ„æºå’Œä»»åŠ¡è°ƒåº¦çš„æ¡†æ¶ã€‚</p><p><strong>MapReduce</strong>: åŸºäºYarnå¯¹å¤§æ•°æ®é›†è¿›è¡Œå¹¶è¡Œè®¡ç®—çš„ç³»ç»Ÿã€‚</p><p>å…¶å®ƒçš„ï¼ŒåƒHBaseã€Hiveç­‰ç­‰ä¸è¿‡åœ¨è¿™å‡ ä¸ªåŸºç¡€æ¨¡å—ä¸Šçš„é«˜çº§æŠ½è±¡ã€‚å¦å¤–Hadoopä¹Ÿä¸æ˜¯ç›®å‰å¤§æ•°æ®çš„å”¯ä¸€è§£å†³æ–¹æ¡ˆï¼ŒåƒAmazonçš„å¤§æ•°æ®æŠ€æœ¯æ–¹æ¡ˆç­‰ç­‰ã€‚</p><p>Common<br>Commonæ¨¡å—æ˜¯Hadoopæœ€ä¸ºåŸºç¡€çš„æ¨¡å—ï¼Œä»–ä¸ºå…¶ä»–æ¨¡å—æä¾›äº†åƒæ“ä½œæ–‡ä»¶ç³»ç»Ÿã€I/Oã€åºåˆ—åŒ–å’Œè¿œç¨‹æ–¹æ³•è°ƒç”¨ç­‰æœ€ä¸ºåŸºç¡€çš„å®ç°ã€‚å¦‚æœæƒ³æ·±å…¥çš„äº†è§£Hadoopçš„å…·ä½“å®ç°ï¼Œå¯ä»¥é˜…è¯»ä¸€ä¸‹Commonçš„æºç ã€‚</p><h2 id="HDFS"><a href="#HDFS" class="headerlink" title="HDFS"></a>HDFS</h2><p>HDFSæ˜¯â€œHadoop Distributed File Systemâ€çš„é¦–å­—æ¯ç¼©å†™ï¼Œæ˜¯ä¸€ç§è®¾è®¡è¿è¡Œåœ¨ä¸€èˆ¬ç¡¬ä»¶æ¡ä»¶ï¼ˆä¸éœ€è¦ä¸€å®šæ˜¯æœåŠ¡å™¨çº§åˆ«çš„è®¾å¤‡ï¼Œä½†æ›´å¥½çš„è®¾å¤‡èƒ½å‘æŒ¥æ›´å¤§çš„ä½œç”¨ï¼‰ä¸‹çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ. ä»–å’Œç°æœ‰çš„å…¶ä»–åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ(e.g. RAID)æœ‰å¾ˆå¤šç›¸ä¼¼çš„åœ°æ–¹ã€‚å’Œå…¶ä»–åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„ä¸åŒä¹‹å¤„æ˜¯HDFSè®¾è®¡ä¸ºè¿è¡Œåœ¨ä½æˆæœ¬çš„ç¡¬ä»¶ä¸Š(e.g. æ™®é€šçš„PCæœº)ï¼Œä¸”æä¾›é«˜å¯é æ€§çš„æœåŠ¡å™¨. HDFSè®¾è®¡æ»¡è¶³å¤§æ•°æ®é‡ï¼Œå¤§ååé‡çš„åº”ç”¨æƒ…å†µã€‚</p><p>ä¸ºäº†æ›´å¥½çš„ç†è§£åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬å…ˆä»æ–‡ä»¶è®²èµ·ã€‚</p><h3 id="æ–‡ä»¶"><a href="#æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶"></a>æ–‡ä»¶</h3><p>æ–‡ä»¶è¿™ä¸ªè¯ï¼Œææ€•åªè¦æ˜¯ç°ä»£äººéƒ½ä¸ä¼šé™Œç”Ÿã€‚ä½†æ˜¯åœ¨ä¸åŒè¡Œä¸šä¸­ï¼Œæ–‡ä»¶æœ‰ç€ä¸åŒçš„æ„ä¹‰ã€‚åœ¨è®¡ç®—æœºç§‘å­¦é¢†åŸŸï¼Œæ–‡ä»¶æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ–‡ä»¶æ˜¯å¯ä»¥åœ¨ç›®å½•ä¸­çœ‹çš„è§çš„å›¾æ ‡ä¹ˆï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚æ–‡ä»¶åœ¨å­˜å‚¨è®¾å¤‡æ—¶ï¼Œæ˜¯ä¸ªNé•¿çš„å­—èŠ‚åºåˆ—ã€‚è€Œåœ¨ä¸€ä¸ªè®¡ç®—æœºä½¿ç”¨è€…çš„è§’åº¦è€Œè¨€ï¼Œæ–‡ä»¶æ˜¯å¯¹æ‰€æœ‰I/Oè®¾å¤‡çš„æŠ½è±¡ã€‚æ¯ä¸ªI/Oè®¾å¤‡éƒ½å¯ä»¥è§†ä¸ºæ–‡ä»¶ï¼ŒåŒ…æ‹¬ç£ç›˜ã€é”®ç›˜å’Œç½‘ç»œç­‰ã€‚æ–‡ä»¶è¿™ä¸ªç®€å•è€Œç²¾è‡´çš„æ¦‚å¿µå…¶å†…æ¶µæ˜¯ååˆ†ä¸°å¯Œçš„ï¼Œå®ƒå‘åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„è§†è§’ï¼Œæ¥çœ‹å¾…ç³»ç»Ÿä¸­å¯èƒ½å«æœ‰çš„å„å¼å„æ ·çš„I/Oè®¾å¤‡ã€‚</p><h3 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h3><p>é‚£ä¹ˆä¸€å°è®¡ç®—æœºä¸Šè‚¯å®šä¸æ­¢ä¸€ä¸ªæ–‡ä»¶ï¼Œæˆåƒä¸Šä¸‡çš„æ–‡ä»¶æ€ä¹ˆç®¡ç†å‘¢ï¼Ÿå› æ­¤éœ€è¦æˆ‘ä»¬éœ€è¦ä¸€ç§å¯¹æ–‡ä»¶è¿›è¡Œç®¡ç†çš„ä¸œè¥¿ï¼Œå³æ–‡ä»¶ç³»ç»Ÿã€‚æ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ç§åœ¨è®¡ç®—æœºä¸Šå­˜å‚¨å’Œç»„ç»‡æ•°æ®çš„æ–¹æ³•ï¼Œå®ƒä½¿å¾—å¯¹å…¶è®¿é—®å’ŒæŸ¥æ‰¾å˜å¾—å®¹æ˜“ï¼Œæ–‡ä»¶ç³»ç»Ÿä½¿ç”¨æ–‡ä»¶å’Œæ ‘å½¢ç›®å½•çš„æŠ½è±¡é€»è¾‘æ¦‚å¿µä»£æ›¿äº†ç¡¬ç›˜å’Œå…‰ç›˜ç­‰ç‰©ç†è®¾å¤‡ä½¿ç”¨æ•°æ®å—çš„æ¦‚å¿µï¼Œç”¨æˆ·ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿæ¥ä¿å­˜æ•°æ®è€Œä¸å¿…å…³å¿ƒæ•°æ®å®é™…ä¿å­˜åœ¨ç¡¬ç›˜çš„åœ°å€ä¸ºå¤šå°‘çš„æ•°æ®å—ä¸Šï¼Œåªéœ€è¦è®°ä½è¿™ä¸ªæ–‡ä»¶çš„æ‰€å±ç›®å½•å’Œæ–‡ä»¶åã€‚åœ¨å†™å…¥æ–°æ•°æ®ä¹‹å‰ï¼Œç”¨æˆ·ä¸å¿…å…³å¿ƒç¡¬ç›˜ä¸Šçš„é‚£ä¸ªå—åœ°å€æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œç¡¬ç›˜ä¸Šçš„å­˜å‚¨ç©ºé—´ç®¡ç†(åˆ†é…å’Œé‡Šæ”¾)åŠŸèƒ½ç”±æ–‡ä»¶ç³»ç»Ÿè‡ªåŠ¨å®Œæˆï¼Œç”¨æˆ·åªéœ€è¦è®°ä½æ•°æ®è¢«å†™å…¥åˆ°äº†å“ªä¸ªæ–‡ä»¶ä¸­å³å¯ã€‚</p><h3 id="åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ"><a href="#åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ"></a>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</h3><p>ç›¸å¯¹äºå•æœºçš„æ–‡ä»¶ç³»ç»Ÿè€Œè¨€ï¼Œåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ(Distributed file system)ã€‚æ˜¯ä¸€ç§å…è®¸æ–‡ä»¶é€šè¿‡ç½‘ç»œåœ¨å¤šå°ä¸»æœºä¸Šåˆ†äº«çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¯è®©å¤šè®¡ç®—æœºä¸Šçš„å¤šç”¨æˆ·åˆ†äº«æ–‡ä»¶å’Œå­˜å‚¨ç©ºé—´ã€‚</p><p>åœ¨è¿™æ ·çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå®¢æˆ·ç«¯å¹¶éç›´æ¥è®¿é—®åº•å±‚çš„æ•°æ®å­˜å‚¨åŒºå—å’Œç£ç›˜ã€‚è€Œæ˜¯é€šè¿‡ç½‘ç»œï¼ŒåŸºäºå•æœºæ–‡ä»¶ç³»ç»Ÿå¹¶å€Ÿç”±ç‰¹å®šçš„é€šä¿¡åè®®çš„å¸®åŠ©ï¼Œæ¥å®ç°å¯¹äºæ–‡ä»¶ç³»ç»Ÿçš„è¯»å†™ã€‚</p><p>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿéœ€è¦æ‹¥æœ‰çš„æœ€åŸºæœ¬çš„èƒ½åŠ›æ˜¯é€šè¿‡ç•…é€šç½‘ç»œI/Oæ¥å®ç°æ•°æ®çš„å¤åˆ¶ä¸å®¹é”™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ–¹é¢ä¸€ä¸ªæ–‡ä»¶æ˜¯åˆ†ä¸ºå¤šä¸ªæ•°æ®å—åˆ†å¸ƒåœ¨å¤šä¸ªè®¾å¤‡ä¸­ã€‚å¦ä¸€æ–¹é¢ï¼Œæ•°æ®å—æœ‰å¤šä¸ªå‰¯æœ¬åˆ†å¸ƒåœ¨ä¸åŒçš„è®¾å¤‡ä¸Šã€‚å³ä½¿æœ‰ä¸€å°éƒ¨åˆ†çš„è®¾å¤‡å‡ºç°ç¦»çº¿å’Œå®•æœºç­‰æƒ…å†µï¼Œæ•´ä½“æ¥è¯´æ–‡ä»¶ç³»ç»Ÿä»ç„¶å¯ä»¥æŒç»­è¿ä½œè€Œä¸ä¼šæœ‰æ•°æ®æŸå¤±ã€‚</p><p>æ³¨æ„:åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå’Œåˆ†å¸ƒå¼æ•°æ®å­˜å‚¨çš„ç•Œçº¿æ˜¯æ¨¡ç³Šçš„ï¼Œä½†ä¸€èˆ¬æ¥è¯´ï¼Œåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæ˜¯è¢«è®¾è®¡ç”¨åœ¨å±€åŸŸç½‘ï¼Œæ¯”è¾ƒå¼ºè°ƒçš„æ˜¯ä¼ ç»Ÿæ–‡ä»¶ç³»ç»Ÿæ¦‚å¿µçš„å»¶ä¼¸ï¼Œå¹¶é€šè¿‡è½¯ä»¶æ–¹æ³•æ¥è¾¾æˆå®¹é”™çš„ç›®çš„ã€‚è€Œåˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ï¼Œåˆ™æ˜¯æ³›æŒ‡åº”ç”¨åˆ†å¸ƒå¼è¿ç®—æŠ€æœ¯çš„æ–‡ä»¶å’Œæ•°æ®åº“ç­‰æä¾›æ•°æ®å­˜å‚¨æœåŠ¡çš„ç³»ç»Ÿã€‚</p><h3 id="HDFS-1"><a href="#HDFS-1" class="headerlink" title="HDFS"></a>HDFS</h3><p>HDFSæ­£æ˜¯Hadoopä¸­è´Ÿè´£åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„ã€‚HDFSé‡‡ç”¨master/slaveæ¶æ„ã€‚ä¸€ä¸ªHDFSé›†ç¾¤æ˜¯ç”±ä¸€ä¸ªNamenodeå’Œä¸€å®šæ•°ç›®çš„Datanodesç»„æˆã€‚Namenodeæ˜¯ä¸€ä¸ªä¸­å¿ƒæœåŠ¡å™¨ï¼Œè´Ÿè´£ç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„å‘½åç©ºé—´ä»¥åŠæ–‡ä»¶çš„è®¿é—®æ§åˆ¶ã€‚é›†ç¾¤ä¸­çš„Datanodeä¸€èˆ¬æ˜¯ä¸€ä¸ªè®¾å¤‡ä¸Šéƒ¨ç½²ä¸€ä¸ªï¼Œè´Ÿè´£ç®¡ç†å®ƒæ‰€åœ¨èŠ‚ç‚¹ä¸Šçš„å­˜å‚¨ã€‚HDFSæš´éœ²äº†æ–‡ä»¶ç³»ç»Ÿçš„å‘½åç©ºé—´ï¼Œç”¨æˆ·èƒ½å¤Ÿä»¥æ–‡ä»¶çš„å½¢å¼åœ¨ä¸Šé¢å­˜å‚¨æ•°æ®ã€‚å®é™…ä¸Šï¼Œä¸€ä¸ªæ–‡ä»¶ä¼šè¢«åˆ†æˆä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®å—ï¼Œè¿™äº›å—å­˜å‚¨åœ¨ä¸€ç»„Datanodeä¸Šã€‚Namenodeæ‰§è¡Œæ–‡ä»¶ç³»ç»Ÿçš„å‘½åç©ºé—´æ“ä½œï¼Œæ¯”å¦‚æ‰“å¼€ã€å…³é—­ã€é‡å‘½åæ–‡ä»¶æˆ–ç›®å½•ã€‚å®ƒä¹Ÿè´Ÿè´£ç¡®å®šæ•°æ®å—åˆ°å…·ä½“Datanodeè®¾å¤‡çš„æ˜ å°„ã€‚Datanodeè´Ÿè´£å¤„ç†æ–‡ä»¶ç³»ç»Ÿå®¢æˆ·ç«¯çš„è¯»å†™è¯·æ±‚ã€‚åœ¨Namenodeçš„ç»Ÿä¸€è°ƒåº¦ä¸‹è¿›è¡Œæ•°æ®å—çš„åˆ›å»ºã€åˆ é™¤å’Œå¤åˆ¶ã€‚ä¸ºäº†ä¿è¯æ–‡ä»¶ç³»ç»Ÿçš„é«˜å¯é ï¼Œå¾€å¾€éœ€è¦å¦ä¸€ä¸ªStandbyçš„Namenodeåœ¨Actived Namenodeå‡ºç°é—®é¢˜åï¼Œç«‹åˆ»æ¥ç®¡æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>ç½‘ç»œä¸Šæœ‰å¾ˆå¤šå…³äºhdfsçš„å®‰è£…é…ç½®æ‰‹å†Œï¼Œæœ¬æ–‡å°±ä¸å†å¤è¿°ã€‚åªæä¾›ä¸€ä¸ªä»¥å‰é¡¹ç›®ä¸­åº”ç”¨è¿‡çš„éƒ¨ç½²æ¶æ„ä»…ä¾›å¤§å®¶å‚è€ƒã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Hadoop%E6%9E%81%E7%AE%80%E5%85%A5%E9%97%A8/%E5%9B%BE%E7%89%87%E4%B8%80.jpg" alt="å›¾ç‰‡ä¸€"></p><p>è¿™ä¸ªé«˜å¯ç”¨çš„HDFSæ¶æ„æ˜¯ç”±3å°zookeeperè®¾å¤‡ã€2å°åŸŸåæœåŠ¡(DNS)å’Œæ—¶é—´æœåŠ¡(NTP)è®¾å¤‡ã€2å°Namenodeè®¾å¤‡(å¦‚æœå¿…è¦Standbyå¯ä»¥æ›´å¤š)ã€ä¸€ä¸ªå…±äº«å­˜å‚¨è®¾å¤‡(NFS)å’ŒNä¸ªDataNodeç»„æˆã€‚</p><p>Zookeeperè´Ÿè´£æ¥å—NameNodeçš„å¿ƒè·³ï¼Œå½“Actived namenodeä¸å‘zookeeperæŠ¥å‘Šå¿ƒè·³æ—¶ï¼ŒStandby Namenodeçš„ç›‘æ§è¿›ç¨‹ä¼šæ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼Œä»è€Œæ¿€æ´»Standby NameNodeå¹¶æ¥ç®¡Active NameNodeçš„å·¥ä½œã€‚</p><p>NFSè´Ÿè´£ä¸º2ä¸ªNameNodeå­˜å‚¨EditLogæ–‡ä»¶ï¼Œ(NameNode åœ¨æ‰§è¡Œ HDFS å®¢æˆ·ç«¯æäº¤çš„åˆ›å»ºæ–‡ä»¶æˆ–è€…ç§»åŠ¨æ–‡ä»¶è¿™æ ·çš„å†™æ“ä½œæ—¶ï¼Œä¼šé¦–å…ˆæŠŠè¿™äº›æ“ä½œè®°å½•åœ¨ EditLog æ–‡ä»¶ä¹‹ä¸­ï¼Œç„¶åå†æ›´æ–°å†…å­˜ä¸­çš„æ–‡ä»¶ç³»ç»Ÿé•œåƒï¼Œæœ€ç»ˆå†åˆ·æ–°åˆ°ç£ç›˜ã€‚ EditLog åªæ˜¯åœ¨æ•°æ®æ¢å¤çš„æ—¶å€™èµ·ä½œç”¨ã€‚è®°å½•åœ¨ EditLog ä¹‹ä¸­çš„æ¯ä¸€ä¸ªæ“ä½œåˆç§°ä¸ºä¸€ä¸ªäº‹åŠ¡ï¼Œæ¯ä¸ªäº‹åŠ¡æœ‰ä¸€ä¸ªæ•´æ•°å½¢å¼çš„äº‹åŠ¡ id ä½œä¸ºç¼–å·ã€‚EditLog ä¼šè¢«åˆ‡å‰²ä¸ºå¾ˆå¤šæ®µï¼Œæ¯ä¸€æ®µç§°ä¸ºä¸€ä¸ª Segment)å½“å‘ç”ŸNameNodeåˆ‡æ¢çš„æƒ…å†µæ—¶ï¼ŒStandby NameNodeæ¥ç®¡åï¼Œä¼šæ ¹æ®EditLogä¸­æŠŠæœªå®Œæˆçš„å†™æ“ä½œç»§ç»­ä¸‹å»å¹¶å¼€ä½¿å‘EditLogå†™å…¥æ–°çš„å†™æ“ä½œè®°å½•ã€‚(æ­¤å¤–ï¼Œhadoopè¿˜æä¾›äº†å¦ä¸€ç§QJMçš„EditLogæ–¹æ¡ˆ)</p><p>DNS&amp;NTPåˆ†å¸ƒè´Ÿè´£æ•´ä¸ªç³»ç»Ÿçš„(åŒ…æ‹¬å®¢æˆ·ç«¯)åŸŸåæœåŠ¡å’Œæ—¶é—´æœåŠ¡ã€‚è¿™ä¸ªåœ¨é›†ç¾¤éƒ¨ç½²ä¸­æ˜¯éå¸¸æœ‰å¿…è¦çš„ä¸¤ä¸ªå­˜åœ¨ã€‚é¦–å…ˆè¯´ä¸€ä¸‹DNSçš„å¿…è¦æ€§ï¼Œä¸€ã€Hadoopæ˜¯æåŠ›æå€¡ç”¨æœºå™¨åä½œä¸ºåœ¨HDFSç¯å¢ƒä¸­çš„æ ‡è¯†ã€‚äºŒã€å½“ç„¶å¯ä»¥åœ¨/etc/hostsæ–‡ä»¶ä¸­å»æ ‡æ˜æœºå™¨åå’ŒIPçš„æ˜ å°„å…³ç³»ï¼Œå¯æ˜¯è¯·æƒ³æƒ³å¦‚æœåœ¨ä¸€ä¸ªæ•°åƒå°è®¾å¤‡çš„é›†ç¾¤ä¸­æ·»åŠ ä¸€ä¸ªè®¾å¤‡æ—¶ï¼Œè´Ÿè´£ç³»ç»Ÿç»´æŠ¤çš„ä¼™ä¼´ä¼šä¸ä¼šéª‚é›†ç¾¤çš„è®¾è®¡è€…å‘¢ï¼Ÿå…¶æ¬¡æ˜¯NTPçš„å¿…è¦æ€§ï¼Œåœ¨åˆšåˆšå¼€å§‹æ¥è§¦Hadoopé›†ç¾¤æ—¶æˆ‘é‡åˆ°çš„å¤§æ¦‚90%çš„é—®é¢˜æ˜¯ç”±äºå„ä¸ªè®¾å¤‡æ—¶é—´ä¸ä¸€è‡´å¯¼è‡´çš„ã€‚å„ä¸ªè®¾å¤‡çš„æ—¶é—´åŒæ­¥æ˜¯æ•°æ®ä¸€è‡´æ€§å’Œç®¡ç†ä¸€è‡´æ€§çš„ä¸€ä¸ªåŸºæœ¬ä¿éšœã€‚</p><h3 id="MapReduce"><a href="#MapReduce" class="headerlink" title="MapReduce"></a>MapReduce</h3><p>MapReduceæ˜¯ä¸€ä¸ªä½¿ç”¨ç®€å•çš„è½¯ä»¶æ¡†æ¶ï¼ŒåŸºäºå®ƒå†™å‡ºæ¥çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿè¿è¡Œåœ¨ç”±ä¸Šåƒä¸ªå•†ç”¨æœºå™¨ç»„æˆçš„å¤§å‹é›†ç¾¤ä¸Šï¼Œå¹¶ä»¥ä¸€ç§å¯é å®¹é”™çš„æ–¹å¼å¹¶è¡Œå¤„ç†ä¸ŠTçº§åˆ«çš„æ•°æ®é›†ã€‚</p><p>ä¸€ä¸ªMapReduce ä½œä¸š(job)é€šå¸¸ä¼šæŠŠè¾“å…¥çš„æ•°æ®é›†åˆ‡åˆ†ä¸ºè‹¥å¹²ç‹¬ç«‹çš„æ•°æ®å—ï¼Œç”± mapä»»åŠ¡(task)ä»¥å®Œå…¨å¹¶è¡Œçš„æ–¹å¼å¤„ç†å®ƒä»¬ã€‚æ¡†æ¶ä¼šå¯¹mapçš„è¾“å‡ºå…ˆè¿›è¡Œæ’åºï¼Œ ç„¶åæŠŠç»“æœè¾“å…¥ç»™reduceä»»åŠ¡ã€‚é€šå¸¸ä½œä¸šçš„è¾“å…¥å’Œè¾“å‡ºéƒ½ä¼šè¢«å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ æ•´ä¸ªæ¡†æ¶è´Ÿè´£ä»»åŠ¡çš„è°ƒåº¦å’Œç›‘æ§ï¼Œä»¥åŠé‡æ–°æ‰§è¡Œå·²ç»å¤±è´¥çš„ä»»åŠ¡ã€‚</p><p>é€šå¸¸ï¼ŒMapReduceæ¡†æ¶å’ŒHDFSæ˜¯è¿è¡Œåœ¨ä¸€ç›¸åŒçš„è®¾å¤‡é›†ç¾¤ä¸Šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè®¡ç®—è®¾å¤‡å’Œå­˜å‚¨è®¾å¤‡é€šå¸¸åœ¨ä¸€èµ·ã€‚è¿™ç§é…ç½®å…è®¸æ¡†æ¶åœ¨é‚£äº›å·²ç»å­˜å¥½æ•°æ®çš„è®¾å¤‡ä¸Šé«˜æ•ˆåœ°è°ƒåº¦ä»»åŠ¡ï¼Œè¿™å¯ä»¥ä½¿æ•´ä¸ªé›†ç¾¤çš„ç½‘ç»œå¸¦å®½è¢«éå¸¸é«˜æ•ˆåœ°åˆ©ç”¨ã€‚</p><p>MapReduceæ¡†æ¶ç”±ä¸€ä¸ªå•ç‹¬çš„master JobTracker å’Œæ¯ä¸ªé›†ç¾¤è®¾å¤‡ä¸€ä¸ªslave TaskTrackerå…±åŒç»„æˆã€‚masterè´Ÿè´£è°ƒåº¦æ„æˆä¸€ä¸ªä½œä¸šçš„æ‰€æœ‰ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡åˆ†å¸ƒåœ¨ä¸åŒçš„slaveä¸Šï¼Œmasterç›‘æ§å®ƒä»¬çš„æ‰§è¡Œï¼Œé‡æ–°æ‰§è¡Œå·²ç»å¤±è´¥çš„ä»»åŠ¡ã€‚è€Œslaveä»…è´Ÿè´£æ‰§è¡Œç”±masteræŒ‡æ´¾çš„ä»»åŠ¡ã€‚</p><p>ç”¨æˆ·ç¼–å†™çš„MapReduceåº”ç”¨ç¨‹åºåº”è¯¥æŒ‡æ˜è¾“å…¥/è¾“å‡ºçš„æ–‡ä»¶ä½ç½®(è·¯å¾„)ï¼Œå¹¶é€šè¿‡å®ç°åˆé€‚çš„æ¥å£æˆ–æŠ½è±¡ç±»æä¾›mapå’Œreduceå‡½æ•°ã€‚å†åŠ ä¸Šå…¶ä»–ä½œä¸šçš„å‚æ•°ï¼Œå°±æ„æˆäº†ä½œä¸šé…ç½®(job configuration)ã€‚ç„¶åï¼Œjob clientæäº¤ä½œä¸š(jaråŒ…/å¯æ‰§è¡Œç¨‹åºç­‰)å’Œé…ç½®ä¿¡æ¯ç»™JobTrackerï¼Œåè€…è´Ÿè´£åˆ†å‘è¿™äº›è½¯ä»¶å’Œé…ç½®ä¿¡æ¯ç»™slaveã€è°ƒåº¦ä»»åŠ¡å¹¶ç›‘æ§å®ƒä»¬çš„æ‰§è¡Œï¼ŒåŒæ—¶æä¾›çŠ¶æ€å’Œè¯Šæ–­ä¿¡æ¯ç»™job-clientã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Hadoop%E6%9E%81%E7%AE%80%E5%85%A5%E9%97%A8/%E5%9B%BE%E7%89%87%E4%BA%8C.jpg" alt="å›¾ç‰‡äºŒ"></p><p>åœ¨æŠ½è±¡çš„å±‚é¢ä¸ŠMapReduceæ˜¯ç”±ä¸¤ä¸ªå‡½æ•°Mapå’ŒReduceç»„æˆçš„ã€‚ç®€å•æ¥è¯´ï¼Œä¸€ä¸ªMapå‡½æ•°å°±æ˜¯å¯¹ä¸€äº›ç‹¬ç«‹å…ƒç´ ç»„æˆçš„æ¦‚å¿µä¸Šçš„åˆ—è¡¨çš„æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡ŒæŒ‡å®šçš„æ“ä½œã€‚äº‹å®ä¸Šï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯è¢«ç‹¬ç«‹æ“ä½œçš„ï¼Œè€ŒåŸå§‹åˆ—è¡¨æ²¡æœ‰è¢«æ›´æ”¹ï¼Œå› ä¸ºè¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åˆ—è¡¨æ¥ä¿å­˜æ“ä½œç»“æœã€‚è¿™å°±æ˜¯è¯´ï¼ŒMapæ“ä½œæ˜¯å¯ä»¥é«˜åº¦å¹¶è¡Œçš„ã€‚è€ŒReduceå‡½æ•°æŒ‡çš„æ˜¯å¯¹Mapå‡½æ•°çš„ç»“æœï¼ˆä¸­é—´ç»è¿‡æ´—ç‰Œçš„è¿‡ç¨‹ï¼Œä¼šæŠŠmapçš„ç»“æœè¿›è¡Œåˆ†ç»„ï¼‰åˆ†ç»„åå¤šä¸ªåˆ—è¡¨çš„å…ƒç´ è¿›è¡Œé€‚å½“çš„å½’å¹¶ã€‚</p><p>æ³¨æ„:è™½ç„¶Hadoopæ¡†æ¶æ˜¯ç”¨JavaTMå®ç°çš„ï¼Œä½†MapReduceåº”ç”¨ç¨‹åºåˆ™ä¸ä¸€å®šè¦ç”¨ Javaæ¥å†™ ã€‚è‡³å°‘Scalaæ˜¯å¯ä»¥å†™çš„å“Ÿã€‚</p><p>é™„ä¸ŠScalaå®ç°çš„è®¡ç®—è¯é¢‘çš„Scalaæºç </p><pre><code>import java.io.IOExceptionimport java.util.StringTokenizerimport org.apache.hadoop.conf.Configurationimport org.apache.hadoop.fs.Pathimport org.apache.hadoop.io.{IntWritable, Text}import org.apache.hadoop.mapreduce.lib.input.FileInputFormatimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormatimport org.apache.hadoop.mapreduce.{Job, Mapper, Reducer}import scala.collection.JavaConversionsobject WordCount {def main(args: Array[String]): Unit = {val job = new Job(new Configuration(), "WordCount")job.setJarByClass(classOf[WordMapper]);job.setMapperClass(classOf[WordMapper]);job.setCombinerClass(classOf[WordReducer]);job.setReducerClass(classOf[WordReducer]);job.setOutputKeyClass(classOf[Text]);job.setOutputValueClass(classOf[IntWritable]);job.setNumReduceTasks(1)FileInputFormat.addInputPath(job, new Path(args(0)));FileOutputFormat.setOutputPath(job, new Path(args(1)));System.exit(job.waitForCompletion(true) match { case true =&gt; 0case false =&gt; 1});}}class WordMapper extends Mapper[Object, Text, Text, IntWritable] {val one = new IntWritable(1)@throws[IOException]@throws[InterruptedException]override def map(key: Object, value: Text, context: Mapper[Object, Text, Text, IntWritable]#Context) = {val stringTokenizer = new StringTokenizer(value.toString());while (stringTokenizer.hasMoreTokens()) {context.write(new Text(stringTokenizer.nextToken()), one);}}}class WordReducer extends Reducer[Text, IntWritable, Text, IntWritable] {@throws[IOException]@throws[InterruptedException]override def reduce(key: Text, values: java.lang.Iterable[IntWritable], context: Reducer[Text, IntWritable, Text, IntWritable]#Context) = {import JavaConversions.iterableAsScalaIterablecontext.write(key, new IntWritable(values.map(x=&gt;x.get()).reduce(_+_)));}}</code></pre><h3 id="Yarn"><a href="#Yarn" class="headerlink" title="Yarn"></a>Yarn</h3><p>YARN(Yet Another Resource Negotiator)æ˜¯Hadoopçš„è®¾å¤‡èµ„æºç®¡ç†å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªé€šç”¨èµ„æºç®¡ç†ç³»ç»Ÿï¼ŒMapReduceå’Œå…¶ä»–ä¸Šå±‚åº”ç”¨æä¾›ç»Ÿä¸€çš„èµ„æºç®¡ç†å’Œè°ƒåº¦ï¼Œå®ƒä¸ºé›†ç¾¤åœ¨åˆ©ç”¨ç‡ã€èµ„æºç»Ÿä¸€ç®¡ç†å’Œæ•°æ®å…±äº«ç­‰æ–¹é¢æä¾›äº†å·¨å¤§çš„å¸®åŠ©ã€‚</p><p>Yarnç”±ResourceManagerã€NodeManagerã€ApplicationMasterå’ŒContaineå››ä¸ªæ¦‚å¿µæ„æˆã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/Hadoop%E6%9E%81%E7%AE%80%E5%85%A5%E9%97%A8/%E5%9B%BE%E7%89%87%E4%B8%89.jpg" alt="å›¾ç‰‡ä¸‰"></p><p>ResourceManageræ˜¯ä¸€ä¸ªå…¨å±€çš„èµ„æºç®¡ç†å™¨ï¼Œè´Ÿè´£æ•´ä¸ªç³»ç»Ÿçš„èµ„æºç®¡ç†å’Œåˆ†é…ã€‚å®ƒä¸»è¦ç”±ä¸¤ä¸ªç»„ä»¶æ„æˆ:è°ƒåº¦å™¨(Scheduler)å’Œåº”ç”¨ç¨‹åºç®¡ç†å™¨(Applications Manager)ã€‚è°ƒåº¦å™¨æ ¹æ®å®¹é‡ã€é˜Ÿåˆ—ç­‰é™åˆ¶æ¡ä»¶ï¼Œå°†ç³»ç»Ÿä¸­çš„èµ„æºåˆ†é…ç»™å„ä¸ªæ­£åœ¨è¿è¡Œçš„MapReduceç¨‹åºã€‚åº”ç”¨ç¨‹åºç®¡ç†å™¨è´Ÿè´£ç®¡ç†æ•´ä¸ªç³»ç»Ÿä¸­æ‰€æœ‰MapReduceç¨‹åºï¼ŒåŒ…æ‹¬æäº¤ã€ä¸è°ƒåº¦å™¨åå•†èµ„æºä»¥å¯åŠ¨ApplicationMasterã€ç›‘æ§ApplicationMasterè¿è¡ŒçŠ¶æ€å¹¶åœ¨å¤±è´¥æ—¶é‡æ–°å¯åŠ¨å®ƒç­‰ã€‚</p><p>ç”¨æˆ·æäº¤çš„æ¯ä¸ªMapReduceç¨‹åºå‡åŒ…å«ä¸€ä¸ªApplicationMasterï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šä¸ResourceManagerè°ƒåº¦å™¨åå•†ä»¥è·å–èµ„æº(ç”¨Containerè¡¨ç¤º)ï¼›å°†å¾—åˆ°çš„ä»»åŠ¡è¿›ä¸€æ­¥åˆ†é…ç»™å†…éƒ¨çš„ä»»åŠ¡(èµ„æºçš„äºŒæ¬¡åˆ†é…)ï¼›ä¸NodeManageré€šä¿¡ä»¥å¯åŠ¨/åœæ­¢ä»»åŠ¡ï¼›ç›‘æ§æ‰€æœ‰ä»»åŠ¡è¿è¡ŒçŠ¶æ€ï¼Œå¹¶åœ¨ä»»åŠ¡è¿è¡Œå¤±è´¥æ—¶é‡æ–°ä¸ºä»»åŠ¡ç”³è¯·èµ„æºä»¥é‡å¯ä»»åŠ¡ã€‚</p><p>NodeManageræ˜¯æ¯ä¸ªè®¾å¤‡ä¸Šçš„èµ„æºå’Œä»»åŠ¡ç®¡ç†å™¨ï¼Œä¸€æ–¹é¢ï¼Œå®ƒä¼šå®šæ—¶åœ°å‘ResourceManageræ±‡æŠ¥æœ¬è®¾å¤‡ä¸Šçš„èµ„æºä½¿ç”¨æƒ…å†µå’Œå„ä¸ªContainerçš„è¿è¡ŒçŠ¶æ€ï¼›å¦ä¸€æ–¹é¢ï¼Œå®ƒæ¥æ”¶å¹¶å¤„ç†æ¥è‡ªApplicationMasterçš„Containerå¯åŠ¨/åœæ­¢ç­‰å„ç§è¯·æ±‚ã€‚</p><p>Containeræ˜¯YARNä¸­çš„èµ„æºæŠ½è±¡ï¼Œå®ƒå°è£…äº†æŸä¸ªè®¾å¤‡ä¸Šçš„å¤šç»´åº¦èµ„æºï¼Œå¦‚å†…å­˜ã€CPUã€ç£ç›˜ã€ç½‘ç»œç­‰ï¼Œå½“AMå‘RMç”³è¯·èµ„æºæ—¶ï¼ŒRMä¸ºAMè¿”å›çš„èµ„æºä¾¿æ˜¯ç”¨Containerè¡¨ç¤ºã€‚</p><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>æœ¬æ–‡èµ°é©¬è§‚èŠ±çš„ä»‹ç»äº†Hadoopç›¸å…³å†…å®¹ã€‚æ–‡ç« çš„ä¸»è¦ç›®çš„æ˜¯ç»™å¤§å®¶ä¸€ä¸ªå¯¹å¤§æ•°æ®çš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆçš„æ„Ÿå®˜å°è±¡ï¼Œä¸ºåé¢çš„å¤§æ•°æ®ç›¸å…³æ–‡ç« æä¾›ä¸€ä¸ªåŸºç¡€çš„ç†è§£ã€‚æœ€åè¦å¼ºè°ƒçš„æ˜¯ï¼Œæ€è€ƒå¤§æ•°æ®æ–¹å‘çš„é—®é¢˜æ˜¯ä¸€å®šè¦è®°ä½åˆ†å¸ƒå¼çš„æ¦‚å¿µï¼Œå› ä¸ºä½ çš„æ•°æ®å¹¶ä¸åœ¨ä¸€ä¸ªè®¾å¤‡ä¸­ç”šè‡³ä¸å†ä¸€ä¸ªé›†ç¾¤ä¸­ï¼Œè€Œä¸”è®¡ç®—ä¹Ÿæ˜¯åˆ†å¸ƒçš„ã€‚æ‰€ä»¥åœ¨è®¾è®¡å¤§æ•°æ®åº”ç”¨ç¨‹åºæ—¶ï¼Œè¦èŠ±æ—¶é—´æ€è€ƒç¨‹åºå’Œç®—æ³•åœ¨å•æœºåº”ç”¨å’Œåˆ†å¸ƒå¼åº”ç”¨æ‰€äº§ç”Ÿçš„ä¸åŒ(e.g. åŠ æƒå¹³å‡å€¼)ã€‚</p><p><strong>æŒç»­æ›´æ–°ä¸­â€¦ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æ¬¢è¿è”ç³»æˆ‘ï¼Œåœ¨æ–‡ç« æœ€åè¯„è®ºåŒºã€ç•™è¨€å’Œè®¨è®ºã€‘ï¼Œå½“ç„¶ï¼Œæ¬¢è¿ç‚¹å‡»æ–‡ç« æœ€åçš„æ‰“èµæŒ‰é”®ï¼Œè¯·åšä¸»ä¸€æ¯å†°é˜”ä¹ï¼Œç¬‘ï½</strong></p><table>  <tbody><tr>    <td><img width="100" src="https://hualei.online/medias/reward/alipay.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/wechat.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/zan.png"></td>     </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> äº’è”ç½‘ </tag>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinuxåŸºç¡€å’Œå‘½ä»¤</title>
      <link href="/posts/1792.html"/>
      <url>/posts/1792.html</url>
      
        <content type="html"><![CDATA[<h2 id="Linuxå‘½ä»¤"><a href="#Linuxå‘½ä»¤" class="headerlink" title="Linuxå‘½ä»¤"></a>Linuxå‘½ä»¤</h2><p>æˆ‘æ˜¯å°ç™½ï¼Œæˆ‘ä»æ¥æ²¡ç©è¿‡Linux,è¯·ç‚¹è¿™é‡Œï¼š</p><pre><code>http://www.runoob.com/linux/Linux-intro.html</code></pre><h2 id="å¿…é¡»å­¦ä¼šçš„å‘½ä»¤"><a href="#å¿…é¡»å­¦ä¼šçš„å‘½ä»¤" class="headerlink" title="å¿…é¡»å­¦ä¼šçš„å‘½ä»¤"></a>å¿…é¡»å­¦ä¼šçš„å‘½ä»¤</h2><h3 id="1-0-manå’Œpage"><a href="#1-0-manå’Œpage" class="headerlink" title="1.0 manå’Œpage"></a>1.0 manå’Œpage</h3><pre><code>1.å†…éƒ¨å‘½ä»¤ï¼šechoæŸ¥çœ‹å†…éƒ¨å‘½ä»¤å¸®åŠ©ï¼šhelp echo æˆ–è€… man echo2.å¤–éƒ¨å‘½ä»¤ï¼šlsæŸ¥çœ‹å¤–éƒ¨å‘½ä»¤å¸®åŠ©ï¼šls --help æˆ–è€… man ls æˆ–è€… info ls3.manæ–‡æ¡£çš„ç±»å‹(1~9)man 7 manman 5 passwd4.å¿«æ·é”®ï¼šctrl + cï¼šåœæ­¢è¿›ç¨‹ctrl + lï¼šæ¸…å±ctrl + rï¼šæœç´¢å†å²å‘½ä»¤ctrl + qï¼šé€€å‡º5.å–„äºç”¨tabé”®</code></pre><h3 id="2-0-å¸¸ç”¨"><a href="#2-0-å¸¸ç”¨" class="headerlink" title="2.0. å¸¸ç”¨"></a>2.0. å¸¸ç”¨</h3><pre><code>è¯´æ˜ï¼šå®‰è£…linuxæ—¶ï¼Œåˆ›å»ºä¸€ä¸ªhadoopç”¨æˆ·ï¼Œç„¶åä½¿ç”¨rootç”¨æˆ·ç™»é™†ç³»ç»Ÿ1.è¿›å…¥åˆ°ç”¨æˆ·æ ¹ç›®å½•cd ~ æˆ– cd2.æŸ¥çœ‹å½“å‰æ‰€åœ¨ç›®å½•pwd3.è¿›å…¥åˆ°hadoopç”¨æˆ·æ ¹ç›®å½•cd ~hadoop4.è¿”å›åˆ°åŸæ¥ç›®å½•cd -5.è¿”å›åˆ°ä¸Šä¸€çº§ç›®å½•cd ..6.æŸ¥çœ‹hadoopç”¨æˆ·æ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ls -la7.åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªhadoopçš„æ–‡ä»¶å¤¹mkdir /hadoop8.åœ¨/hadoopç›®å½•ä¸‹åˆ›å»ºsrcå’ŒWebRootä¸¤ä¸ªæ–‡ä»¶å¤¹åˆ†åˆ«åˆ›å»ºï¼šmkdir /hadoop/src          mkdir /hadoop/WebRootåŒæ—¶åˆ›å»ºï¼šmkdir /hadoop/{src,WebRoot}è¿›å…¥åˆ°/hadoopç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹åˆ›å»º.classpathå’ŒREADMEæ–‡ä»¶åˆ†åˆ«åˆ›å»ºï¼štouch .classpath          touch READMEåŒæ—¶åˆ›å»ºï¼štouch {.classpath,README}æŸ¥çœ‹/hadoopç›®å½•ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶ls -laåœ¨/hadoopç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªtest.txtæ–‡ä»¶,åŒæ—¶å†™å…¥å†…å®¹"this is test"echo "this is test" &gt; test.txtæŸ¥çœ‹ä¸€ä¸‹test.txtçš„å†…å®¹cat test.txtmore test.txtless test.txtå‘READMEæ–‡ä»¶è¿½åŠ å†™å…¥"please read me first"echo "please read me first" &gt;&gt; READMEå°†test.txtçš„å†…å®¹è¿½åŠ åˆ°READMEæ–‡ä»¶ä¸­cat test.txt &gt;&gt; READMEæ‹·è´/hadoopç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ°/hadoop-bakcp -r /hadoop /hadoop-bakè¿›å…¥åˆ°/hadoop-bakç›®å½•ï¼Œå°†test.txtç§»åŠ¨åˆ°srcç›®å½•ä¸‹ï¼Œå¹¶ä¿®æ”¹æ–‡ä»¶åä¸ºStudent.javamv test.txt src/Student.javaåœ¨srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªstruts.xml&gt; struts.xmlåˆ é™¤æ‰€æœ‰çš„xmlç±»å‹çš„æ–‡ä»¶rm -rf *.xmlåˆ é™¤/hadoop-bakç›®å½•å’Œä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶rm -rf /hadoop-bakè¿”å›åˆ°/hadoopç›®å½•ï¼ŒæŸ¥çœ‹ä¸€ä¸‹READMEæ–‡ä»¶æœ‰å¤šå•è¯ï¼Œå¤šå°‘ä¸ªå°‘è¡Œwc -w READMEwc -l READMEè¿”å›åˆ°æ ¹ç›®å½•ï¼Œå°†/hadoopç›®å½•å…ˆæ‰“åŒ…ï¼Œå†ç”¨gzipå‹ç¼©åˆ†æ­¥å®Œæˆï¼štar -cvf hadoop.tar hadoop          gzip hadoop.tarä¸€æ­¥å®Œæˆï¼štar -zcvf hadoop.tar.gz hadoopå°†å…¶è§£å‹ç¼©ï¼Œå†å–æ¶ˆæ‰“åŒ…åˆ†æ­¥å®Œæˆï¼šgzip -d hadoop.tar.gz æˆ– gunzip hadoop.tar.gzä¸€æ­¥å®Œæˆï¼štar -zxvf hadoop.tar.gzå°†/hadoopç›®å½•å…ˆæ‰“åŒ…ï¼ŒåŒæ—¶ç”¨bzip2å‹ç¼©ï¼Œå¹¶ä¿å­˜åˆ°/tmpç›®å½•ä¸‹tar -jcvf /tmp/hadoop.tar.bz2 hadoopå°†/tmp/hadoop.tar.bz2è§£å‹åˆ°/usrç›®å½•ä¸‹é¢tar -jxvf hadoop.tar.bz2 -C /usr/</code></pre><h4 id="2-1-æ–‡ä»¶å‘½ä»¤"><a href="#2-1-æ–‡ä»¶å‘½ä»¤" class="headerlink" title="2.1 æ–‡ä»¶å‘½ä»¤"></a>2.1 æ–‡ä»¶å‘½ä»¤</h4><pre><code>1.è¿›å…¥åˆ°ç”¨æˆ·æ ¹ç›®å½•cd ~ æˆ–è€… cdcd ~hadoopå›åˆ°åŸæ¥è·¯å¾„cd -2.æŸ¥çœ‹æ–‡ä»¶è¯¦æƒ…stat a.txt3.ç§»åŠ¨mv a.txt /ect/æ”¹åmv b.txt a.txtç§»åŠ¨å¹¶æ”¹åmv a.txt ../b.txt4æ‹·è´å¹¶æ”¹åcp a.txt /etc/b.txt5.viæ’¤é”€ä¿®æ”¹ctrl + u (undo)æ¢å¤ctrl + r (redo)6.åä»¤è®¾ç½®åˆ«å(é‡å¯åæ— æ•ˆ)alias ll="ls -l"å–æ¶ˆunalias ll7.å¦‚æœæƒ³è®©åˆ«åé‡å¯åä»ç„¶æœ‰æ•ˆéœ€è¦ä¿®æ”¹vi ~/.bashrc8.æ·»åŠ ç”¨æˆ·useradd hadooppasswd hadoop9åˆ›å»ºå¤šä¸ªæ–‡ä»¶touch a.txt b.txttouch /home/{a.txt,b.txt}10.å°†ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹å¤åˆ¶åˆ°é‡Œå¦ä¸€ä¸ªæ–‡ä»¶ä¸­cat a.txt &gt; b.txtè¿½åŠ å†…å®¹cat a.txt &gt;&gt; b.txt 11.å°†a.txt ä¸b.txtè®¾ä¸ºå…¶æ‹¥æœ‰è€…å’Œå…¶æ‰€å±åŒä¸€ä¸ªç»„è€…å¯å†™å…¥ï¼Œä½†å…¶ä»–ä»¥å¤–çš„äººåˆ™ä¸å¯å†™å…¥:chmod ug+w,o-w a.txt b.txtchmod a=wx c.txt12.å°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•çš†è®¾ä¸ºä»»ä½•äººå¯è¯»å–:chmod -R a+r *13.å°†a.txtçš„ç”¨æˆ·æ‹¥æœ‰è€…è®¾ä¸ºusers,ç»„çš„æ‹¥æœ‰è€…è®¾ä¸ºjessie:chown users:jessie a.txt14.å°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•çš„ç”¨æˆ·çš„ä½¿ç”¨è€…ä¸ºlamport,ç»„æ‹¥æœ‰è€…çš†è®¾ä¸ºusersï¼Œchown -R lamport:users *15.å°†æ‰€æœ‰çš„javaè¯­è¨€ç¨‹å¼æ‹·è´è‡³finishedå­ç›®å½•ä¸­:cp *.java finished16.å°†ç›®å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰æ‰©å±•åæ˜¯javaçš„æ–‡ä»¶åˆ—å‡ºæ¥ã€‚find -name "*.java"æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹æ‰©å±•åæ˜¯java çš„æ–‡ä»¶find -name *.java17.åˆ é™¤å½“å‰ç›®å½•ä¸‹æ‰©å±•åæ˜¯javaçš„æ–‡ä»¶rm -f *.java</code></pre><h4 id="2-2-ç³»ç»Ÿå‘½ä»¤"><a href="#2-2-ç³»ç»Ÿå‘½ä»¤" class="headerlink" title="2.2 ç³»ç»Ÿå‘½ä»¤"></a>2.2 ç³»ç»Ÿå‘½ä»¤</h4><pre><code>1.æŸ¥çœ‹ä¸»æœºåhostname2.ä¿®æ”¹ä¸»æœºå(é‡å¯åæ— æ•ˆ)hostname hadoop3.ä¿®æ”¹ä¸»æœºå(é‡å¯åæ°¸ä¹…ç”Ÿæ•ˆ)vi /ect/sysconfig/network4.ä¿®æ”¹IP(é‡å¯åæ— æ•ˆ)ifconfig eth0 192.168.12.225.ä¿®æ”¹IP(é‡å¯åæ°¸ä¹…ç”Ÿæ•ˆ)vi /etc/sysconfig/network-scripts/ifcfg-eth06.æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯uname -auname -r7.æŸ¥çœ‹IDå‘½ä»¤id -uid -g8.æ—¥æœŸdatedate +%Y-%m-%ddate +%Tdate +%Y-%m-%d" "%T9.æ—¥å†cal 201210.æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯file filename11.æŒ‚è½½ç¡¬ç›˜mountumountåŠ è½½windowså…±äº«mount -t cifs //192.168.1.100/tools /mnt12.æŸ¥çœ‹æ–‡ä»¶å¤§å°du -hdu -ah13.æŸ¥çœ‹åˆ†åŒºdf -h14.sshssh hadoop@192.168.1.115.å…³æœºshutdown -h now /init 0shutdown -r now /reboot</code></pre><h4 id="2-3-ç”¨æˆ·å’Œç»„"><a href="#2-3-ç”¨æˆ·å’Œç»„" class="headerlink" title="2.3 ç”¨æˆ·å’Œç»„"></a>2.3 ç”¨æˆ·å’Œç»„</h4><pre><code>æ·»åŠ ä¸€ä¸ªtomç”¨æˆ·ï¼Œè®¾ç½®å®ƒå±äºusersç»„ï¼Œå¹¶æ·»åŠ æ³¨é‡Šä¿¡æ¯åˆ†æ­¥å®Œæˆï¼šuseradd tom          usermod -g users tom          usermod -c "hr tom" tomä¸€æ­¥å®Œæˆï¼šuseradd -g users -c "hr tom" tomè®¾ç½®tomç”¨æˆ·çš„å¯†ç passwd tomä¿®æ”¹tomç”¨æˆ·çš„ç™»é™†åä¸ºtomcatusermod -l tomcat tomå°†tomcatæ·»åŠ åˆ°syså’Œrootç»„ä¸­usermod -G sys,root tomcatæŸ¥çœ‹tomcatçš„ç»„ä¿¡æ¯groups tomcatæ·»åŠ ä¸€ä¸ªjerryç”¨æˆ·å¹¶è®¾ç½®å¯†ç useradd jerrypasswd jerryæ·»åŠ ä¸€ä¸ªäº¤americaçš„ç»„groupadd americaå°†jerryæ·»åŠ åˆ°americaç»„ä¸­usermod -g america jerryå°†tomcatç”¨æˆ·ä»rootç»„å’Œsysç»„åˆ é™¤gpasswd -d tomcat rootgpasswd -d tomcat syså°†americaç»„åä¿®æ”¹ä¸ºamgroupmod -n am america</code></pre><h4 id="2-4-æƒé™"><a href="#2-4-æƒé™" class="headerlink" title="2.4 æƒé™"></a>2.4 æƒé™</h4><pre><code>åˆ›å»ºa.txtå’Œb.txtæ–‡ä»¶ï¼Œå°†ä»–ä»¬è®¾ä¸ºå…¶æ‹¥æœ‰è€…å’Œæ‰€åœ¨ç»„å¯å†™å…¥ï¼Œä½†å…¶ä»–ä»¥å¤–çš„äººåˆ™ä¸å¯å†™å…¥:chmod ug+w,o-w a.txt b.txtåˆ›å»ºc.txtæ–‡ä»¶æ‰€æœ‰äººéƒ½å¯ä»¥å†™å’Œæ‰§è¡Œchmod a=wx c.txt æˆ–chmod 666 c.txtå°†/hadoopç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•çš†è®¾ä¸ºä»»ä½•äººå¯è¯»å–chmod -R a+r /hadoopå°†/hadoopç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•çš„æ‹¥æœ‰è€…è®¾ä¸ºrootï¼Œç”¨æˆ·æ‹¥æœ‰ç»„ä¸ºuserschown -R root:users /hadoopå°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•çš„ç”¨æˆ·çš†è®¾ä¸ºhadoopï¼Œç»„è®¾ä¸ºuserschown -R hadoop:users *</code></pre><h4 id="2-5-ç›®å½•å±æ€§"><a href="#2-5-ç›®å½•å±æ€§" class="headerlink" title="2.5 ç›®å½•å±æ€§"></a>2.5 ç›®å½•å±æ€§</h4><pre><code>1.æŸ¥çœ‹æ–‡ä»¶å¤¹å±æ€§ls -ld test2.æ–‡ä»¶å¤¹çš„rwx--x:å¯ä»¥cdè¿›å»r-x:å¯ä»¥cdè¿›å»å¹¶ls-wx:å¯ä»¥cdè¿›å»å¹¶touchï¼Œrmè‡ªå·±çš„æ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥viå…¶ä»–ç”¨æˆ·çš„æ–‡ä»¶-wt:å¯ä»¥cdè¿›å»å¹¶touchï¼Œrmè‡ªå·±çš„æ–‡ä»¶ls -ld /tmpdrwxrwxrwtçš„æƒé™å€¼æ˜¯1777(sticky)</code></pre><h4 id="2-6-è½¯ä»¶å®‰è£…"><a href="#2-6-è½¯ä»¶å®‰è£…" class="headerlink" title="2.6 è½¯ä»¶å®‰è£…"></a>2.6 è½¯ä»¶å®‰è£…</h4><pre><code>1.å®‰è£…JDK    *æ·»åŠ æ‰§è¡Œæƒé™         chmod u+x jdk-6u45-linux-i586.bin    *è§£å‹        ./jdk-6u45-linux-i586.bin    *åœ¨/usrç›®å½•ä¸‹åˆ›å»ºjavaç›®å½•        mkdir /usr/java    *å°†/softç›®å½•ä¸‹çš„è§£å‹çš„jdk1.6.0_45å‰ªåˆ‡åˆ°/usr/javaç›®å½•ä¸‹        mv jdk1.6.0_45/ /usr/java/    *æ·»åŠ ç¯å¢ƒå˜é‡        vim /etc/profile        *åœ¨/etc/profileæ–‡ä»¶æœ€åæ·»åŠ             export JAVA_HOME=/usr/java/jdk1.6.0_45            export CLASSPATH=$JAVA_HOME/lib            export PATH=$PATH:$JAVA_HOME/bin    *æ›´æ–°é…ç½®        source /etc/profile2.å®‰è£…tomcat    tar -zxvf /soft/apache-tomcat-7.0.47.tar.gz -C /programs/    cd /programs/apache-tomcat-7.0.47/bin/    ./startup.sh3.å®‰è£…eclipse</code></pre><h4 id="2-7-vim"><a href="#2-7-vim" class="headerlink" title="2.7 vim"></a>2.7 vim</h4><pre><code>ia/Ao/Or + ?æ›¿æ¢0:æ–‡ä»¶å½“å‰è¡Œçš„å¼€å¤´$:æ–‡ä»¶å½“å‰è¡Œçš„æœ«å°¾G:æ–‡ä»¶çš„æœ€åä¸€è¡Œå¼€å¤´1 + Gåˆ°ç¬¬ä¸€è¡Œ 9 + Gåˆ°ç¬¬ä¹è¡Œ = :9dd:åˆ é™¤ä¸€è¡Œ3ddï¼šåˆ é™¤3è¡Œyy:å¤åˆ¶ä¸€è¡Œ3yy:å¤åˆ¶3è¡Œp:ç²˜è´´u:undoctrl + r:redo"aå‰ªåˆ‡æ¿a"bå‰ªåˆ‡æ¿b"apç²˜è´´å‰ªåˆ‡æ¿açš„å†…å®¹æ¯æ¬¡è¿›å…¥viå°±æœ‰è¡Œå·vi ~/.vimrcset nu:w a.txtå¦å­˜ä¸º:w &gt;&gt; a.txtå†…å®¹è¿½åŠ åˆ°a.txt:e!æ¢å¤åˆ°æœ€åˆçŠ¶æ€:1,$s/hadoop/root/g å°†ç¬¬ä¸€è¡Œåˆ°è¿½åä¸€è¡Œçš„hadoopæ›¿æ¢ä¸ºroot:1,$s/hadoop/root/c å°†ç¬¬ä¸€è¡Œåˆ°è¿½åä¸€è¡Œçš„hadoopæ›¿æ¢ä¸ºroot(æœ‰æç¤º)</code></pre><h4 id="2-8-æŸ¥æ‰¾"><a href="#2-8-æŸ¥æ‰¾" class="headerlink" title="2.8 æŸ¥æ‰¾"></a>2.8 æŸ¥æ‰¾</h4><pre><code>1.æŸ¥æ‰¾å¯æ‰§è¡Œçš„å‘½ä»¤ï¼šwhich ls2.æŸ¥æ‰¾å¯æ‰§è¡Œçš„å‘½ä»¤å’Œå¸®åŠ©çš„ä½ç½®ï¼šwhereis ls3.æŸ¥æ‰¾æ–‡ä»¶(éœ€è¦æ›´æ–°åº“:updatedb)locate hadoop.txt4.ä»æŸä¸ªæ–‡ä»¶å¤¹å¼€å§‹æŸ¥æ‰¾find / -name "hadooop*"find / -name "hadooop*" -ls5.æŸ¥æ‰¾å¹¶åˆ é™¤find / -name "hadooop*" -ok rm {} \;find / -name "hadooop*" -exec rm {} \;6.æŸ¥æ‰¾ç”¨æˆ·ä¸ºhadoopçš„æ–‡ä»¶find /usr -user hadoop -ls7.æŸ¥æ‰¾ç”¨æˆ·ä¸ºhadoopå¹¶ä¸”(-a)æ‹¥æœ‰ç»„ä¸ºrootçš„æ–‡ä»¶find /usr -user hadoop -a -group root -ls8.æŸ¥æ‰¾ç”¨æˆ·ä¸ºhadoopæˆ–è€…(-o)æ‹¥æœ‰ç»„ä¸ºrootå¹¶ä¸”æ˜¯æ–‡ä»¶å¤¹ç±»å‹çš„æ–‡ä»¶find /usr -user hadoop -o -group root -a -type d9.æŸ¥æ‰¾æƒé™ä¸º777çš„æ–‡ä»¶find / -perm -777 -type d -ls10.æ˜¾ç¤ºå‘½ä»¤å†å²history11.grepgrep hadoop /etc/password</code></pre><h4 id="2-9-æ‰“åŒ…ä¸å‹ç¼©"><a href="#2-9-æ‰“åŒ…ä¸å‹ç¼©" class="headerlink" title="2.9 æ‰“åŒ…ä¸å‹ç¼©"></a>2.9 æ‰“åŒ…ä¸å‹ç¼©</h4><pre><code>1.gzipå‹ç¼©gzip a.txt2.è§£å‹gunzip a.txt.gzgzip -d a.txt.gz3.bzip2å‹ç¼©bzip2 a4.è§£å‹bunzip2 a.bz2bzip2 -d a.bz25.å°†å½“å‰ç›®å½•çš„æ–‡ä»¶æ‰“åŒ…tar -cvf bak.tar .å°†/etc/passwordè¿½åŠ æ–‡ä»¶åˆ°bak.tarä¸­(r)tar -rvf bak.tar /etc/password6.è§£å‹tar -xvf bak.tar7.æ‰“åŒ…å¹¶å‹ç¼©gziptar -zcvf a.tar.gz8.è§£å‹ç¼©tar -zxvf a.tar.gzè§£å‹åˆ°/usr/ä¸‹tar -zxvf a.tar.gz -C /usr9.æŸ¥çœ‹å‹ç¼©åŒ…å†…å®¹tar -ztvf a.tar.gzzip/unzip10.æ‰“åŒ…å¹¶å‹ç¼©æˆbz2tar -jcvf a.tar.bz211.è§£å‹bz2tar -jxvf a.tar.bz2</code></pre><h4 id="2-10-æ­£åˆ™"><a href="#2-10-æ­£åˆ™" class="headerlink" title="2.10 æ­£åˆ™"></a>2.10 æ­£åˆ™</h4><pre><code>1.cutæˆªå–ä»¥:åˆ†å‰²ä¿ç•™ç¬¬ä¸ƒæ®µgrep hadoop /etc/passwd | cut -d: -f72.æ’åºdu | sort -n 3.æŸ¥è¯¢ä¸åŒ…å«hadoopçš„grep -v hadoop /etc/passwd4.æ­£åˆ™è¡¨è¾¾åŒ…å«hadoopgrep 'hadoop' /etc/passwd5.æ­£åˆ™è¡¨è¾¾(ç‚¹ä»£è¡¨ä»»æ„ä¸€ä¸ªå­—ç¬¦)grep 'h.*p' /etc/passwd6.æ­£åˆ™è¡¨è¾¾ä»¥hadoopå¼€å¤´grep '^hadoop' /etc/passwd7.æ­£åˆ™è¡¨è¾¾ä»¥hadoopç»“å°¾grep 'hadoop$' /etc/passwdè§„åˆ™ï¼š.  : ä»»æ„ä¸€ä¸ªå­—ç¬¦a* : ä»»æ„å¤šä¸ªa(é›¶ä¸ªæˆ–å¤šä¸ªa)a? : é›¶ä¸ªæˆ–ä¸€ä¸ªaa+ : ä¸€ä¸ªæˆ–å¤šä¸ªa.* : ä»»æ„å¤šä¸ªä»»æ„å­—ç¬¦\. : è½¬ä¹‰.\&lt;h.*p\&gt; ï¼šä»¥hå¼€å¤´ï¼Œpç»“å°¾çš„ä¸€ä¸ªå•è¯o\{2\} : oé‡å¤ä¸¤æ¬¡grep '^i.\{18\}n$' /usr/share/dict/wordsæŸ¥æ‰¾ä¸æ˜¯ä»¥#å¼€å¤´çš„è¡Œgrep -v '^#' a.txt | grep -v '^$' ä»¥hæˆ–rå¼€å¤´çš„grep '^[hr]' /etc/passwdä¸æ˜¯ä»¥hå’Œrå¼€å¤´çš„grep '^[^hr]' /etc/passwdä¸æ˜¯ä»¥håˆ°rå¼€å¤´çš„grep '^[^h-r]' /etc/passwd</code></pre><h4 id="2-11-è¾“å…¥è¾“å‡ºé‡å®šå‘åŠç®¡é“"><a href="#2-11-è¾“å…¥è¾“å‡ºé‡å®šå‘åŠç®¡é“" class="headerlink" title="2.11 è¾“å…¥è¾“å‡ºé‡å®šå‘åŠç®¡é“"></a>2.11 è¾“å…¥è¾“å‡ºé‡å®šå‘åŠç®¡é“</h4><pre><code>1.æ–°å»ºä¸€ä¸ªæ–‡ä»¶touch a.txt&gt; b.txt2.é”™è¯¯é‡å®šå‘:2&gt;find /etc -name zhaoxing.txt 2&gt; error.txt3.å°†æ­£ç¡®æˆ–é”™è¯¯çš„ä¿¡æ¯éƒ½è¾“å…¥åˆ°log.txtä¸­find /etc -name passwd &gt; /tmp/log.txt 2&gt;&amp;1 find /etc -name passwd &amp;&gt; /tmp/log.txt4.è¿½åŠ &gt;&gt;5.å°†å°å†™è½¬ä¸ºå¤§å†™ï¼ˆè¾“å…¥é‡å®šå‘ï¼‰tr "a-z" "A-Z" &lt; /etc/passwd6.è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶cat &gt; log.txt &lt;&lt; EXIT&gt; ccc&gt; ddd&gt; EXI7.æŸ¥çœ‹/etcä¸‹çš„æ–‡ä»¶æœ‰å¤šå°‘ä¸ªï¼Ÿls -l /etc/ | grep '^d' | wc -l8.æŸ¥çœ‹/etcä¸‹çš„æ–‡ä»¶æœ‰å¤šå°‘ä¸ªï¼Œå¹¶å°†æ–‡ä»¶è¯¦æƒ…è¾“å…¥åˆ°result.txtä¸­ls -l /etc/ | grep '^d' | tee result.txt | wc -l</code></pre><h4 id="2-12-è¿›ç¨‹æ§åˆ¶"><a href="#2-12-è¿›ç¨‹æ§åˆ¶" class="headerlink" title="2.12 è¿›ç¨‹æ§åˆ¶"></a>2.12 è¿›ç¨‹æ§åˆ¶</h4><pre><code>1.æŸ¥çœ‹ç”¨æˆ·æœ€è¿‘ç™»å½•æƒ…å†µlastlastlog2.æŸ¥çœ‹ç¡¬ç›˜ä½¿ç”¨æƒ…å†µdf3.æŸ¥çœ‹æ–‡ä»¶å¤§å°du4.æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µfree5.æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿ/proc6.æŸ¥çœ‹æ—¥å¿—ls /var/log/7.æŸ¥çœ‹ç³»ç»ŸæŠ¥é”™æ—¥å¿—tail /var/log/messages8.æŸ¥çœ‹è¿›ç¨‹top9.ç»“æŸè¿›ç¨‹kill 1234kill -9 4333</code></pre><hr><p><strong>æŒç»­æ›´æ–°ä¸­â€¦ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æ¬¢è¿è”ç³»æˆ‘ï¼Œåœ¨æ–‡ç« æœ€åè¯„è®ºåŒºã€ç•™è¨€å’Œè®¨è®ºã€‘ï¼Œå½“ç„¶ï¼Œæ¬¢è¿ç‚¹å‡»æ–‡ç« æœ€åçš„æ‰“èµæŒ‰é”®ï¼Œè¯·åšä¸»ä¸€æ¯å†°é˜”ä¹ï¼Œç¬‘ï½</strong></p><table>  <tbody><tr>    <td><img width="100" src="https://hualei.online/medias/reward/alipay.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/wechat.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/zan.png"></td>     </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äº’è”ç½‘ </tag>
            
            <tag> æŠ€æœ¯ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hadoop2.0å®Œå…¨åˆ†å¸ƒå¼HAæ­å»º</title>
      <link href="/posts/4175.html"/>
      <url>/posts/4175.html</url>
      
        <content type="html"><![CDATA[<h1 id="1-Hadoop2-0-HAæ­å»ºæ­¥éª¤"><a href="#1-Hadoop2-0-HAæ­å»ºæ­¥éª¤" class="headerlink" title="1    Hadoop2.0 HAæ­å»ºæ­¥éª¤"></a>1    Hadoop2.0 HAæ­å»ºæ­¥éª¤</h1><h2 id="1-1-å‡†å¤‡å·¥ä½œ"><a href="#1-1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="1.1    å‡†å¤‡å·¥ä½œ"></a>1.1    å‡†å¤‡å·¥ä½œ</h2><p>6å°è™šæ‹Ÿæœºï¼Œå†…å­˜512Mï¼Œhadoop1~6<br>ä¿®æ”¹é™æ€IPï¼š192.168.65.121 ~ 126</p><h2 id="1-2-æ¶æ„å›¾"><a href="#1-2-æ¶æ„å›¾" class="headerlink" title="1.2    æ¶æ„å›¾"></a>1.2    æ¶æ„å›¾</h2><p> <img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/1.png" alt="1"></p><h2 id="1-3-é›†ç¾¤èŠ‚ç‚¹åˆ†é…"><a href="#1-3-é›†ç¾¤èŠ‚ç‚¹åˆ†é…" class="headerlink" title="1.3    é›†ç¾¤èŠ‚ç‚¹åˆ†é…"></a>1.3    é›†ç¾¤èŠ‚ç‚¹åˆ†é…</h2><p>ïƒ˜    hadoop1<br>Zookeeper<br>NameNode(active)<br>Resourcemanager (active)<br>ïƒ˜    hadoop2<br>Zookeeper<br>NameNode (standby)<br>ïƒ˜    hadoop3<br>Zookeeper<br>ResourceManager(standby)<br>ïƒ˜    hadoop4<br>DataNode<br>NodeManager<br>JournalNode<br>ïƒ˜    hadoop5<br>DataNode<br>NodeManager<br>JournalNode<br>ïƒ˜    hadoop6<br>DataNode<br>NodeManager<br>JournalNode</p><h2 id="1-4-å®‰è£…æ­¥éª¤"><a href="#1-4-å®‰è£…æ­¥éª¤" class="headerlink" title="1.4    å®‰è£…æ­¥éª¤"></a>1.4    å®‰è£…æ­¥éª¤</h2><h3 id="1-4-1-å›ºåŒ–IP"><a href="#1-4-1-å›ºåŒ–IP" class="headerlink" title="1.4.1    å›ºåŒ–IP"></a>1.4.1    å›ºåŒ–IP</h3><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<br>cd /etc/sysconfig/network-scripts    #è¿›å…¥ç½‘ç»œé…ç½®ç›®å½•<br>dir ifcfg*                                #æ‰¾åˆ°ç½‘å¡é…ç½®æ–‡ä»¶<br>ifcfg-ens16777736  ifcfg-lo<br>vi ifcfg-ens16777736<br>é…ç½®æ–‡ä»¶å†…å®¹<br>TYPE=Ethernet<br>BOOTPROTO=static                                    #æ”¹æˆstaticï¼Œé’ˆå¯¹NAT<br>NAME=eno16777736<br>UUID=4cc9c89b-cf9e-4847-b9ea-ac713baf4cc8<br>DEVICE=eno16777736<br>ONBOOT=yes                    #å¼€æœºå¯åŠ¨æ­¤ç½‘å¡<br>IPADDR=192.168.163.129    #å›ºå®šIPåœ°å€<br>NETMASK=255.255.255.0        #å­ç½‘æ©ç <br>GATEWAY=192.168.163.2        #ç½‘å…³å’ŒNATè‡ªåŠ¨é…ç½®çš„ç›¸åŒï¼Œä¸åŒåˆ™æ— æ³•ç™»å½•<br>DNS1=192.168.163.2            #å’Œç½‘å…³ç›¸åŒ<br>é‡å¯ç½‘ç»œ<br>service network restart<br>ping <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a></p><h3 id="1-4-2-æ°¸ä¹…å…³é—­æ¯å°æœºå™¨çš„é˜²ç«å¢™"><a href="#1-4-2-æ°¸ä¹…å…³é—­æ¯å°æœºå™¨çš„é˜²ç«å¢™" class="headerlink" title="1.4.2    æ°¸ä¹…å…³é—­æ¯å°æœºå™¨çš„é˜²ç«å¢™"></a>1.4.2    æ°¸ä¹…å…³é—­æ¯å°æœºå™¨çš„é˜²ç«å¢™</h3><p>systemctl stop firewalld.service            #å…³é—­é˜²ç«å¢™æœåŠ¡<br>systemctl disable firewalld.service        #ç¦æ­¢é˜²ç«å¢™å¼€å¯å¯åŠ¨<br>firewall-cmd â€“state                        #æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€</p><h3 id="1-4-3-ä¸ºæ¯å°æœºå™¨é…ç½®ä¸»æœºå"><a href="#1-4-3-ä¸ºæ¯å°æœºå™¨é…ç½®ä¸»æœºå" class="headerlink" title="1.4.3    ä¸ºæ¯å°æœºå™¨é…ç½®ä¸»æœºå*"></a>1.4.3    ä¸ºæ¯å°æœºå™¨é…ç½®ä¸»æœºå*</h3><p>hadoop1,hadoop2 â€¦â€¦<br>ä»¥åŠhostsæ–‡ä»¶<br>é…ç½®ä¸»æœºå<br>æ‰§è¡Œï¼švim /etc/hostname ä¿®æ”¹ä¸ºhadoop1~6<br>ç„¶åæ‰§è¡Œ hostname ä¸»æœºå<br>è¾¾åˆ°ä¸é‡å¯ç”Ÿæ•ˆç›®çš„<br>é…ç½®hostsæ–‡ä»¶<br>æ‰§è¡Œï¼švim /etc/hosts<br>ç¤ºä¾‹ï¼š<br>127.0.0.1 localhost<br>::1 localhost<br>192.168.65.121 hadoop1<br>192.168.65.122 hadoop2<br>192.168.65.123 hadoop3<br>192.168.65.124 hadoop4<br>192.168.65.125 hadoop5<br>192.168.65.126 hadoop6</p><h3 id="1-4-4-ä¸ºæ¯å°æœºå™¨é…ç½®sshå…ç§˜é’¥ç™»å½•"><a href="#1-4-4-ä¸ºæ¯å°æœºå™¨é…ç½®sshå…ç§˜é’¥ç™»å½•" class="headerlink" title="1.4.4    ä¸ºæ¯å°æœºå™¨é…ç½®sshå…ç§˜é’¥ç™»å½•"></a>1.4.4    ä¸ºæ¯å°æœºå™¨é…ç½®sshå…ç§˜é’¥ç™»å½•</h3><p>æ‰§è¡Œï¼šssh-keygen<br>ssh-copy-id root@hadoop1 ï¼ˆåˆ†åˆ«å‘é€åˆ°6å°èŠ‚ç‚¹ä¸Šï¼‰<br>vim /root/.ssh/known_hosts æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸ</p><h3 id="1-4-5-ä¸ºæ¯å°æœºå™¨å®‰è£…jdkå’Œé…ç½®JAVA-HOME"><a href="#1-4-5-ä¸ºæ¯å°æœºå™¨å®‰è£…jdkå’Œé…ç½®JAVA-HOME" class="headerlink" title="1.4.5    ä¸ºæ¯å°æœºå™¨å®‰è£…jdkå’Œé…ç½®JAVA_HOME"></a>1.4.5    ä¸ºæ¯å°æœºå™¨å®‰è£…jdkå’Œé…ç½®JAVA_HOME</h3><p>vim /etc/profile<br>åœ¨å°¾è¡Œæ·»åŠ <br>JAVA_HOME=/home/app/jdk1.8.0_65<br>JAVA_BIN=/home/app/jdk1.8.0_65/bin<br>HADOOP_HOME=/home/app/hadoop-2.7.1<br>PATH=$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH<br>CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar<br>export JAVA_HOME JAVA_BIN HADOOP_HOME PATH CLASSPATH</p><h3 id="1-4-6-å‰ä¸‰å°æœºå™¨å®‰è£…å’Œé…ç½®zookeeper"><a href="#1-4-6-å‰ä¸‰å°æœºå™¨å®‰è£…å’Œé…ç½®zookeeper" class="headerlink" title="1.4.6    å‰ä¸‰å°æœºå™¨å®‰è£…å’Œé…ç½®zookeeper"></a>1.4.6    å‰ä¸‰å°æœºå™¨å®‰è£…å’Œé…ç½®zookeeper</h3><p>è§£å‹å®‰è£…åŒ… tar -xvf zookeeper-3.4.8.tar.gz<br>è¿›å…¥confç›®å½• cd zookeeper-3.4.8/conf/<br>å¤åˆ¶zoo_sample.cfg ä¸ºzoo.cfg:  cp zoo_sample.cfg zoo.cfg<br>ç¼–è¾‘zoo.cfgï¼švim zoo.cfg<br> <img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/2.png" alt="2"><br> <img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/3.png" alt="3"><br> <img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/4.png" alt="4">    </p><p>Zookeeperæ ¹ç›®å½•ä¸­åˆ›å»ºtmpæ–‡ä»¶å¤¹ï¼Œtmpæ–‡ä»¶å¤¹ä¸­åˆ›å»ºmyidæ–‡ä»¶ï¼Œç¼–è¾‘æ–‡æœ¬ï¼š1ï¼ˆ2,3ï¼‰</p><p>æ‹·è´æ•´ä¸ªzookeeperç›®å½•åˆ°hadoop2ï¼Œhadoop3å¹¶ä¿®æ”¹myidæ–‡ä»¶åˆ†åˆ«ä¸º2,3<br>scp -r zookeeper-3.4.8 hadoop2:/home/app</p><h3 id="1-4-7-å®‰è£…å’Œé…ç½®01èŠ‚ç‚¹çš„hadoop"><a href="#1-4-7-å®‰è£…å’Œé…ç½®01èŠ‚ç‚¹çš„hadoop" class="headerlink" title="1.4.7    å®‰è£…å’Œé…ç½®01èŠ‚ç‚¹çš„hadoop"></a>1.4.7    å®‰è£…å’Œé…ç½®01èŠ‚ç‚¹çš„hadoop</h3><p>åˆ›å»º/home/appç›®å½•<br>è§£å‹å®‰è£…åŒ…</p><h3 id="1-4-8-é…ç½®hadoop-env-sh"><a href="#1-4-8-é…ç½®hadoop-env-sh" class="headerlink" title="1.4.8    é…ç½®hadoop-env.sh"></a>1.4.8    é…ç½®hadoop-env.sh</h3><p>cd etc/hadoop<br>é…ç½® hadoop-env.sh<br>vim hadoop-env.sh<br>JDKå®‰è£…ç›®å½•ï¼Œè™½ç„¶ç³»ç»Ÿé…ç½®äº†JAVA_HOMEï¼Œä½†æœ‰æ—¶æ— æ³•æ­£ç¡®è¯†åˆ«ï¼Œæœ€åè¿›è¡Œé…ç½®<br>export JAVA_HOME=/home/app/jdk1.8.0_65<br>æŒ‡å®šhadoopçš„é…ç½®æ–‡ä»¶ç›®å½•ï¼Œä¸è¿è¡Œhadoopå¯ä»¥ä¸æŒ‡å®š<br>export HADOOP_CONF_DIR=/home/app/hadoop-2.7.1/etc/hadoop<br>é…ç½®jdkå®‰è£…æ‰€åœ¨ç›®å½•<br>é…ç½®hadoopé…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•</p><h3 id="1-4-9-é…ç½®core-site-xml"><a href="#1-4-9-é…ç½®core-site-xml" class="headerlink" title="1.4.9    é…ç½®core-site.xml"></a>1.4.9    é…ç½®core-site.xml</h3><pre><code>&lt;configuration&gt;&lt;!--ç”¨æ¥æŒ‡å®šhdfsçš„è€å¤§ï¼Œnsä¸ºå›ºå®šå±æ€§åï¼Œè¡¨ç¤ºä¸¤ä¸ªnamenode--&gt;&lt;property&gt;&lt;name&gt;fs.defaultFS&lt;/name&gt;&lt;value&gt;hdfs://ns&lt;/value&gt;&lt;/property&gt;&lt;!--ç”¨æ¥æŒ‡å®šhadoopè¿è¡Œæ—¶äº§ç”Ÿæ–‡ä»¶çš„å­˜æ”¾ç›®å½•--&gt;&lt;property&gt;&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;&lt;value&gt;/home/app/hadoop-2.7.1/tmp&lt;/value&gt;&lt;/property&gt;&lt;!--æ‰§è¡Œzookeeperåœ°å€--&gt;&lt;property&gt;&lt;name&gt;ha.zookeeper.quorum&lt;/name&gt;&lt;value&gt;hadoop1:2181,hadoop2:2181,hadoop3:2181&lt;/value&gt;&lt;/property&gt;    &lt;/configuration&gt;</code></pre><h3 id="1-4-10-é…ç½®01èŠ‚ç‚¹çš„hdfs-site-xml"><a href="#1-4-10-é…ç½®01èŠ‚ç‚¹çš„hdfs-site-xml" class="headerlink" title="1.4.10    é…ç½®01èŠ‚ç‚¹çš„hdfs-site.xml"></a>1.4.10    é…ç½®01èŠ‚ç‚¹çš„hdfs-site.xml</h3><p>é…ç½®</p><pre><code>&lt;configuration&gt;&lt;!--æ‰§è¡Œhdfsçš„nameserviceä¸ºns,å’Œcore-site.xmlä¿æŒä¸€è‡´--&gt;&lt;property&gt;&lt;name&gt;dfs.nameservices&lt;/name&gt;&lt;value&gt;ns&lt;/value&gt;&lt;/property&gt;&lt;!--nsä¸‹æœ‰ä¸¤ä¸ªnamenode,åˆ†åˆ«æ˜¯nn1,nn2--&gt;&lt;property&gt;&lt;name&gt;dfs.ha.namenodes.ns&lt;/name&gt;&lt;value&gt;nn1,nn2&lt;/value&gt;&lt;/property&gt;&lt;!--nn1 çš„ RPC é€šä¿¡åœ°å€--&gt;&lt;property&gt;&lt;name&gt;dfs.namenode.rpc-address.ns.nn1&lt;/name&gt;&lt;value&gt;hadoop1:9000&lt;/value&gt;&lt;/property&gt;&lt;!--nn1çš„httpé€šä¿¡åœ°å€--&gt;&lt;property&gt;&lt;name&gt;dfs.namenode.http-address.ns.nn1&lt;/name&gt;&lt;value&gt;hadoop1:50070&lt;/value&gt;&lt;/property&gt;&lt;!--nn2çš„RPCé€šä¿¡åœ°å€--&gt;&lt;property&gt;&lt;name&gt;dfs.namenode.rpc-address.ns.nn2&lt;/name&gt;&lt;value&gt;hadoop2:9000&lt;/value&gt;&lt;/property&gt;&lt;!--nn2 çš„ http é€šä¿¡åœ°å€--&gt;&lt;property&gt;&lt;name&gt;dfs.namenode.http-address.ns.nn2&lt;/name&gt;&lt;value&gt;hadoop2:50070&lt;/value&gt;&lt;/property&gt;&lt;!--æŒ‡å®šnamenodeçš„å…ƒæ•°æ®åœ¨JournalNodeä¸Šçš„å­˜æ”¾ä½ç½®,è¿™æ ·ï¼Œnamenode2å¯ä»¥ ä» jn é›†ç¾¤é‡Œè·å–          æœ€æ–°çš„namenodeçš„ä¿¡æ¯ï¼Œè¾¾åˆ°çƒ­å¤‡çš„æ•ˆæœ--&gt;&lt;property&gt;&lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;&lt;value&gt;qjournal://hadoop4:8485;hadoop5:8485;hadoop6:8485/ns&lt;/value&gt;&lt;/property&gt;&lt;!--æŒ‡å®š JournalNode å­˜æ”¾æ•°æ®çš„ä½ç½®--&gt;&lt;property&gt;&lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt;&lt;value&gt;/home/app/hadoop-2.7.1/journal&lt;/value&gt;&lt;/property&gt;&lt;!--å¼€å¯namenodeæ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢--&gt;&lt;property&gt;&lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;&lt;!--é…ç½®åˆ‡æ¢çš„å®ç°æ–¹å¼--&gt;&lt;property&gt;&lt;name&gt;dfs.client.failover.proxy.provider.ns&lt;/name&gt;&lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;&lt;/property&gt;&lt;!--é…ç½®éš”ç¦»æœºåˆ¶--&gt;&lt;property&gt;&lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt;&lt;value&gt;sshfence&lt;/value&gt;&lt;/property&gt;&lt;!--é…ç½®éš”ç¦»æœºåˆ¶çš„sshç™»å½•ç§˜é’¥æ‰€åœ¨çš„ä½ç½®--&gt;&lt;property&gt;&lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt;&lt;value&gt;/root/.ssh/id_rsa&lt;/value&gt;&lt;/property&gt;&lt;!--é…ç½®namenodeæ•°æ®å­˜æ”¾çš„ä½ç½®,å¯ä»¥ä¸é…ç½®ï¼Œå¦‚æœä¸é…ç½®ï¼Œé»˜è®¤ç”¨çš„æ˜¯          core-site.xmlé‡Œé…ç½®çš„hadoop.tmp.dirçš„è·¯å¾„--&gt;&lt;property&gt;&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;&lt;value&gt;file:///home/app/hadoop-2.7.1/tmp/namenode&lt;/value&gt;&lt;/property&gt;&lt;!--é…ç½®datanodeæ•°æ®å­˜æ”¾çš„ä½ç½®,å¯ä»¥ä¸é…ç½®ï¼Œå¦‚æœä¸é…ç½®ï¼Œé»˜è®¤ç”¨çš„æ˜¯               core-site.xml é‡Œé…ç½®çš„ hadoop.tmp.dir çš„è·¯å¾„--&gt;&lt;property&gt;&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;&lt;value&gt;file:///home/app/hadoop-2.7.1/tmp/datanode&lt;/value&gt;&lt;/property&gt;&lt;!--é…ç½® block å‰¯æœ¬æ•°é‡--&gt;&lt;property&gt;&lt;name&gt;dfs.replication&lt;/name&gt;&lt;value&gt;3&lt;/value&gt;&lt;/property&gt;&lt;!--è®¾ç½®hdfsçš„æ“ä½œæƒé™ï¼Œfalseè¡¨ç¤ºä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥åœ¨hdfsä¸Šæ“ä½œæ–‡ä»¶--&gt;&lt;property&gt;&lt;name&gt;dfs.permissions&lt;/name&gt;&lt;value&gt;false&lt;/value&gt;&lt;/property&gt;    &lt;/configuration&gt;</code></pre><h3 id="1-4-11-é…ç½®-mapred-site-xml"><a href="#1-4-11-é…ç½®-mapred-site-xml" class="headerlink" title="1.4.11    é…ç½® mapred-site.xml"></a>1.4.11    é…ç½® mapred-site.xml</h3><p>é…ç½®ä»£ç ï¼š</p><pre><code>    &lt;configuration&gt;&lt;property&gt;&lt;!--æŒ‡å®šmapreduceè¿è¡Œåœ¨yarnä¸Š--&gt;&lt;name&gt;mapreduce.framework.name&lt;/name&gt;&lt;value&gt;yarn&lt;/value&gt;&lt;/property&gt;    &lt;/configuration&gt;</code></pre><h3 id="1-4-12-é…ç½®yarn-site-xml"><a href="#1-4-12-é…ç½®yarn-site-xml" class="headerlink" title="1.4.12    é…ç½®yarn-site.xml"></a>1.4.12    é…ç½®yarn-site.xml</h3><p>é…ç½®ä»£ç ï¼š</p><pre><code>    &lt;configuration&gt;&lt;!--å¼€å¯YARN HA --&gt;&lt;property&gt;&lt;name&gt;yarn.resourcemanager.ha.enabled&lt;/name&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;  &lt;!--æŒ‡å®šä¸¤ä¸ªresourcemanagerçš„åç§°--&gt;&lt;property&gt;&lt;name&gt;yarn.resourcemanager.ha.rm-ids&lt;/name&gt;&lt;value&gt;rm1,rm2&lt;/value&gt;&lt;/property&gt;&lt;!--é…ç½®rm1ï¼Œrm2çš„ä¸»æœº--&gt;&lt;property&gt;&lt;name&gt;yarn.resourcemanager.hostname.rm1&lt;/name&gt;&lt;value&gt;hadoop1&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;yarn.resourcemanager.hostname.rm2&lt;/name&gt;&lt;value&gt;hadoop3&lt;/value&gt;&lt;/property&gt;&lt;!--å¼€å¯yarnæ¢å¤æœºåˆ¶--&gt;&lt;property&gt;&lt;name&gt;yarn.resourcemanager.recovery.enabled&lt;/name&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;&lt;!--æ‰§è¡Œrmæ¢å¤æœºåˆ¶å®ç°ç±»--&gt;&lt;property&gt;&lt;name&gt;yarn.resourcemanager.store.class&lt;/name&gt;&lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore&lt;/value&gt;&lt;/property&gt;&lt;!--é…ç½®zookeeperçš„åœ°å€--&gt;&lt;property&gt;&lt;name&gt;yarn.resourcemanager.zk-address&lt;/name&gt;&lt;value&gt;hadoop1:2181,hadoop2:2181,hadoop3:2181&lt;/value&gt;&lt;description&gt;For multiple zk services, separate them with comma&lt;/description&gt;&lt;/property&gt;&lt;!--æŒ‡å®šYARN HAçš„åç§°--&gt;&lt;property&gt;&lt;name&gt;yarn.resourcemanager.cluster-id&lt;/name&gt;&lt;value&gt;yarn-ha&lt;/value&gt;&lt;/property&gt;&lt;!--æŒ‡å®š yarn çš„è€å¤§ resoucemanager çš„åœ°å€--&gt;&lt;property&gt;&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;&lt;value&gt;hadoop1&lt;/value&gt;&lt;/property&gt;&lt;!--NodeManagerè·å–æ•°æ®çš„æ–¹å¼--&gt;&lt;property&gt;&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;&lt;value&gt;mapreduce_shuffle&lt;/value&gt;&lt;/property&gt;    &lt;/configuration&gt;</code></pre><h3 id="1-4-13-é…ç½®slavesæ–‡ä»¶"><a href="#1-4-13-é…ç½®slavesæ–‡ä»¶" class="headerlink" title="1.4.13    é…ç½®slavesæ–‡ä»¶"></a>1.4.13    é…ç½®slavesæ–‡ä»¶</h3><p>é…ç½®ä»£ç ï¼š<br>hadoop4<br>hadoop5<br>hadoop6</p><h3 id="1-4-14-æ ¹æ®é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºç›¸å…³çš„æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾å¯¹åº”æ•°æ®"><a href="#1-4-14-æ ¹æ®é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºç›¸å…³çš„æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾å¯¹åº”æ•°æ®" class="headerlink" title="1.4.14    æ ¹æ®é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºç›¸å…³çš„æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾å¯¹åº”æ•°æ®"></a>1.4.14    æ ¹æ®é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºç›¸å…³çš„æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾å¯¹åº”æ•°æ®</h3><p>åœ¨hadoop-2.7.1ç›®å½•ä¸‹åˆ›å»º:<br>â‘ journalç›®å½•<br>â‘¡åˆ›å»ºtmpç›®å½•<br>â‘¢åœ¨tmpç›®å½•ä¸‹ï¼Œåˆ†åˆ«åˆ›å»ºnamenodeç›®å½•å’Œdatanodeç›®å½•</p><h3 id="1-4-15-é…ç½®-hadoop-çš„ç¯å¢ƒå˜é‡ï¼ˆå¯ä¸é…ï¼‰"><a href="#1-4-15-é…ç½®-hadoop-çš„ç¯å¢ƒå˜é‡ï¼ˆå¯ä¸é…ï¼‰" class="headerlink" title="1.4.15    é…ç½® hadoop çš„ç¯å¢ƒå˜é‡ï¼ˆå¯ä¸é…ï¼‰"></a>1.4.15    é…ç½® hadoop çš„ç¯å¢ƒå˜é‡ï¼ˆå¯ä¸é…ï¼‰</h3><p>JAVA_HOME=/home/app/jdk1.8.0_65<br>JAVA_BIN=/home/app/jdk1.8.0_65/bin<br>HADOOP_HOME=/home/app/hadoop-2.7.1<br>PATH=$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH<br>CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar<br>export JAVA_HOME JAVA_BIN HADOOP_HOME PATH CLASSPATH</p><h3 id="1-4-16-é€šè¿‡scp-å‘½ä»¤ï¼Œå°†hadoopå®‰è£…ç›®å½•è¿œç¨‹copyåˆ°å…¶ä»–5å°æœºå™¨ä¸Š"><a href="#1-4-16-é€šè¿‡scp-å‘½ä»¤ï¼Œå°†hadoopå®‰è£…ç›®å½•è¿œç¨‹copyåˆ°å…¶ä»–5å°æœºå™¨ä¸Š" class="headerlink" title="1.4.16    é€šè¿‡scp å‘½ä»¤ï¼Œå°†hadoopå®‰è£…ç›®å½•è¿œç¨‹copyåˆ°å…¶ä»–5å°æœºå™¨ä¸Š"></a>1.4.16    é€šè¿‡scp å‘½ä»¤ï¼Œå°†hadoopå®‰è£…ç›®å½•è¿œç¨‹copyåˆ°å…¶ä»–5å°æœºå™¨ä¸Š</h3><p>æ¯”å¦‚å‘hadoop02èŠ‚ç‚¹ä¼ è¾“ï¼š<br>scp -r hadoop-2.7.1 root@hadoop2:/home/app</p><h3 id="1-4-17-å¯åŠ¨zookeeperé›†ç¾¤"><a href="#1-4-17-å¯åŠ¨zookeeperé›†ç¾¤" class="headerlink" title="1.4.17    å¯åŠ¨zookeeperé›†ç¾¤"></a>1.4.17    å¯åŠ¨zookeeperé›†ç¾¤</h3><p>åœ¨Zookeeperå®‰è£…ç›®å½•çš„binç›®å½•ä¸‹æ‰§è¡Œï¼šsh zkServer.sh start<br>sh zkServer.sh status  éªŒè¯æ˜¯å¦å¯åŠ¨æˆåŠŸï¼Œå¦‚æˆåŠŸï¼Œä¸¤å°ä»èŠ‚ç‚¹ä¸€å°ä¸»èŠ‚ç‚¹</p><h3 id="1-4-18-æ ¼å¼åŒ–zookeeper"><a href="#1-4-18-æ ¼å¼åŒ–zookeeper" class="headerlink" title="1.4.18    æ ¼å¼åŒ–zookeeper"></a>1.4.18    æ ¼å¼åŒ–zookeeper</h3><p>åœ¨zkçš„leaderèŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š<br>hdfs zkfc -formatZKï¼Œè¿™ä¸ªæŒ‡ä»¤çš„ä½œç”¨æ˜¯åœ¨zookeeperé›†ç¾¤ä¸Šç”ŸæˆhaèŠ‚ç‚¹ ï¼ˆnsèŠ‚ç‚¹ï¼‰<br>æ³¨ï¼š18â€“24æ­¥å¯ä»¥ç”¨ä¸€æ­¥æ¥æ›¿ä»£ï¼šè¿›å…¥hadoopå®‰è£…ç›®å½•çš„sbinç›®å½•ï¼Œæ‰§è¡Œï¼š sh start-dfs.sh ã€‚ ä½†å»ºè®®è¿˜æ˜¯æŒ‰éƒ¨å°±ç­æ¥æ‰§è¡Œï¼Œæ¯”è¾ƒå¯é ã€‚</p><h3 id="1-4-19-å¯åŠ¨journalnodeé›†ç¾¤"><a href="#1-4-19-å¯åŠ¨journalnodeé›†ç¾¤" class="headerlink" title="1.4.19    å¯åŠ¨journalnodeé›†ç¾¤"></a>1.4.19    å¯åŠ¨journalnodeé›†ç¾¤</h3><p>åœ¨4ã€5ã€6èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š<br>åˆ‡æ¢åˆ°hadoopå®‰è£…ç›®å½•çš„sbinç›®å½•ä¸‹ï¼Œæ‰§è¡Œï¼š<br>sh hadoop-daemons.sh start journalnode<br>ç„¶åæ‰§è¡Œjpså‘½ä»¤æŸ¥çœ‹è¿›ç¨‹ã€‚</p><h3 id="1-4-20-æ ¼å¼åŒ–1èŠ‚ç‚¹çš„namenode"><a href="#1-4-20-æ ¼å¼åŒ–1èŠ‚ç‚¹çš„namenode" class="headerlink" title="1.4.20    æ ¼å¼åŒ–1èŠ‚ç‚¹çš„namenode"></a>1.4.20    æ ¼å¼åŒ–1èŠ‚ç‚¹çš„namenode</h3><p>åœ¨1èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š<br>hadoop namenode -format</p><h3 id="1-4-21-å¯åŠ¨1èŠ‚ç‚¹çš„namenode"><a href="#1-4-21-å¯åŠ¨1èŠ‚ç‚¹çš„namenode" class="headerlink" title="1.4.21    å¯åŠ¨1èŠ‚ç‚¹çš„namenode"></a>1.4.21    å¯åŠ¨1èŠ‚ç‚¹çš„namenode</h3><p>åœ¨ 1 èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š<br>sh hadoop-daemon.sh start namenode</p><h3 id="1-4-22-æŠŠ2èŠ‚ç‚¹çš„namenodeèŠ‚ç‚¹å˜ä¸ºstandby-namenodeèŠ‚ç‚¹"><a href="#1-4-22-æŠŠ2èŠ‚ç‚¹çš„namenodeèŠ‚ç‚¹å˜ä¸ºstandby-namenodeèŠ‚ç‚¹" class="headerlink" title="1.4.22    æŠŠ2èŠ‚ç‚¹çš„namenodeèŠ‚ç‚¹å˜ä¸ºstandby namenodeèŠ‚ç‚¹"></a>1.4.22    æŠŠ2èŠ‚ç‚¹çš„namenodeèŠ‚ç‚¹å˜ä¸ºstandby namenodeèŠ‚ç‚¹</h3><p>åœ¨2èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š<br>hdfs namenode -bootstrapStandby</p><h3 id="1-4-23-å¯åŠ¨-2-èŠ‚ç‚¹çš„-namenode-èŠ‚ç‚¹"><a href="#1-4-23-å¯åŠ¨-2-èŠ‚ç‚¹çš„-namenode-èŠ‚ç‚¹" class="headerlink" title="1.4.23    å¯åŠ¨ 2 èŠ‚ç‚¹çš„ namenode èŠ‚ç‚¹"></a>1.4.23    å¯åŠ¨ 2 èŠ‚ç‚¹çš„ namenode èŠ‚ç‚¹</h3><p>åœ¨2èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š<br>sh hadoop-daemon.sh start namenode</p><h3 id="1-4-24-åœ¨4-5-6èŠ‚ç‚¹ä¸Šå¯åŠ¨datanodeèŠ‚ç‚¹"><a href="#1-4-24-åœ¨4-5-6èŠ‚ç‚¹ä¸Šå¯åŠ¨datanodeèŠ‚ç‚¹" class="headerlink" title="1.4.24    åœ¨4,5,6èŠ‚ç‚¹ä¸Šå¯åŠ¨datanodeèŠ‚ç‚¹"></a>1.4.24    åœ¨4,5,6èŠ‚ç‚¹ä¸Šå¯åŠ¨datanodeèŠ‚ç‚¹</h3><p>åœ¨ 4,5,6 èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š sh hadoop-daemon.sh start datanode</p><h3 id="1-4-25-å¯åŠ¨zkfcï¼ˆå¯åŠ¨FalioverControllerActive"><a href="#1-4-25-å¯åŠ¨zkfcï¼ˆå¯åŠ¨FalioverControllerActive" class="headerlink" title="1.4.25    å¯åŠ¨zkfcï¼ˆå¯åŠ¨FalioverControllerActive)"></a>1.4.25    å¯åŠ¨zkfcï¼ˆå¯åŠ¨FalioverControllerActive)</h3><p>åœ¨1,2èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š<br>sh hadoop-daemon.sh start zkfc</p><h3 id="1-4-26-åœ¨1èŠ‚ç‚¹ä¸Šå¯åŠ¨ä¸»Resourcemanager"><a href="#1-4-26-åœ¨1èŠ‚ç‚¹ä¸Šå¯åŠ¨ä¸»Resourcemanager" class="headerlink" title="1.4.26    åœ¨1èŠ‚ç‚¹ä¸Šå¯åŠ¨ä¸»Resourcemanager"></a>1.4.26    åœ¨1èŠ‚ç‚¹ä¸Šå¯åŠ¨ä¸»Resourcemanager</h3><p>åœ¨1èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼šstart-yarn.sh<br>å¯åŠ¨æˆåŠŸåï¼Œ4,5,6èŠ‚ç‚¹ä¸Šåº”è¯¥æœ‰nodemanager çš„è¿›ç¨‹</p><h3 id="1-4-27-åœ¨-3-èŠ‚ç‚¹ä¸Šå¯åŠ¨å‰¯-Resoucemanager"><a href="#1-4-27-åœ¨-3-èŠ‚ç‚¹ä¸Šå¯åŠ¨å‰¯-Resoucemanager" class="headerlink" title="1.4.27    åœ¨ 3 èŠ‚ç‚¹ä¸Šå¯åŠ¨å‰¯ Resoucemanager"></a>1.4.27    åœ¨ 3 èŠ‚ç‚¹ä¸Šå¯åŠ¨å‰¯ Resoucemanager</h3><p>åœ¨3èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼šsh yarn-daemon.sh start resourcemanager</p><h2 id="1-5-æµ‹è¯•"><a href="#1-5-æµ‹è¯•" class="headerlink" title="1.5    æµ‹è¯•"></a>1.5    æµ‹è¯•</h2><p>è¾“å…¥åœ°å€ï¼š <a href="http://192.168.65.121:50070" target="_blank" rel="noopener">http://192.168.65.121:50070</a> ï¼ŒæŸ¥çœ‹ namenode çš„ä¿¡æ¯ï¼Œæ˜¯activeçŠ¶æ€<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/5.png" alt="5"></p><p>è¾“å…¥åœ°å€ï¼š<a href="http://192.168.65.122:50070æŸ¥çœ‹namenodeçš„ä¿¡æ¯ï¼Œæ˜¯standbyçŠ¶æ€" target="_blank" rel="noopener">http://192.168.65.122:50070æŸ¥çœ‹namenodeçš„ä¿¡æ¯ï¼Œæ˜¯standbyçŠ¶æ€</a><br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/6.png" alt="6"></p><p>ç„¶ååœæ‰01èŠ‚ç‚¹çš„namenode,æ­¤æ—¶å‘ç°standbyçš„namenodeå˜ä¸ºactiveã€‚<br>å¦‚æœå‡ºç°standbyèŠ‚ç‚¹ä¸èƒ½æ­£ç¡®æ›¿ä»£activeçš„æƒ…å†µæ£€æŸ¥fuseræ˜¯å¦æ­£å¸¸<br>yum provides â€œ*/fuserâ€</p><p>åœ¨å¯åŠ¨namenodeçš„ä¸¤å°èŠ‚ç‚¹ä¸Šå®‰è£…fuser,åˆ†åˆ«æ‰§è¡Œ<br>yum -y install psmisc</p><p><a href="http://f.dataguru.cn/hadoop-707122-1-1.html" target="_blank" rel="noopener">http://f.dataguru.cn/hadoop-707122-1-1.html</a></p><hr><p><strong>æŒç»­æ›´æ–°ä¸­â€¦ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æ¬¢è¿è”ç³»æˆ‘ï¼Œåœ¨æ–‡ç« æœ€åè¯„è®ºåŒºã€ç•™è¨€å’Œè®¨è®ºã€‘ï¼Œå½“ç„¶ï¼Œæ¬¢è¿ç‚¹å‡»æ–‡ç« æœ€åçš„æ‰“èµæŒ‰é”®ï¼Œè¯·åšä¸»ä¸€æ¯å†°é˜”ä¹ï¼Œç¬‘ï½</strong></p><table>  <tbody><tr>    <td><img width="100" src="https://hualei.online/medias/reward/alipay.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/wechat.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/zan.png"></td>     </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> é›†ç¾¤æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> æŠ€æœ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€æ‹›æå®šGitHubä¸‹è½½åŠ é€Ÿ!</title>
      <link href="/posts/fdc0.html"/>
      <url>/posts/fdc0.html</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ä¸ªç—›ç‚¹"><a href="#ä¸€ä¸ªç—›ç‚¹" class="headerlink" title="ä¸€ä¸ªç—›ç‚¹"></a>ä¸€ä¸ªç—›ç‚¹</h1><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒGitHubæ˜¯ä¸€ä¸ªå·¨å¤§çš„å¼€æºå®åº“ï¼Œä»¥åŠç¨‹åºå‘˜å’Œç¼–ç¨‹çˆ±å¥½è€…çš„èšé›†åœ°ï¼ŒåŒ…æ‹¬æˆ‘ä¹‹å‰æ¨èçš„è¯¸å¤šä¼˜ç§€çš„å¼€æºé¡¹ç›®å…¨éƒ¨éƒ½æ˜¯ä½äºGitHubä¸Šã€‚ä½†æ˜¯æ¯å½“æˆ‘ä»¬çœ‹åˆ°ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Œå‡†å¤‡å»ä¸‹ï¼ˆbaiï¼‰è½½ï¼ˆpiaoï¼‰æ—¶ï¼Œä¼šå‘ç° git cloneçš„é€Ÿåº¦å¼‚å¸¸ä¹‹æ…¢ï¼å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œåœ¨æˆ‘å®¶é‡Œ200Mç§»åŠ¨å®½å¸¦çš„ç¯å¢ƒä¸‹ï¼Œæˆ‘å…‹éš†å¼€æºé¡¹ç›®å°±æ²¡å‘ç°é€Ÿåº¦å¤§äºè¿‡ 20.00KiB/sçš„æ—¶å€™ï¼Œè¿™ç®€ç›´å¤ªéš¾å—äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/%E5%9B%BE%E7%89%87%E4%B8%80.jpg" alt="å›¾ç‰‡ä¸€"><br>å°é¡¹ç›®å€’è¿˜å¥½ï¼Œæˆ‘ç­‰å‡ åˆ†é’Ÿæ— æ‰€è°“ï¼›ä¸€æ—¦é¡¹ç›®åºå¤§èµ·æ¥ï¼Œæˆ–è€…é¡¹ç›®æ–‡ä»¶æ•°ç›®ä¸€å¤šï¼Œ git clone å¤§æ¦‚ç‡ä¼šå¤±è´¥ï¼<br>å½“ç„¶ç½‘ä¸Šå¸¸è§çš„è¯¸å¦‚ä¿®æ”¹hostsã€ä»£ç†ç­‰æ–¹å¼å®é™…ä½¿ç”¨æ•ˆæœå¹¶ä¸ä¸€å®šå¥½ï¼Œè€Œä¸”ä¹Ÿä¸ç¨³å®šã€‚</p><h1 id="ç äº‘â€æ˜¯ä¸ªå¥½ä¸œè¥¿"><a href="#ç äº‘â€æ˜¯ä¸ªå¥½ä¸œè¥¿" class="headerlink" title="ç äº‘â€æ˜¯ä¸ªå¥½ä¸œè¥¿"></a>ç äº‘â€æ˜¯ä¸ªå¥½ä¸œè¥¿</h1><p>æ¥ä¸‹æ¥å°±ä»‹ç»ä¸€ç§GitHubä¸‹è½½çš„åŠ é€Ÿæ–¹æ³•ï¼šé€šè¿‡å›½å†…ç äº‘å¹³å°çš„è½¬æ¥ï¼Œæ¥å®ŒæˆGitHubä¸Šé¡¹ç›®çš„ä¸‹è½½åŠ é€Ÿã€‚<br> ï¼ˆ1ï¼‰é¦–å…ˆç¡®ä¿ç äº‘ä¸Šæœ‰è´¦æˆ·ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œæ²¡æœ‰çš„å¯ä»¥è‡ªè¡Œæ³¨å†Œä¸€ä¸‹ã€‚<br> ï¼ˆ2ï¼‰ç‚¹å‡»å³ä¸Šè§’æ–°å»ºä»“åº“çš„åŠ å· +ï¼Œé€‰æ‹©â€œä» GitHub/GitLabå¯¼å…¥ä»“åº“â€èœå•<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/%E5%9B%BE%E7%89%87%E4%BA%8C.jpg" alt="å›¾ç‰‡äºŒ"><br>  (3)ç„¶åå¡«å†™ä½äº GitHubä¸Šä½ æƒ³ cloneçš„ä»“åº“åœ°å€å¹¶å¯¼å…¥<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/%E5%9B%BE%E7%89%87%E4%B8%89.jpg" alt="å›¾ç‰‡ä¸‰"><br>è¿™ä¸€æ­¥äº¤ç»™ç äº‘æ¥åšé€Ÿåº¦æ˜¯éå¸¸å¿«çš„ï¼Œä¸€ä¼šå„¿åŠŸå¤«ï¼Œç äº‘å°±å…‹éš†å‡ºäº†ä¸€ä»½å’ŒGitHubä¸Šä¸€æ¨¡ä¸€æ ·çš„é¡¹ç›®ï¼<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/%E5%9B%BE%E7%89%87%E5%9B%9B.jpg" alt="å›¾ç‰‡å››"><br>  (4ï¼‰æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ç äº‘ä¸Šçš„é¡¹ç›®åœ°å€ï¼Œå°†é¡¹ç›® cloneåˆ°æœ¬åœ°ï¼Œè¿™æ—¶å€™çš„cloneé€Ÿåº¦å°±å¾ˆå¿«äº†ï¼Œå‡  MB/sçš„é€Ÿåº¦æ˜¯æ²¡é—®é¢˜çš„ï¼Œå¾ˆå¿«é¡¹ç›®å°±ä¸‹è½½ä¸‹æ¥äº†ã€‚æŒ‰é“ç†è®²è¿™æ—¶å€™æˆ‘ä»¬çš„ç›®çš„å·²ç»è¾¾åˆ°äº†ï¼Œä¸è¿‡ä¸è¦å¿˜äº†ï¼Œè¿˜æœ‰ä¸€ä»¶äº‹æ²¡åšã€‚</p><hr><h1 id="é‡æ–°å…³è”è¿œç«¯åœ°å€"><a href="#é‡æ–°å…³è”è¿œç«¯åœ°å€" class="headerlink" title="é‡æ–°å…³è”è¿œç«¯åœ°å€"></a>é‡æ–°å…³è”è¿œç«¯åœ°å€</h1><p>è¦çŸ¥é“ï¼Œè¿™æ—¶å€™å…‹éš†åˆ°æœ¬åœ°çš„é¡¹ç›®å…³è”çš„æ˜¯ç äº‘Giteeçš„åœ°å€ï¼Œå·²ç»å’ŒåŸæ¥çš„GitHubé¡¹ç›®å®Œå…¨è„±ç¦»äº†ï¼Œæ˜¯å¦å¤–ä¸€ä¸ªå‰¯æœ¬ã€‚<br>åœ¨å¿…è¦æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚æˆ‘ä»¬å°±æ˜¯è¦ç»™GitHubä¸Šçš„æŸä¸ªé¡¹ç›®æ PRï¼‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é‡æ–°å°†æˆ‘ä»¬æœ¬åœ°çš„é¡¹ç›®å…³è”åˆ°åŸæ¥çš„GitHubé¡¹ç›®ä¸Šå»ï¼Œåšæ³•å¦‚ä¸‹ï¼š<br> ï¼ˆ1ï¼‰é¦–å…ˆæ‰¾åˆ°ä½äºæœ¬åœ°ä»“åº“ç›®å½•ä¸‹çš„éšè—æ–‡ä»¶å¤¹ .git<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/%E5%9B%BE%E7%89%87%E4%BA%94.jpg" alt="å›¾ç‰‡äº”"><br> ï¼ˆ2ï¼‰ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ .gitæ–‡ä»¶å¤¹ä¸­çš„ configé…ç½®æ–‡ä»¶<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/%E5%9B%BE%E7%89%87%E5%85%AD.jpg" alt="å›¾ç‰‡å…­"><br>  (3)å°†é…ç½®æ–‡ä»¶ä¸­çš„ [remote â€œoriginâ€].urlå­—æ®µé‡æ–°å…³è”åˆ°åŸæ¥ä½äºGitHubä¸Šçš„GitHubé¡¹ç›®åœ°å€<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/%E5%9B%BE%E7%89%87%E4%B8%83.jpg" alt="å›¾ç‰‡ä¸ƒ"><br>å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¥ä¿®æ”¹è¿œç«¯åœ°å€ï¼Œæ•ˆæœä¸€æ ·çš„<br>è‡³æ­¤å¤§åŠŸå‘Šæˆï¼Œæœ¬åœ°é¡¹ç›®å°±ç›¸å½“äºæ˜¯ cloneè‡ªGitHubï¼Œåç»­æä»£ç ï¼Œæ PRåˆ°GitHubä¸Šéƒ½æ²¡æœ‰é—®é¢˜ã€‚</p><hr><p><strong>æŒç»­æ›´æ–°ä¸­â€¦ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æ¬¢è¿è”ç³»æˆ‘ï¼Œåœ¨æ–‡ç« æœ€åè¯„è®ºåŒºã€ç•™è¨€å’Œè®¨è®ºã€‘ï¼Œå½“ç„¶ï¼Œæ¬¢è¿ç‚¹å‡»æ–‡ç« æœ€åçš„æ‰“èµæŒ‰é”®ï¼Œè¯·åšä¸»ä¸€æ¯å†°é˜”ä¹ï¼Œç¬‘ï½</strong></p><table>  <tbody><tr>    <td><img width="100" src="https://hualei.online/medias/reward/alipay.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/wechat.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/zan.png"></td>     </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶ä½¿ç”¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€æœ¯ </tag>
            
            <tag> è½¯ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLåˆ†åº“åˆ†è¡¨æ–¹æ¡ˆæ±‡æ€»</title>
      <link href="/posts/fd29.html"/>
      <url>/posts/fd29.html</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€æ•°æ®åº“ç“¶é¢ˆ"><a href="#ä¸€ã€æ•°æ®åº“ç“¶é¢ˆ" class="headerlink" title="ä¸€ã€æ•°æ®åº“ç“¶é¢ˆ"></a>ä¸€ã€æ•°æ®åº“ç“¶é¢ˆ</h1><p>ä¸ç®¡æ˜¯IOç“¶é¢ˆï¼Œè¿˜æ˜¯CPUç“¶é¢ˆï¼Œæœ€ç»ˆéƒ½ä¼šå¯¼è‡´æ•°æ®åº“çš„æ´»è·ƒè¿æ¥æ•°å¢åŠ ï¼Œè¿›è€Œé€¼è¿‘ç”šè‡³è¾¾åˆ°æ•°æ®åº“å¯æ‰¿è½½æ´»è·ƒè¿æ¥æ•°çš„é˜ˆå€¼ã€‚åœ¨ä¸šåŠ¡Serviceæ¥çœ‹å°±æ˜¯ï¼Œå¯ç”¨æ•°æ®åº“è¿æ¥å°‘ç”šè‡³æ— è¿æ¥å¯ç”¨ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥æƒ³è±¡äº†å§ï¼ˆå¹¶å‘é‡ã€ååé‡ã€å´©æºƒï¼‰ã€‚</p><h2 id="1ã€IOç“¶é¢ˆ"><a href="#1ã€IOç“¶é¢ˆ" class="headerlink" title="1ã€IOç“¶é¢ˆ"></a>1ã€IOç“¶é¢ˆ</h2><p>ç¬¬ä¸€ç§ï¼šç£ç›˜è¯»IOç“¶é¢ˆï¼Œçƒ­ç‚¹æ•°æ®å¤ªå¤šï¼Œæ•°æ®åº“ç¼“å­˜æ”¾ä¸ä¸‹ï¼Œæ¯æ¬¡æŸ¥è¯¢æ—¶ä¼šäº§ç”Ÿå¤§é‡çš„IOï¼Œé™ä½æŸ¥è¯¢é€Ÿåº¦ -&gt; åˆ†åº“å’Œå‚ç›´åˆ†è¡¨ã€‚<br>ç¬¬äºŒç§ï¼šç½‘ç»œIOç“¶é¢ˆï¼Œè¯·æ±‚çš„æ•°æ®å¤ªå¤šï¼Œç½‘ç»œå¸¦å®½ä¸å¤Ÿ -&gt; åˆ†åº“ã€‚</p><h2 id="2ã€CPUç“¶é¢ˆ"><a href="#2ã€CPUç“¶é¢ˆ" class="headerlink" title="2ã€CPUç“¶é¢ˆ"></a>2ã€CPUç“¶é¢ˆ</h2><p>ç¬¬ä¸€ç§ï¼šSQLé—®é¢˜ï¼Œå¦‚SQLä¸­åŒ…å«joinï¼Œgroup byï¼Œorder byï¼Œéç´¢å¼•å­—æ®µæ¡ä»¶æŸ¥è¯¢ç­‰ï¼Œå¢åŠ CPUè¿ç®—çš„æ“ä½œ -&gt; SQLä¼˜åŒ–ï¼Œå»ºç«‹åˆé€‚çš„ç´¢å¼•ï¼Œåœ¨ä¸šåŠ¡Serviceå±‚è¿›è¡Œä¸šåŠ¡è®¡ç®—ã€‚<br>ç¬¬äºŒç§ï¼šå•è¡¨æ•°æ®é‡å¤ªå¤§ï¼ŒæŸ¥è¯¢æ—¶æ‰«æçš„è¡Œå¤ªå¤šï¼ŒSQLæ•ˆç‡ä½ï¼ŒCPUç‡å…ˆå‡ºç°ç“¶é¢ˆ -&gt; æ°´å¹³åˆ†è¡¨ã€‚</p><hr><h1 id="äºŒã€åˆ†åº“åˆ†è¡¨"><a href="#äºŒã€åˆ†åº“åˆ†è¡¨" class="headerlink" title="äºŒã€åˆ†åº“åˆ†è¡¨"></a>äºŒã€åˆ†åº“åˆ†è¡¨</h1><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/%E6%95%B0%E6%8D%AE%E5%BA%931.jpg" alt="æ•°æ®åº“1"></p><h2 id="1ã€æ°´å¹³åˆ†åº“"><a href="#1ã€æ°´å¹³åˆ†åº“" class="headerlink" title="1ã€æ°´å¹³åˆ†åº“"></a>1ã€æ°´å¹³åˆ†åº“</h2><p>æ¦‚å¿µï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸€å®šç­–ç•¥ï¼ˆhashã€rangeç­‰ï¼‰ï¼Œå°†ä¸€ä¸ªåº“ä¸­çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªåº“ä¸­ã€‚</p><p>ç»“æœï¼š<br>æ¯ä¸ªåº“çš„ç»“æ„éƒ½ä¸€æ ·ï¼›<br>æ¯ä¸ªåº“çš„æ•°æ®éƒ½ä¸ä¸€æ ·ï¼Œæ²¡æœ‰äº¤é›†ï¼›<br>æ‰€æœ‰åº“çš„å¹¶é›†æ˜¯å…¨é‡æ•°æ®ï¼›</p><p>åœºæ™¯ï¼šç³»ç»Ÿç»å¯¹å¹¶å‘é‡ä¸Šæ¥äº†ï¼Œåˆ†è¡¨éš¾ä»¥æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ï¼Œå¹¶ä¸”è¿˜æ²¡æœ‰æ˜æ˜¾çš„ä¸šåŠ¡å½’å±æ¥å‚ç›´åˆ†åº“ã€‚<br>åˆ†æï¼šåº“å¤šäº†ï¼Œioå’Œcpuçš„å‹åŠ›è‡ªç„¶å¯ä»¥æˆå€ç¼“è§£ã€‚</p><h2 id="2ã€æ°´å¹³åˆ†è¡¨"><a href="#2ã€æ°´å¹³åˆ†è¡¨" class="headerlink" title="2ã€æ°´å¹³åˆ†è¡¨"></a>2ã€æ°´å¹³åˆ†è¡¨</h2><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/%E6%95%B0%E6%8D%AE%E5%BA%932.jpg" alt="æ•°æ®åº“2"><br>æ¦‚å¿µï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸€å®šç­–ç•¥ï¼ˆhashã€rangeç­‰ï¼‰ï¼Œå°†ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªè¡¨ä¸­ã€‚</p><p>ç»“æœï¼š<br>æ¯ä¸ªè¡¨çš„ç»“æ„éƒ½ä¸€æ ·ï¼›<br>æ¯ä¸ªè¡¨çš„æ•°æ®éƒ½ä¸ä¸€æ ·ï¼Œæ²¡æœ‰äº¤é›†ï¼›<br>æ‰€æœ‰è¡¨çš„å¹¶é›†æ˜¯å…¨é‡æ•°æ®ï¼›<br>åœºæ™¯ï¼šç³»ç»Ÿç»å¯¹å¹¶å‘é‡å¹¶æ²¡æœ‰ä¸Šæ¥ï¼Œåªæ˜¯å•è¡¨çš„æ•°æ®é‡å¤ªå¤šï¼Œå½±å“äº†SQLæ•ˆç‡ï¼ŒåŠ é‡äº†CPUè´Ÿæ‹…ï¼Œä»¥è‡³äºæˆä¸ºç“¶é¢ˆã€‚æ¨èï¼šä¸€æ¬¡SQLæŸ¥è¯¢ä¼˜åŒ–åŸç†åˆ†æ<br>åˆ†æï¼šè¡¨çš„æ•°æ®é‡å°‘äº†ï¼Œå•æ¬¡SQLæ‰§è¡Œæ•ˆç‡é«˜ï¼Œè‡ªç„¶å‡è½»äº†CPUçš„è´Ÿæ‹…ã€‚</p><h2 id="3ã€å‚ç›´åˆ†åº“"><a href="#3ã€å‚ç›´åˆ†åº“" class="headerlink" title="3ã€å‚ç›´åˆ†åº“"></a>3ã€å‚ç›´åˆ†åº“</h2><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/%E6%95%B0%E6%8D%AE%E5%BA%933.jpg" alt="æ•°æ®åº“3"><br>æ¦‚å¿µï¼šä»¥è¡¨ä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸šåŠ¡å½’å±ä¸åŒï¼Œå°†ä¸åŒçš„è¡¨æ‹†åˆ†åˆ°ä¸åŒçš„åº“ä¸­ã€‚</p><p>ç»“æœï¼š<br>æ¯ä¸ªåº“çš„ç»“æ„éƒ½ä¸ä¸€æ ·ï¼›<br>æ¯ä¸ªåº“çš„æ•°æ®ä¹Ÿä¸ä¸€æ ·ï¼Œæ²¡æœ‰äº¤é›†ï¼›<br>æ‰€æœ‰åº“çš„å¹¶é›†æ˜¯å…¨é‡æ•°æ®ï¼›<br>åœºæ™¯ï¼šç³»ç»Ÿç»å¯¹å¹¶å‘é‡ä¸Šæ¥äº†ï¼Œå¹¶ä¸”å¯ä»¥æŠ½è±¡å‡ºå•ç‹¬çš„ä¸šåŠ¡æ¨¡å—ã€‚<br>åˆ†æï¼šåˆ°è¿™ä¸€æ­¥ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥æœåŠ¡åŒ–äº†ã€‚ä¾‹å¦‚ï¼Œéšç€ä¸šåŠ¡çš„å‘å±•ä¸€äº›å…¬ç”¨çš„é…ç½®è¡¨ã€å­—å…¸è¡¨ç­‰è¶Šæ¥è¶Šå¤šï¼Œè¿™æ—¶å¯ä»¥å°†è¿™äº›è¡¨æ‹†åˆ°å•ç‹¬çš„åº“ä¸­ï¼Œç”šè‡³å¯ä»¥æœåŠ¡åŒ–ã€‚å†æœ‰ï¼Œéšç€ä¸šåŠ¡çš„å‘å±•å­µåŒ–å‡ºäº†ä¸€å¥—ä¸šåŠ¡æ¨¡å¼ï¼Œè¿™æ—¶å¯ä»¥å°†ç›¸å…³çš„è¡¨æ‹†åˆ°å•ç‹¬çš„åº“ä¸­ï¼Œç”šè‡³å¯ä»¥æœåŠ¡åŒ–ã€‚</p><h2 id="4ã€å‚ç›´åˆ†è¡¨"><a href="#4ã€å‚ç›´åˆ†è¡¨" class="headerlink" title="4ã€å‚ç›´åˆ†è¡¨"></a>4ã€å‚ç›´åˆ†è¡¨</h2><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://hualei.online/medias/pictures/%E6%95%B0%E6%8D%AE%E5%BA%934.jpg" alt="æ•°æ®åº“4"><br>æ¦‚å¿µï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼ŒæŒ‰ç…§å­—æ®µçš„æ´»è·ƒæ€§ï¼Œå°†è¡¨ä¸­å­—æ®µæ‹†åˆ°ä¸åŒçš„è¡¨ï¼ˆä¸»è¡¨å’Œæ‰©å±•è¡¨ï¼‰ä¸­ã€‚</p><p>ç»“æœï¼š<br>æ¯ä¸ªè¡¨çš„ç»“æ„éƒ½ä¸ä¸€æ ·ï¼›<br>æ¯ä¸ªè¡¨çš„æ•°æ®ä¹Ÿä¸ä¸€æ ·ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæ¯ä¸ªè¡¨çš„å­—æ®µè‡³å°‘æœ‰ä¸€åˆ—äº¤é›†ï¼Œä¸€èˆ¬æ˜¯ä¸»é”®ï¼Œç”¨äºå…³è”æ•°æ®ï¼›<br>æ‰€æœ‰è¡¨çš„å¹¶é›†æ˜¯å…¨é‡æ•°æ®ï¼›<br>åœºæ™¯ï¼šç³»ç»Ÿç»å¯¹å¹¶å‘é‡å¹¶æ²¡æœ‰ä¸Šæ¥ï¼Œè¡¨çš„è®°å½•å¹¶ä¸å¤šï¼Œä½†æ˜¯å­—æ®µå¤šï¼Œå¹¶ä¸”çƒ­ç‚¹æ•°æ®å’Œéçƒ­ç‚¹æ•°æ®åœ¨ä¸€èµ·ï¼Œå•è¡Œæ•°æ®æ‰€éœ€çš„å­˜å‚¨ç©ºé—´è¾ƒå¤§ã€‚ä»¥è‡³äºæ•°æ®åº“ç¼“å­˜çš„æ•°æ®è¡Œå‡å°‘ï¼ŒæŸ¥è¯¢æ—¶ä¼šå»è¯»ç£ç›˜æ•°æ®äº§ç”Ÿå¤§é‡çš„éšæœºè¯»IOï¼Œäº§ç”ŸIOç“¶é¢ˆã€‚<br>åˆ†æï¼šå¯ä»¥ç”¨åˆ—è¡¨é¡µå’Œè¯¦æƒ…é¡µæ¥å¸®åŠ©ç†è§£ã€‚å‚ç›´åˆ†è¡¨çš„æ‹†åˆ†åŸåˆ™æ˜¯å°†çƒ­ç‚¹æ•°æ®ï¼ˆå¯èƒ½ä¼šå†—ä½™ç»å¸¸ä¸€èµ·æŸ¥è¯¢çš„æ•°æ®ï¼‰æ”¾åœ¨ä¸€èµ·ä½œä¸ºä¸»è¡¨ï¼Œéçƒ­ç‚¹æ•°æ®æ”¾åœ¨ä¸€èµ·ä½œä¸ºæ‰©å±•è¡¨ã€‚è¿™æ ·æ›´å¤šçš„çƒ­ç‚¹æ•°æ®å°±èƒ½è¢«ç¼“å­˜ä¸‹æ¥ï¼Œè¿›è€Œå‡å°‘äº†éšæœºè¯»IOã€‚æ‹†äº†ä¹‹åï¼Œè¦æƒ³è·å¾—å…¨éƒ¨æ•°æ®å°±éœ€è¦å…³è”ä¸¤ä¸ªè¡¨æ¥å–æ•°æ®ã€‚<br>ä½†è®°ä½ï¼Œåƒä¸‡åˆ«ç”¨joinï¼Œå› ä¸ºjoinä¸ä»…ä¼šå¢åŠ CPUè´Ÿæ‹…å¹¶ä¸”ä¼šè®²ä¸¤ä¸ªè¡¨è€¦åˆåœ¨ä¸€èµ·ï¼ˆå¿…é¡»åœ¨ä¸€ä¸ªæ•°æ®åº“å®ä¾‹ä¸Šï¼‰ã€‚å…³è”æ•°æ®ï¼Œåº”è¯¥åœ¨ä¸šåŠ¡Serviceå±‚åšæ–‡ç« ï¼Œåˆ†åˆ«è·å–ä¸»è¡¨å’Œæ‰©å±•è¡¨æ•°æ®ç„¶åç”¨å…³è”å­—æ®µå…³è”å¾—åˆ°å…¨éƒ¨æ•°æ®ã€‚</p><hr><h1 id="ä¸‰ã€åˆ†åº“åˆ†è¡¨å·¥å…·"><a href="#ä¸‰ã€åˆ†åº“åˆ†è¡¨å·¥å…·" class="headerlink" title="ä¸‰ã€åˆ†åº“åˆ†è¡¨å·¥å…·"></a>ä¸‰ã€åˆ†åº“åˆ†è¡¨å·¥å…·</h1><p>1.sharding-sphereï¼šjarï¼Œå‰èº«æ˜¯sharding-jdbcï¼›<br>2.TDDLï¼šjarï¼ŒTaobao Distribute Data Layerï¼›<br>3.Mycatï¼šä¸­é—´ä»¶ã€‚<br>    æ³¨ï¼šå·¥å…·çš„åˆ©å¼Šï¼Œè¯·è‡ªè¡Œè°ƒç ”ï¼Œå®˜ç½‘å’Œç¤¾åŒºä¼˜å…ˆã€‚</p><h1 id="å››ã€åˆ†åº“åˆ†è¡¨æ­¥éª¤"><a href="#å››ã€åˆ†åº“åˆ†è¡¨æ­¥éª¤" class="headerlink" title="å››ã€åˆ†åº“åˆ†è¡¨æ­¥éª¤"></a>å››ã€åˆ†åº“åˆ†è¡¨æ­¥éª¤</h1><p>æ ¹æ®å®¹é‡ï¼ˆå½“å‰å®¹é‡å’Œå¢é•¿é‡ï¼‰è¯„ä¼°åˆ†åº“æˆ–åˆ†è¡¨ä¸ªæ•° -&gt; é€‰keyï¼ˆå‡åŒ€ï¼‰-&gt; åˆ†è¡¨è§„åˆ™ï¼ˆhashæˆ–rangeç­‰ï¼‰-&gt; æ‰§è¡Œï¼ˆä¸€èˆ¬åŒå†™ï¼‰-&gt; æ‰©å®¹é—®é¢˜ï¼ˆå°½é‡å‡å°‘æ•°æ®çš„ç§»åŠ¨ï¼‰ã€‚<br>æ‰©å±•ï¼šMySQLï¼šåˆ†åº“åˆ†è¡¨ä¸åˆ†åŒºçš„åŒºåˆ«å’Œæ€è€ƒ</p><h1 id="äº”ã€åˆ†åº“åˆ†è¡¨æ€»ç»“"><a href="#äº”ã€åˆ†åº“åˆ†è¡¨æ€»ç»“" class="headerlink" title="äº”ã€åˆ†åº“åˆ†è¡¨æ€»ç»“"></a>äº”ã€åˆ†åº“åˆ†è¡¨æ€»ç»“</h1><p>åˆ†åº“åˆ†è¡¨ï¼Œé¦–å…ˆå¾—çŸ¥é“ç“¶é¢ˆåœ¨å“ªé‡Œï¼Œç„¶åæ‰èƒ½åˆç†åœ°æ‹†åˆ†ï¼ˆåˆ†åº“è¿˜æ˜¯åˆ†è¡¨ï¼Ÿæ°´å¹³è¿˜æ˜¯å‚ç›´ï¼Ÿåˆ†å‡ ä¸ªï¼Ÿï¼‰ã€‚ä¸”ä¸å¯ä¸ºäº†åˆ†åº“åˆ†è¡¨è€Œæ‹†åˆ†ã€‚<br>é€‰keyå¾ˆé‡è¦ï¼Œæ—¢è¦è€ƒè™‘åˆ°æ‹†åˆ†å‡åŒ€ï¼Œä¹Ÿè¦è€ƒè™‘åˆ°épartition keyçš„æŸ¥è¯¢ã€‚<br>åªè¦èƒ½æ»¡è¶³éœ€æ±‚ï¼Œæ‹†åˆ†è§„åˆ™è¶Šç®€å•è¶Šå¥½ã€‚</p><hr><p><strong>æŒç»­æ›´æ–°ä¸­â€¦ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æ¬¢è¿è”ç³»æˆ‘ï¼Œåœ¨æ–‡ç« æœ€åè¯„è®ºåŒºã€ç•™è¨€å’Œè®¨è®ºã€‘ï¼Œå½“ç„¶ï¼Œæ¬¢è¿ç‚¹å‡»æ–‡ç« æœ€åçš„æ‰“èµæŒ‰é”®ï¼Œè¯·åšä¸»ä¸€æ¯å†°é˜”ä¹ï¼Œç¬‘ï½</strong></p><table>  <tbody><tr>    <td><img width="100" src="https://hualei.online/medias/reward/alipay.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/wechat.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/zan.png"></td>     </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ€æœ¯ </tag>
            
            <tag> IT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ¡†æ¶çš„ä½¿ç”¨</title>
      <link href="/posts/7c5b.html"/>
      <url>/posts/7c5b.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç®€çŸ­ä»‹ç»"><a href="#ç®€çŸ­ä»‹ç»" class="headerlink" title="ç®€çŸ­ä»‹ç»"></a>ç®€çŸ­ä»‹ç»</h1><p>æ¦‚è¿°<br>éšç€åŠ¨æ€è¯­è¨€çš„æµè¡Œï¼ˆRubyã€Groovyã€Scalaã€Node.jsï¼‰ï¼ŒJavaçš„å¼€å‘æ˜¾å¾—æ ¼å¤–çš„ç¬¨é‡ï¼šç¹å¤šçš„é…ç½®ã€ä½ä¸‹çš„å¼€å‘æ•ˆç‡ã€å¤æ‚çš„éƒ¨ç½²æµç¨‹ä»¥åŠç¬¬ä¸‰æ–¹æŠ€æœ¯é›†æˆéš¾åº¦å¤§ã€‚<br>åœ¨ä¸Šè¿°ç¯å¢ƒä¸‹ï¼ŒSpringbootåº”è¿è€Œç”Ÿã€‚å®ƒä½¿ç”¨â€ä¹ æƒ¯ä¼˜äºé…ç½®â€ï¼ˆé¡¹ç›®ä¸­å­˜åœ¨å¤§é‡çš„é…ç½®ï¼Œæ­¤å¤–è¿˜å†…ç½®ä¸€ä¸ªä¹ æƒ¯æ€§çš„é…ç½®ï¼Œè®©ä½ æ— é¡»æ‰‹åŠ¨è¿›è¡Œé…ç½®ï¼‰çš„ç†å¿µè®©ä½ çš„é¡¹ç›®å¿«é€Ÿè¿è¡Œèµ·æ¥ã€‚ä½¿ç”¨springbootå¾ˆå®¹æ˜“åˆ›å»ºä¸€ä¸ªç‹¬ç«‹è¿è¡Œï¼ˆè¿è¡Œjarï¼Œå†…åµŒservletå®¹å™¨ï¼‰ã€å‡†ç”Ÿäº§çº§åˆ«çš„åŸºäºSpringæ¡†æ¶çš„é¡¹ç›®ï¼Œä½¿ç”¨springbootä½ å¯ä»¥ä¸ç”¨æˆ–è€…åªéœ€è¦å¾ˆå°‘çš„Springé…ç½®ã€‚</p><hr><h1 id="ä¸»é¢˜"><a href="#ä¸»é¢˜" class="headerlink" title="ä¸»é¢˜"></a>ä¸»é¢˜</h1><p>SpringBoot å…¥é—¨å®ä¾‹<br>Spring Boot çš„æ ¸å¿ƒåŠŸèƒ½<br>ç‹¬ç«‹è¿è¡Œçš„Springé¡¹ç›®<br>Spring Bootå¯ä»¥ä»¥jaråŒ…çš„å½¢å¼ç‹¬ç«‹è¿è¡Œï¼Œè¿è¡Œä¸€ä¸ªSpring Booté¡¹ç›®åªéœ€è¦é€šè¿‡java -jar xx.jarã€‚<br>å†…ç½®Servletå®¹å™¨<br>Spring Bootå¯é€‰æ‹©å†…åµŒTomcatã€Jettyæˆ–è€…Undertowï¼Œè¿™æ ·æ— é¡»ä»¥waråŒ…å½¢å¼éƒ¨ç½²ã€‚<br>æä¾›starterç®€åŒ–mavené…ç½®<br>Springæä¾›äº†ä¸€ç³»åˆ—çš„starter pomæ¥ç®€åŒ–mavenä¾èµ–åŠ è½½ï¼Œä¾‹å¦‚ï¼šå½“ä½ ä½¿ç”¨äº†spring-boot-starter-webæ—¶ï¼Œä¼šè‡ªåŠ¨åŠ å…¥ç›¸å…³ä¾èµ–ï¼Œæ— éœ€ä½ æ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ªçš„æ·»åŠ åæ ‡ä¾èµ–ã€‚<br>è‡ªåŠ¨é…ç½®Spring<br>Spring Bootä¼šæ ¹æ®åœ¨ç±»è·¯å¾„ä¸­çš„jaråŒ…ã€ç±»ï¼Œä¸ºjaråŒ…é‡Œçš„ç±»è‡ªåŠ¨é…ç½®Beanï¼Œè¿™æ ·ä¼šæå¤§åœ°å‡å°‘æˆ‘ä»¬è¦ä½¿ç”¨çš„é…ç½®ã€‚å½“ç„¶ï¼ŒSpring Bootåªæ˜¯è€ƒè™‘äº†å¤§å¤šæ•°çš„å¼€å‘åœºæ™¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰åœºæ™¯ï¼Œè‹¥åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è‡ªåŠ¨é…ç½®beanï¼Œè€ŒSpring Bootæ²¡æœ‰æä¾›æ”¯æŒï¼Œåˆ™å¯ä»¥è‡ªå®šä¹‰è‡ªåŠ¨é…ç½®ã€‚<br>æ— ä»£ç ç”Ÿæˆå’Œxmlé…ç½®<br>Spring Bootçš„ç¥å¥‡çš„ä¸æ˜¯å€ŸåŠ©äºä»£ç ç”Ÿæˆæ¥å®ç°çš„ï¼Œè€Œæ˜¯é€šè¿‡æ¡ä»¶æ³¨è§£æ¥å®ç°çš„ï¼Œè¿™æ˜¯Spring 4.xæä¾›çš„æ–°ç‰¹æ€§ï¼ŒSpring 4.xæå€¡ä½¿ç”¨javaé…ç½®å’Œæ³¨è§£é…ç½®ç›¸ç»“åˆï¼Œè€ŒSpring Bootä¸éœ€è¦ä»»ä½•xmlé…ç½®å³å¯å®ç°Sping Bootçš„æ‰€æœ‰é…ç½®ã€‚<br>ä¼˜ç¼ºç‚¹</p><p>ä¼˜ç‚¹<br>å¿«é€Ÿæ„å»ºé¡¹ç›®ï¼šçœç•¥äº†ç¹çä¸”é‡å¤çš„xmlé…ç½®ï¼Œåˆ†åˆ†é’Ÿæ„å»ºä¸€ä¸ªwebå·¥ç¨‹ï¼›<br>å¯¹ä¸»æµå¼€å‘æ¡†æ¶çš„æ— é…ç½®é›†æˆï¼šæä¾›äº†å¾ˆå¤šStarter ä¾èµ–åŒ…ï¼Œå¼€ç®±å³ç”¨ï¼Œæ— éœ€å¤šä½™é…ç½®ï¼›<br>é¡¹ç›®å¯ç‹¬ç«‹è¿è¡Œï¼šæ— éœ€å¤–éƒ¨ä¾èµ–Servletå®¹å™¨ï¼›<br>æå¤§åœ°æä¾›äº†å¼€å‘ã€éƒ¨ç½²æ•ˆç‡ï¼›<br>ç›‘æ§ç®€å•ï¼šæä¾›äº†actuatoråŒ…ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥å¯¹ä½ çš„åº”ç”¨è¿›è¡Œç›‘æ§ã€‚</p><p>ç¼ºç‚¹<br>ä¾èµ–å¤ªå¤šï¼šä¸€ä¸ªç®€å•çš„SpringBootåº”ç”¨éƒ½æœ‰å¥½å‡ åMåªæœ‰ï¼›<br>ç¼ºå°‘ç›‘æ§é›†æˆæ–¹æ¡ˆã€å®‰å…¨ç®¡ç†æ–¹æ¡ˆï¼šåªæä¾›åŸºç¡€ç›‘æ§ï¼Œè¦å®ç°ç”Ÿäº§çº§åˆ«çš„ç›‘æ§ï¼Œç›‘æ§æ–¹æ¡ˆéœ€è¦è‡ªå·±åŠ¨æ‰‹è§£å†³ï¼›(åæœŸè®²è§£soringCloudæ—¶ï¼Œä¼šç»“åˆpinpointå’Œskywalkingåˆ†å¸ƒå¼é“¾è·¯å·¥å…·è¿›è¡Œåº”ç”¨ç›‘æ§)</p><hr><h1 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h1><p>æ­£æ–‡<br>åœ¨ eclips eä¸­åˆ›å»º maven projectï¼Œåˆ›å»ºè¿‡ç¨‹ä¸­ä¸ä½¿ç”¨ archetypeï¼Œpackaging å±æ€§é»˜è®¤ jar å³å¯ã€‚<br>pom.xml ä¸­æ·»åŠ  SpringBoot ä¾èµ–<br><parent><br>    <groupid>org.springframework.boot</groupid><br>    <artifactid>spring-boot-starter-parent</artifactid><br>    <version>2.0.2.RELEASE</version><br></parent></p><dependencies>    <dependency>        <groupid>org.springframework.boot</groupid>        <artifactid>spring-boot-starter-web</artifactid>    </dependency></dependencies>åœ¨ src/main/java ä¸‹åˆ›å»ºåŸºç¡€åŒ…ï¼Œæœ¬æ–‡ä¸º com.aotian.demoï¼Œç„¶ååˆ›å»ºä¸€ä¸ªå¯åŠ¨ç±»ï¼Œæœ¬æ–‡åˆ›å»ºä¸º SpringBootDemoï¼Œè¿™ä¸ªç±»ç”¨äºå¯åŠ¨ SpringBoot å†…ç½®å®¹å™¨ï¼Œå¯ä»¥ç†è§£ä¸º SpringBoot ç¨‹åºçš„å…¥å£ï¼ŒSpringBoot ä¼šæ‰«æè¿™ä¸ªç±»æ‰€åœ¨åŒ…çš„æ‰€æœ‰å­åŒ…ä¸­çš„å†…å®¹ã€‚åˆ›å»ºåæ·»åŠ  main æ–¹æ³•å’Œæ³¨è§£,ä»£ç å¦‚ä¸‹ï¼špackage com.aotian.demo;<p>import org.springframework.boot.SpringApplication;<br>import org.springframework.boot.autoconfigure.EnableAutoConfiguration;</p><p>/**</p><ul><li><p>springbootå¯åŠ¨ç¨‹åº</p></li><li><p>@author aotian</p></li><li></li><li><p>/<br>@SpringBootApplication<br>public class SpringBootDemo {</p><p>  public static void main(String[] args) {</p><pre><code>  SpringApplication.run(SpringBootDemo.class, args);</code></pre><p>  }</p></li></ul><p>}<br>åœ¨ä¸Šä¸€æ­¥çš„åŸºç¡€åŒ…ä¸‹ç»§ç»­åˆ›å»ºå­åŒ…ï¼Œæœ¬æ–‡åˆ›å»ºçš„æ˜¯ controller åŒ…ï¼Œç„¶ååˆ›å»ºå…·ä½“çš„ä¸šåŠ¡ç±»ï¼Œæœ¬æ–‡åˆ›å»ºä¸º DemoControllerï¼Œå…¶ä¸­ä»£ç ä¸ SpringMVC å†™æ³•ä¸€æ ·ï¼Œä»£ç å¦‚ä¸‹ï¼š<br>package com.aotian.demo.controller;</p><p>import org.springframework.web.bind.annotation.RequestMapping;<br>import org.springframework.web.bind.annotation.RestController;</p><p>/**</p><ul><li><p>æ¼”ç¤ºé¡¹ç›®æ§åˆ¶ç±»</p></li><li><p>@author aotian</p></li><li></li><li><p>/<br>@RestController<br>public class DemoController {</p><p>  @RequestMapping(â€œ/helloSpringBootâ€)<br>  public String helloSpringBoot() {</p><pre><code>  return "Hello Spring Boot";</code></pre><p>  }</p></li></ul><p>}<br>å¯åŠ¨ SpringBoot ç¨‹åºã€‚è¿”å›ä¹‹å‰çš„ SpringBootDemo ç±»ä¸­è¿è¡Œ main æ–¹æ³•ï¼Œå¯åœ¨æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼Œå…¶ä¸­çº¢çº¿æ ‡æ³¨çš„éƒ¨åˆ†æç¤ºåˆ°ï¼š<br>springmvc é»˜è®¤è®¿é—®åœ°å€ä¸º /<br>tomcat é»˜è®¤ç«¯å£ä¸º 8080<br>springboot ç¨‹åºå¯åŠ¨æˆåŠŸ</p><p>spring boot å¯åŠ¨é¡µé¢<br>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <a href="http://localhost:8080/helloSpringBoot" target="_blank" rel="noopener">http://localhost:8080/helloSpringBoot</a> å³å¯åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹å…¶è¿”å›çš„å­—ç¬¦ä¸²ã€‚</p><p>åˆ°æ­¤ï¼Œä¸€ä¸ªç®€å•çš„Spring Bootç¨‹åºå°±å¼€å‘å®Œäº†ï¼Œä¸Spring MVC çš„å¼€å‘æ•ˆç‡æ¯”è¾ƒèµ·æ¥ï¼Œé‚£ä¸€å®šæ˜¯ä¸€ä¸ªè·¨æ—¶ä»£çš„é£è·ƒï¼Œå‡å°‘äº†çƒ¦äººçš„XMLé…ç½®æ–‡ä»¶ï¼Œè¿™æ ·ç¨‹åºçœ‹èµ·æ¥å°±ä¼šè½»æ¾å¾ˆå¤šã€‚</p><p><strong>æŒç»­æ›´æ–°ä¸­â€¦ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æ¬¢è¿è”ç³»æˆ‘ï¼Œåœ¨æ–‡ç« æœ€åè¯„è®ºåŒºã€ç•™è¨€å’Œè®¨è®ºã€‘ï¼Œå½“ç„¶ï¼Œæ¬¢è¿ç‚¹å‡»æ–‡ç« æœ€åçš„æ‰“èµæŒ‰é”®ï¼Œè¯·åšä¸»ä¸€æ¯å†°é˜”ä¹ï¼Œç¬‘ï½</strong></p><table>  <tbody><tr>    <td><img width="100" src="https://hualei.online/medias/reward/alipay.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/wechat.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/zan.png"></td>     </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯çš„å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢ </tag>
            
            <tag> æŠ€æœ¯ </tag>
            
            <tag> IT </tag>
            
            <tag> ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢å¼€æº</title>
      <link href="/posts/be38.html"/>
      <url>/posts/be38.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ•ˆæœæ¼”ç¤º"><a href="#æ•ˆæœæ¼”ç¤º" class="headerlink" title="æ•ˆæœæ¼”ç¤º"></a>æ•ˆæœæ¼”ç¤º</h1><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://raw.githubusercontent.com/shw2018/cdn/master/blog_files/img/Blog-Open-Source/blog-demo1.gif" alt="æ¼”ç¤ºDemo"></p><h1 id="ç®€çŸ­ä»‹ç»"><a href="#ç®€çŸ­ä»‹ç»" class="headerlink" title="ç®€çŸ­ä»‹ç»"></a>ç®€çŸ­ä»‹ç»</h1><p>å€’è…¾äº†ä¸€ä¸¤å‘¨æ€»ç®—æŠŠä¸ªäººåšå®¢ç½‘ç«™å®Œå–„äº†ï¼Œç›®å‰è¿™ä¸ªç‰ˆæœ¬ä½¿ç”¨åº”è¯¥æ˜¯å¤Ÿäº†ï¼Œå½“ç„¶è¿˜æœ‰ä¸€äº›ä¼˜åŒ–é¡¹å’ŒåŠŸèƒ½å¢åŠ åç»­åœ¨æ…¢æ…¢æ›´æ–°.</p><p>æœ¬åšå®¢åŸºäº<code>Hexo</code>æ¡†æ¶æ­å»ºï¼Œç”¨åˆ°<a href="https://github.com/hualei1234567" target="_blank" rel="noopener">hexo-theme-matery</a>ä¸»é¢˜, å¹¶åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šåšäº†å¾ˆå¤šä¿®æ”¹ï¼Œä¿®å¤äº†ä¸€äº›bugï¼Œå¢åŠ äº†ä¸€äº›æ–°çš„ç‰¹æ€§å’ŒåŠŸèƒ½ï¼Œåšå®¢åœ°å€ï¼š<a href="https://hualei1234567.github.io/" target="_blank" rel="noopener">https://hualei1234567.github.io</a>ï¼Œåšå®¢æ¼”ç¤ºï¼š<a href="https://hualei.online">hualei.online</a>ã€‚</p><hr><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><p><strong>åŸä¸»é¢˜ç‰¹æ€§</strong>:</p><ul><li><p>ç®€å•æ¼‚äº®ï¼Œæ–‡ç« å†…å®¹ç¾è§‚æ˜“è¯»</p></li><li><p><a href="https://material.io/" target="_blank" rel="noopener">Material Design</a> è®¾è®¡</p></li><li><p>å“åº”å¼è®¾è®¡ï¼Œåšå®¢åœ¨æ¡Œé¢ç«¯ã€å¹³æ¿ã€æ‰‹æœºç­‰è®¾å¤‡ä¸Šå‡èƒ½å¾ˆå¥½çš„å±•ç°</p></li><li><p>é¦–é¡µè½®æ’­æ–‡ç« åŠæ¯å¤©åŠ¨æ€åˆ‡æ¢ <code>Banner</code> å›¾ç‰‡</p></li><li><p>ç€‘å¸ƒæµå¼çš„åšå®¢æ–‡ç« åˆ—è¡¨ï¼ˆæ–‡ç« æ— ç‰¹è‰²å›¾ç‰‡æ—¶ä¼šæœ‰ <code>24</code> å¼ æ¼‚äº®çš„å›¾ç‰‡ä»£æ›¿ï¼‰</p></li><li><p>æ—¶é—´è½´å¼çš„å½’æ¡£é¡µ</p></li><li><p><strong>è¯äº‘</strong>çš„æ ‡ç­¾é¡µå’Œ<strong>é›·è¾¾å›¾</strong>çš„åˆ†ç±»é¡µ</p></li><li><p>ä¸°å¯Œçš„å…³äºæˆ‘é¡µé¢ï¼ˆåŒ…æ‹¬å…³äºæˆ‘ã€æ–‡ç« ç»Ÿè®¡å›¾ã€æˆ‘çš„é¡¹ç›®ã€æˆ‘çš„æŠ€èƒ½ã€ç›¸å†Œç­‰ï¼‰</p></li><li><p>å¯è‡ªå®šä¹‰çš„æ•°æ®çš„å‹æƒ…é“¾æ¥é¡µé¢</p></li><li><p>æ”¯æŒæ–‡ç« ç½®é¡¶å’Œæ–‡ç« æ‰“èµ</p></li><li><p>æ”¯æŒ <code>MathJax</code></p></li><li><p><code>TOC</code> ç›®å½•</p></li><li><p>å¯è®¾ç½®å¤åˆ¶æ–‡ç« å†…å®¹æ—¶è¿½åŠ ç‰ˆæƒä¿¡æ¯</p></li><li><p>å¯è®¾ç½®é˜…è¯»æ–‡ç« æ—¶åšå¯†ç éªŒè¯</p></li><li><p><a href="https://gitalk.github.io/" target="_blank" rel="noopener">Gitalk</a>ã€<a href="https://imsun.github.io/gitment/" target="_blank" rel="noopener">Gitment</a>ã€<a href="https://valine.js.org/" target="_blank" rel="noopener">Valine</a> å’Œ <a href="https://disqus.com/" target="_blank" rel="noopener">Disqus</a> è¯„è®ºæ¨¡å—ï¼ˆæ¨èä½¿ç”¨ <code>Gitalk</code>ï¼‰</p></li><li><p>é›†æˆäº†<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener">ä¸è’œå­ç»Ÿè®¡</a>ã€è°·æ­Œåˆ†æï¼ˆ<code>Google Analytics</code>ï¼‰å’Œæ–‡ç« å­—æ•°ç»Ÿè®¡ç­‰åŠŸèƒ½</p></li><li><p>æ”¯æŒåœ¨é¦–é¡µçš„éŸ³ä¹æ’­æ”¾å’Œè§†é¢‘æ’­æ”¾åŠŸèƒ½</p><p><strong>å¢åŠ çš„å·¥ä½œæˆ–ç‰¹æ€§(æœªæ‰“é’©çš„æ˜¯å·²åšä½†è¿˜æ²¡æ›´æ–°åˆ°æºç çš„)</strong>:</p></li><li><p>ä¿®æ”¹äº†åŸä¸»é¢˜çš„ä¸€äº›å¾ˆå¤š<code>bug</code>   2019.08.05</p></li><li><p>åŠ å…¥å›¾ç‰‡æ‡’åŠ è½½åŠŸèƒ½ï¼Œåœ¨æ ¹ç›®å½•é…ç½®æ–‡ä»¶å¼€å¯å’Œå…³é—­    2019.08.09</p></li><li><p>å¢åŠ <code>ç•™è¨€æ¿</code>åŠŸèƒ½          2019.08.05</p></li><li><p>åœ¨å…³äºæ¿å—,åŠ å…¥<code>ç®€å†</code>åŠŸèƒ½é¡µ   2019.08.05</p></li><li><p>å¢åŠ è§†å¬[è§†è§‰å¬è§‰å½±éŸ³]æ¿å—       2019.08.10</p></li><li><p>æ”¯æŒ<code>emoji</code>è¡¨æƒ…ï¼Œç”¨<code>markdown emoji</code>è¯­æ³•ä¹¦å†™ç›´æ¥ç”Ÿæˆå¯¹åº”çš„èƒ½<strong>è·³è·ƒ</strong>çš„è¡¨æƒ…ã€‚  2019.08.10</p></li><li><p>å¢åŠ ç½‘ç«™è¿è¡Œæ—¶é—´æ˜¾ç¤º  2019.08.10</p></li><li><p>å¢åŠ <code>åŠ¨æ¼«æ¨¡å‹</code>     2019.08.10</p></li><li><p>æ•´ä½“æ›¿æ¢Bannerå›¾ç‰‡å’Œæ–‡ç« ç‰¹è‰²å›¾ç‰‡   2019.08.10</p></li><li><p>å¢åŠ åˆ†ç±»<code>ç›¸å†Œ</code>åŠŸèƒ½         2019.08.29</p></li><li><p>å»æ‰æ ‡ç­¾é¡µ,å°†å…¶åˆå¹¶è‡³<code>åˆ†ç±»</code>é¡µä¸­                2019.09.01</p></li><li><p>ä¿®æ”¹äº†ä¸€äº›æ§ä»¶çš„å‚æ•°   2019.09.01</p></li><li><p>ä¿®æ”¹éƒ¨åˆ†æ ·å¼,æ¯”å¦‚: æ–‡ç« å¡ç‰‡,å›ºå®šé«˜åº¦,ä½¿å…¶ä¸è‡³äºå› ä¸ºæ–‡ç« æ‘˜è¦çš„é•¿çŸ­ä¸åŒå¯¼è‡´å¡ç‰‡å¤§å°ä¸ä¸€ä½¿é¡µé¢å¸ƒå±€å¾ˆä¸ç¾è§‚,ç±»ä¼¼çš„è¿˜æœ‰å‹é“¾å¡ç‰‡,ä¼˜åŒ–äº†é¡µé¢å†…å®¹å¸ƒå±€,è§†è§‰æ›´æ•´é½ç¾è§‚          2019.09.01</p></li><li><p>è§£å†³é¦–é¡µæ–‡ç« åˆ—è¡¨å¡ç‰‡ä¸Šæ–¹ <code>border-radius</code>åœ†è§’å¤±æ•ˆçš„bug  2019.09.01</p></li><li><p>æ·»åŠ é¡µé¢æ¨±èŠ±é£˜è½åŠ¨æ•ˆ            2019.09.09</p></li><li><p>æ·»åŠ é¼ æ ‡ç‚¹å‡»çƒŸèŠ±çˆ†ç‚¸åŠ¨æ•ˆ   2019.09.09</p></li><li><p>åŠ å…¥å¤©æ°”æ¥å£æ§ä»¶   2019.09.09</p></li><li><p>åŠ å…¥é¼ æ ‡ç‚¹å‡»æ–‡å­—ç‰¹æ•ˆ   2019.09.10</p></li><li><p>æ·»åŠ é¡µé¢é›ªèŠ±é£˜è½åŠ¨æ•ˆ            2019.09.10</p></li><li><p>æ·»åŠ åœ¨çº¿èŠå¤©æ’ä»¶            2019.09.12</p></li><li><p>æŒç»­æ›´æ–°â€¦</p></li></ul><hr><blockquote><p><strong>æ›´å¤šè¯¦æƒ…æ•™ç¨‹ï¼Œå¼ºçƒˆæ¨èå¤§ä½¬å†™çš„ï¼š<a href="https://sunhwee.com/posts/6e8839eb.html" target="_blank" rel="noopener">Hexo+Githubåšå®¢æ­å»ºå®Œå…¨æ•™ç¨‹</a></strong></p></blockquote><blockquote><p><strong>æœ€åï¼Œå¦‚æœé¡¹ç›®å’Œæ•™ç¨‹å¯¹ä½ æœ‰æ‰€å¸®åŠ©æˆ–è€…ä½ çœ‹è§äº†è¿˜ç®—æ¯”è¾ƒå–œæ¬¢ï¼Œæ¬¢è¿ç»™æˆ‘<code>star</code>ï¼Œè°¢è°¢æ‚¨ï¼</strong></p></blockquote><p><strong>æŒç»­æ›´æ–°ä¸­â€¦ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æ¬¢è¿è”ç³»æˆ‘ï¼Œåœ¨æ–‡ç« æœ€åè¯„è®ºåŒºã€ç•™è¨€å’Œè®¨è®ºã€‘ï¼Œå½“ç„¶ï¼Œæ¬¢è¿ç‚¹å‡»æ–‡ç« æœ€åçš„æ‰“èµæŒ‰é”®ï¼Œè¯·åšä¸»ä¸€æ¯å†°é˜”ä¹ï¼Œç¬‘ï½</strong></p><table>  <tbody><tr>    <td><img width="100" src="https://hualei.online/medias/reward/alipay.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/wechat.bmp"></td>    <td><img width="100" src="https://hualei.online/medias/reward/zan.png"></td>     </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å®‰è£…ä¸é…ç½® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Github </tag>
            
            <tag> åšå®¢ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
